(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{415:function(e,t,a){e.exports=a(981)},420:function(e,t,a){},425:function(e,t,a){},427:function(e,t,a){},452:function(e,t){},454:function(e,t){},486:function(e,t){},487:function(e,t){},556:function(e,t){},665:function(e,t,a){},674:function(e,t,a){},676:function(e,t,a){},678:function(e,t,a){},813:function(e,t,a){},850:function(e,t,a){},863:function(e,t,a){},865:function(e,t,a){},869:function(e,t,a){},871:function(e,t,a){},949:function(e,t,a){},951:function(e,t,a){},953:function(e,t,a){},955:function(e,t,a){},957:function(e,t,a){},959:function(e,t,a){},961:function(e,t,a){},965:function(e,t,a){},967:function(e,t,a){},969:function(e,t,a){},971:function(e,t,a){},973:function(e,t,a){},975:function(e,t,a){},977:function(e,t,a){},979:function(e,t,a){},981:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(84),c=a.n(o);a(420),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(118),l=a(8),i=a(3),d="TOGGLE CART",u="CHANGE PAGE INFO",m="UPDATE PRODUCT IN CART",p="UPDATE_AUTH_STATUS",g="REFRESH_CART",f={Cart:{isActive:!1,products:[]},Auth:{},Modal:{isUpdateMode:!1,submitClassName:""},Paginator:{},LoadingBar:{},AuthenticationStatus:{isLoggedIn:!1}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(i.a)({},e,{Cart:Object(i.a)({},e.Cart,{isActive:void 0!==t.payload?t.payload:!e.Cart.isActive})});case m:return Object(i.a)({},e,{Cart:Object(i.a)({},e.Cart,{products:t.payload})});case p:return Object(i.a)({},e,{AuthenticationStatus:Object(i.a)({},e.AuthenticationStatus,t.payload)});default:return e}},E="FETCH_INDUSTRIES",v="HOVER_INDUSTRY_CHANGE",b="SHOW_NOTIFICATION",N={Header:{industries:[],currentIndustry:{},notificationMessage:"",notificationType:""},Footer:{}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(i.a)({},e,{Header:Object(i.a)({},e.Header,{industries:t.payload})});case v:return Object(i.a)({},e,{Header:Object(i.a)({},e.Header,{currentIndustry:t.payload})});case b:return Object(i.a)({},e,{Header:Object(i.a)({},e.Header,{notificationMessage:t.payload.message,notificationType:t.payload.type})});default:return e}},I="FETCH_PRODUCTS",S="FETCH_CATEGORIES",w="FETCH_BRANCHES",T="DESCREASE_VIEWER",C={Products:{products:[],currentPage:1,pageSize:12,totalItems:0},SearchPanel:{categories:[],branches:[],currentIndustryId:0},ProductDetail:{},decreaseViewer:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(i.a)({},e,{Products:Object(i.a)({},e.Products,{products:t.payload})});case S:return Object(i.a)({},e,{SearchPanel:Object(i.a)({},e.SearchPanel,{categories:t.payload})});case T:return console.log("action reducer viewer: ",t.payload),Object(i.a)({},e,{decreaseViewer:t.payload});case w:return Object(i.a)({},e,{SearchPanel:Object(i.a)({},e.SearchPanel,{currentIndustryId:t.payload})});case u:return Object(i.a)({},e,{Products:Object(i.a)({},e.Products,t.payload)});default:return e}},P={CheckoutDetail:{cartItems:[]}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return(arguments.length>1?arguments[1]:void 0).type,e},k="ADMIN_UPDATE_FILTER",U="ADMIN_USER_UPDATE_FORM",R="ADMIN_USER_FETCH_USERS",j="ADMIN_PRODUCT_UPDATE_FORM",D="ADMIN_PRODUCT_FETCH_PRODUCTS",_="ADMIN_BRAND_UPDATE_FORM",B="ADMIN_ORDER_UPDATE_FORM",M="ADMIN_ORDER_FETCH_ORDERS",L="http://localhost:5000",x="YYYY-MM-DD",F={keyword:"q",industryId:"ind",branchId:"brch",categoryId:"cat",brandId:"brd",minPrice:"pfrom",maxPrice:"pto"},H={TRUE:"TRUE",FALSE:"FALSE"},q={ADMIN:"ADMIN",CUSTOMER:"CUSTOMER",PUBLIC:"PUBLIC"},G={MALE:"MALE",FEMALE:"FEMALE"},z={PENDING:"PENDING",CHECKED:"CHECKED",PACKING:"PACKING",SHIPPING:"SHIPPING",CANCELED:"CANCELED",SUCCESSFUL:"SUCCESSFUL",PAID:"PAID"},J={AdminAddUser:{id:"",username:"",permission:q.CUSTOMER,email:"",fullName:"",dateOfBirth:"",phone:"",gender:G.MALE,address:"",active:H.TRUE,password:""},AdminAddProduct:{id:"",product_name:"",brand_id:1,industry_id:1,branch_id:1,category_id:1,price:0,images:'["https://www.twsf.com.tw/taipei/images/default.jpg"]',description:"",amount:0,stock:0,new_amount:0,active:H.TRUE},AdminAddBrand:{id:"",brand_name:""}},V=[{ID:1,NAME:"Ship COD",DESCRIPTION:"Pay when deliver",SHIPPING_FEE:19e3}],W={app_id:"XWlu7av4mIl9LiVOkizU",app_code:"SWPg1es3nHq226fb1B6DMQ",useHTTPS:!0},K="yf0epfCPMF1RxeR3kc6VdpDFb2qpE7pQgpLiGsG7",Y="Lh1WCK66TzgUR80NhQ736NQvOrzil2cWhZnyU4XY",Z="OzV3QnIefjbn14kyEEVMcOQs2o7kxWNSk0I6SW7e",Q="https://parseapi.back4app.com/",$="wss://sang.back4app.io",X={AdminUser:{users:[]},AdminAddUser:{formData:Object(i.a)({},J.AdminAddUser)},AdminProduct:{products:[]},AdminAddProduct:{formData:Object(i.a)({},J.AdminAddProduct)},AdminBrand:{},AdminAddBrand:{formData:Object(i.a)({},J.AdminAddBrand)},AdminOrder:{orders:[]},AdminIndustry:{},AdminAddIndustry:{},AdminBranch:{},AdminAddBranch:{},AdminAddCategory:{},AdminFilter:{currentPage:1,totalItems:0,pageSize:10,query:{keyword:""}},Admin:{},AdminNavBar:{}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(i.a)({},e,{AdminFilter:Object(i.a)({},e.AdminFilter,{query:Object(i.a)({},e.AdminFilter.query,t.payload)})});case u:return Object(i.a)({},e,{AdminFilter:Object(i.a)({},e.AdminFilter,t.payload)});case U:return Object(i.a)({},e,{AdminAddUser:{formData:Object(i.a)({},e.AdminAddUser.formData,t.payload)}});case R:return Object(i.a)({},e,{AdminUser:Object(i.a)({},e.AdminUser,{users:t.payload})});case j:return Object(i.a)({},e,{AdminAddProduct:{formData:Object(i.a)({},e.AdminAddProduct.formData,t.payload)}});case D:return Object(i.a)({},e,{AdminProduct:Object(i.a)({},e.AdminProduct,{products:t.payload})});case _:return Object(i.a)({},e,{AdminAddBrand:{formData:Object(i.a)({},e.AdminAddBrand.formData,t.payload)}});default:return e}},te="FETCH_ORDERS",ae="FETCH_ORDER_DETAIL",ne={Orders:{orders:[]},OrderDetail:{order:{}}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Object(i.a)({},e,{Orders:Object(i.a)({},e.Orders,{orders:t.payload})});case ae:return Object(i.a)({},e,{OrderDetail:Object(i.a)({},e.OrderDetail,{order:t.payload})});default:return e}},oe=Object(s.b)({common:h,layout:y,products:O,checkout:A,admin:ee,orders:re}),ce=a(2),se=a(14),le=a(5),ie=a(4),de=a(6),ue=(a(425),a(427),a(989)),me=a(991),pe=a(988),ge=a(406),fe=a.n(ge),he=a(47),Ee=a.n(he),ve="/auth",be="/account",Ne="/product",ye="/checkout",Ie="/admin",Se="/zp",we=function(e){var t=e.method,a=e.reqBody,n=e.route,r=e.jwtToken;return new Promise(function(e,o){var c={"Content-Type":"application/json","x-access-token":r,"Access-Control-Allow-Origin":"*"};fe()({method:t,uri:L+n,qs:a&&("POST"===t||"DELETE"===t||"PUT"===t?a:void 0),body:a&&("POST"===t||"DELETE"===t||"PUT"===t?JSON.stringify(a):void 0),headers:c},function(t,a,n){t&&o(t),e(n)})})},Te={fetch:we,login:function(e,t){return we({method:"POST",reqBody:{username:e,password:t},route:"/users/login"})},register:function(e,t,a,n,r,o,c,s,l){return we({method:"POST",reqBody:{username:e,password:t,email:a,fullName:n,dateOfBirth:r,phone:o,gender:c,address:s,avatar:l},route:"/users"})},verifyEmail:function(e){return we({method:"GET",route:ve+"/emailVerification?verificationCode="+e})},resetPassword:function(e){return we({method:"POST",reqBody:{username:e},route:ve+"/resetPassword"})},descViewer:function(e){return we({method:"PUT",reqBody:{id:e},route:"/product/viewer"})},verifyEmailResetPassword:function(e,t){return we({method:"POST",reqBody:{verificationCode:e,newPassword:t},route:ve+"/resetEmailVerification"})},verifyToken:function(e){return we({method:"POST",reqBody:{},jwtToken:e,route:ve+"/verifyToken"})},readAccountInfo:function(e){if(e){var t=Ee()(e).user.username;return we({method:"GET",jwtToken:e,route:"/users/one"+"/".concat(t)})}return we({method:"GET",jwtToken:e,route:"/users/one"})},updateAccountInfo:function(e,t){var a=t.dateOfBirth,n=t.address,r=t.avatar;return we({method:"POST",reqBody:{newInfo:{dateOfBirth:a,address:n,avatar:r}},jwtToken:e,route:be+"/updateInfo"})},updateAccountPassword:function(e,t,a){return we({method:"POST",reqBody:{password:t,newPassword:a},jwtToken:e,route:be+"/updatePassword"})},getAllIndustries:function(){return we({method:"GET",route:"".concat("/product/industry")})},getAllBrands:function(){return we({method:"GET",route:"".concat("/product/brand")})},getAllProducts:function(e,t,a){var n=a.industryId,r=a.branchId,o=a.categoryId,c=a.brandId,s=a.keyword,l=a.minPrice,i=a.maxPrice;return we({method:"POST",reqBody:{limit:e,offset:t,query:{industryId:n,branchId:r,categoryId:o,brandId:c,keyword:s,minPrice:l,maxPrice:i}},route:"".concat("/product/all")})},getProduct:function(e){return we({method:"POST",reqBody:{id:e},route:Ne+"/one"})},getCart:function(e){if(e){var t=Ee()(e).user.username;return we({method:"GET",jwtToken:e,route:"/cart"+"?username=".concat(t)})}return we({method:"GET",jwtToken:e,route:"/cart"})},addItemToCart:function(e,t,a){if(!e||!t||!a)return null;if(e){var n=Ee()(e).user.username;return we({method:"POST",reqBody:{username:n,productId:t,amount:a},jwtToken:e,route:"/cart"})}return we({method:"POST",reqBody:{productId:t,amount:a},jwtToken:e,route:"/cart"})},updateItemInCart:function(e,t,a){if(e){var n=Ee()(e).user.username;return we({method:"PUT",reqBody:{username:n,productId:t,amount:a},jwtToken:e,route:"/cart"})}return null},deleteItemFromCart:function(e,t){if(e){var a=Ee()(e).user.username;return console.log(a,t),we({method:"DELETE",reqBody:{productId:t,username:a},jwtToken:e,route:"/cart"})}return null},toCheckout:function(e,t,a,n,r,o,c,s,l,i,d){if(e){console.log(t,a,n,r,o,c,s,l,i,d);var u=Ee()(e).user.username;return we({method:"POST",reqBody:{username:u,couponCode:t,fullName:a,phone:n,email:r,address:o,note:c,total:s,finalTotal:l,products:i,shippingMethod:d},jwtToken:e,route:"/checkout/checkout"})}return null},getAllOrders:function(e,t,a,n){return e?we({method:"POST",reqBody:{limit:t,offset:a,query:n},jwtToken:e,route:"/checkout/order"}):null},getOneOrder:function(e,t){return we({method:"POST",reqBody:{orderId:t},jwtToken:e,route:"/checkout/order/orderdetail"})},getCouponStatus:function(e){return we({method:"POST",reqBody:{coupon:e},jwtToken:localStorage.getItem("authToken"),route:"/checkout/couponStatus"})},getZPTokenFromOrder:function(e,t){return we({method:"POST",reqBody:{orderId:t},jwtToken:e,route:ye+"/checkorder"})},adminGetAllAccounts:function(e,t,a,n){var r=n.keyword;return e?we({method:"POST",reqBody:{limit:a,offset:t,query:{keyword:r}},jwtToken:e,route:"/users/admin"}):null},adminCreateAccount:function(e,t){var a=t.username,n=t.password,r=t.email,o=t.fullName,c=t.dateOfBirth,s=t.phone,l=t.gender,i=t.address,d=t.avatar,u=t.permission;return we({method:"POST",reqBody:{username:a,password:n,email:r,fullName:o,dateOfBirth:c,phone:s,gender:l,address:i,avatar:d,permission:u},jwtToken:e,route:"/users/admin/add"})},adminUpdateAccount:function(e,t,a){var n=a.username,r=a.password,o=a.email,c=a.fullName,s=a.dateOfBirth,l=a.phone,i=a.gender,d=a.address,u=a.avatar,m=a.permission,p=a.active;return e?we({method:"PUT",reqBody:{id:t,username:n,password:r,email:o,fullName:c,dateOfBirth:s,phone:l,gender:i,address:d,avatar:u,permission:m,active:p},jwtToken:e,route:"/users/admin"}):null},adminGetAllProducts:function(e,t,a,n){var r=n.keyword;return e?we({method:"POST",reqBody:{limit:t,offset:a,query:{keyword:r}},jwtToken:e,route:"/product/admin"}):null},adminInsertProduct:function(e,t){var a=t.product_name,n=t.industry_id,r=t.branch_id,o=t.category_id,c=t.brand_id,s=t.price,l=t.images,i=t.description,d=t.amount;return we({method:"POST",reqBody:{product_name:a,industry_id:n,branch_id:r,category_id:o,brand_id:c,price:s,images:l,description:i,amount:d},jwtToken:e,route:"/product/admin/add"})},adminUpdateProduct:function(e,t,a){var n=a.product_name,r=a.industry_id,o=a.branch_id,c=a.category_id,s=a.brand_id,l=a.price,i=a.images,d=a.description,u=a.longDescription,m=a.amount,p=a.stock,g=a.active,f=a.last_updated,h=a.updated_by;return console.log("stock: ",p),e?we({method:"PUT",reqBody:{id:t,product_name:n,industry_id:r,branch_id:o,category_id:c,brand_id:s,price:l,images:i,description:d,longDescription:u,amount:m,stock:p,active:g,last_updated:f,updated_by:h},jwtToken:e,route:"/product/admin"}):null},adminGetAllBrands:function(e,t,a,n){return e?we({method:"POST",reqBody:{limit:t,offset:a,query:Object(i.a)({},n)},jwtToken:e,route:"/product/admin/brand"}):null},adminGetAllBrandsBrand:function(e,t,a,n){return e?we({method:"POST",reqBody:{limit:t,offset:a,query:Object(i.a)({},n)},jwtToken:e,route:"/product/admin/brand/brand"}):null},adminInsertBrand:function(e,t){var a=t.brand_name;return e?we({method:"POST",reqBody:{brand_name:a},jwtToken:e,route:"/product/admin/brand/add"}):null},adminUpdateBrand:function(e,t,a){var n=a.brand_name,r=a.active;return e?we({method:"PUT",reqBody:{id:t,brand_name:n,active:r},jwtToken:e,route:"/product/admin/brand"}):null},getAllLocation:function(){return we({method:"GET",reqBody:{},route:"/location"})},getAddress:function(e,t,a){return we({method:"GET",reqBody:{app_id:e,app_code:t,query:a,maxresults:1},params:{app_id:e,app_code:t,query:a,maxresults:1},route:"https://autocomplete.geocoder.api.here.com/6.2/suggest.json"})},adminGetAllIndustries:function(e,t,a,n){var r=n.keyword;return we({method:"POST",reqBody:{limit:t,offset:a,query:{keyword:r}},jwtToken:e,route:"/product/admin/industry"})},adminInsertIndustry:function(e,t){var a=t.industryName;return we({method:"POST",reqBody:{industryName:a},jwtToken:e,route:Ie+"/industry/insert"})},adminUpdateIndustry:function(e,t,a){var n=a.industryName,r=a.active;return we({method:"POST",reqBody:{id:t,industryName:n,active:r},jwtToken:e,route:Ie+"/industry/update"})},adminGetAllBranches:function(e,t,a,n){var r=n.keyword;return e?we({method:"POST",reqBody:{limit:t,offset:a,query:{keyword:r}},jwtToken:e,route:"/product/admin/branch"}):null},adminInsertBranch:function(e,t){var a=t.branchName,n=t.industryId;return we({method:"POST",reqBody:{branchName:a,industryId:n},jwtToken:e,route:Ie+"/branch/insert"})},adminUpdateBranch:function(e,t,a){var n=a.branchName,r=a.industryId,o=a.active;return we({method:"POST",reqBody:{id:t,branchName:n,industryId:r,active:o},jwtToken:e,route:Ie+"/branch/update"})},adminGetAllCategories:function(e,t,a,n){var r=n.keyword;return we({method:"POST",reqBody:{limit:t,offset:a,query:{keyword:r}},jwtToken:e,route:"/product/admin/category"})},adminInsertCategory:function(e,t){var a=t.categoryName,n=t.industryId,r=t.branchId;return we({method:"POST",reqBody:{categoryName:a,industryId:n,branchId:r},jwtToken:e,route:Ie+"/category/insert"})},adminUpdateCategory:function(e,t,a){var n=a.categoryName,r=a.branchId,o=a.industryId,c=a.active;return we({method:"POST",reqBody:{id:t,categoryName:n,industryId:o,branchId:r,active:c},jwtToken:e,route:Ie+"/category/update"})},adminGetAllCampaigns:function(e,t,a,n){var r=n.keyword,o=n.startTime,c=n.expiredTime;return we({method:"GET",reqBody:{limit:t,offset:a,query:{keyword:r,startTime:o,expiredTime:c}},jwtToken:e,route:Ie+"/campaign/all"})},adminInsertCampaign:function(e,t){var a=t.campaignName,n=t.description,r=t.startTime,o=t.expiredTime;return we({method:"POST",reqBody:{campaignName:a,description:n,startTime:r,expiredTime:o},jwtToken:e,route:Ie+"/campaign/insert"})},adminUpdateCampaign:function(e,t,a){var n=a.campaignName,r=a.description,o=a.startTime,c=a.expiredTime,s=a.active;return we({method:"POST",reqBody:{id:t,campaignName:n,description:r,startTime:o,expiredTime:c,active:s},jwtToken:e,route:Ie+"/campaign/update"})},adminGetAllCoupons:function(e,t,a,n){var r=n.startTime,o=n.expiredTime;return we({method:"GET",reqBody:{limit:t,offset:a,query:{startTime:r,expiredTime:o}},jwtToken:e,route:Ie+"/coupon/all"})},adminInsertCoupon:function(e,t,a){var n=a.campaignId,r=a.couponCode,o=a.percent,c=a.money,s=a.threshold,l=a.allProduct,i=a.amount;return we({method:"POST",reqBody:{campaignId:n,couponCode:r,percent:o,money:c,threshold:s,allProduct:l,amount:i,productsId:t},jwtToken:e,route:Ie+"/coupon/insert"})},adminUpdateCoupon:function(e,t,a){var n=a.campaignId,r=a.couponCode,o=a.percent,c=a.money,s=a.threshold,l=a.allProduct,i=a.amount,d=a.active;return we({method:"POST",reqBody:{campaignId:n,couponCode:r,percent:o,money:c,threshold:s,allProduct:l,amount:i,active:d,productsId:t},jwtToken:e,route:Ie+"/coupon/update"})},adminGetAllDiscounts:function(e,t,a,n){var r=n.startTime,o=n.expiredTime;return we({method:"GET",reqBody:{limit:t,offset:a,query:{startTime:r,expiredTime:o}},jwtToken:e,route:Ie+"/discount/all"})},adminInsertdiscount:function(e,t,a){var n=a.percent,r=a.startTime,o=a.expiredTime;return we({method:"POST",reqBody:{percent:n,startTime:r,expiredTime:o,productsId:t},jwtToken:e,route:Ie+"/discount/insert"})},adminUpdatediscount:function(e,t,a){var n=a.percent,r=a.startTime,o=a.expiredTime,c=a.active;return we({method:"POST",reqBody:{percent:n,startTime:r,expiredTime:o,active:c,productsId:t},jwtToken:e,route:Ie+"/discount/update"})},adminGetAllOrders:function(e,t,a,n){var r=n.startTime,o=n.expiredTime;return we({method:"POST",reqBody:{limit:t,offset:a,query:{startTime:r,expiredTime:o}},jwtToken:e,route:"/checkout/admin/order"})},adminGetOrder:function(e,t){return we({method:"GET",reqBody:{orderId:t},jwtToken:e,route:Ie+"/order/one"})},admimChangeOrderStatus:function(e,t,a){return e?we({method:"PUT",reqBody:{orderId:t,status:a},jwtToken:e,route:"/checkout/admin/order"}):null},getZalopayOrderStatus:function(e,t){return we({method:"POST",reqBody:{orderId:t},jwtToken:e,route:Se+"/order"})},updateUserLocation:function(e,t){return we({method:"PUT",reqBody:{username:t,location:e},route:"/location/user"})},getAccountsLocation:function(){return we({method:"GET",reqBody:{},route:"/location/user"})},updateLocation:function(e,t,a){return we({method:"PUT",reqBody:{id:a,location:e,distance:t},route:"/location"})},changeUserConnect:function(e){return we({method:"PUT",reqBody:{option:e},route:"/users/connect"})}},Ce=a(150),Oe=a.n(Ce),Pe=new(function(){function e(){Object(ce.a)(this,e),this.storage=window.localStorage,this.form_key="search_form",this.token_key="token",this.userCount="userOnSite"}return Object(se.a)(e,[{key:"getSearchData",value:function(){var e=this.storage.getItem(this.form_key)||!1;return e?JSON.parse(e):null}},{key:"setSearchData",value:function(e){e&&this.storage.setItem(this.form_key,JSON.stringify(e))}},{key:"removeSearchData",value:function(){this.storage.removeItem(this.form_key)}},{key:"getToken",value:function(){return this.storage.getItem(this.token_key)||!1}},{key:"setToken",value:function(e){e&&this.storage.setItem(this.token_key,e)}},{key:"getUserCount",value:function(){return this.storage.getItem(this.userCount)||!1}},{key:"setUserCount",value:function(){this.storage.setItem(this.userCount,1)}},{key:"setCloseUser",value:function(){this.storage.setItem(this.userCount,2)}},{key:"removeToken",value:function(){this.storage.removeItem(this.token_key)}},{key:"removeUserCount",value:function(){this.storage.removeItem(this.userCount)}}]),e}()),Ae=function(){function e(){Object(ce.a)(this,e)}return Object(se.a)(e,null,[{key:"putFormData",value:function(e,t){var a={headers:{"Content-Type":"multipart/form-data;boundary=gc0p4Jq0M2Yt08jU534c0p",Authorization:"Bearer ".concat(Pe.getToken())},timeout:1e4};return Oe.a.put("".concat(e),t,a).then(function(e){return e.data}).catch(function(e){throw e})}},{key:"get",value:function(e){var t={headers:{"Content-Type":"application/json","x-access-token":localStorage.getItem("authToken")},timeout:1e4};return Oe.a.get("".concat(e),t).then(function(e){return e.data?e.data:e}).catch(function(e){throw e})}},{key:"postToken",value:function(e,t,a){return Oe.a.post("".concat(e),t,a).then(function(e){return e.data}).catch(function(e){throw e})}},{key:"getFreshToken",value:function(e){var t={headers:{"Content-Type":"application/json","x-refresh-token":localStorage.getItem("refreshToken")}};return Oe.a.get("".concat(e),t).then(function(e){return e.data?e.data:e}).catch(function(e){throw e})}}]),e}(),ke=function(){function e(){Object(ce.a)(this,e)}return Object(se.a)(e,null,[{key:"postVerifyToken",value:function(){var e=Ee()(localStorage.getItem("authToken")).user;return Ae.get("".concat("http://localhost:5000","/users/one/").concat(e.username))}},{key:"postVerifyRefreshToken",value:function(){return Ae.getFreshToken("".concat("http://localhost:5000","/auth/access"))}}]),e}(),Ue={verifyToken:function(e){if(!localStorage.getItem("authToken"))return localStorage.getItem("refreshToken")?void ke.postVerifyRefreshToken().then(function(e){localStorage.setItem(e.access_token)}).catch(function(e){throw localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),e}):(localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),void e(!1));try{ke.postVerifyToken().then(function(t){e(!0)}).catch(function(t){throw localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),e(!1),t})}catch(t){throw localStorage.removeItem("authToken"),e(!1),t}},verifyTokenAdmin:function(){if(!localStorage.getItem("authToken"))return localStorage.getItem("refreshToken")?(ke.postVerifyRefreshToken().then(function(e){Ee()(e.access_token).user.permission;return localStorage.setItem(e.access_token),console.log(Ee()(e.access_token)),q.ADMIN,!0}).catch(function(e){return localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),!1}),!0):(localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),!1);try{return ke.postVerifyToken().then(function(e){return e.permission===q.ADMIN}).catch(function(e){return localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken"),!1}),!0}catch(e){return localStorage.removeItem("authToken"),!1}},login:function(e,t){return new Promise(function(a,n){Te.login(e,t).then(function(e){var t=JSON.parse(e);!0===t.auth&&t.authToken&&t.refreshToken&&(localStorage.setItem("authToken",t.authToken),localStorage.setItem("refreshToken",t.refreshToken),a(!0)),a(!1)}).catch(function(e){console.log("ERR AuthSerivce: "+e)})})},logout:function(){localStorage.removeItem("authToken"),localStorage.removeItem("refreshToken")},isLoggedIn:function(){var e=localStorage.getItem("authToken");return new Promise(function(t,a){if(e){var n=Ee()(e).user;t(n?{tokenIsValid:!0,username:n.username,permission:n.permission,emailIsVerified:!0}:{tokenIsValid:!1})}else t({tokenIsValid:!1})})},saveToken:function(e){console.log(e),localStorage.setItem("authToken",e)},saveRefreshToken:function(e){console.log(e),localStorage.setItem("refreshToken",e)},getToken:function(){var e=localStorage.getItem("authToken");return new Promise(function(t,a){Te.readAccountInfo(e).then(function(a){"TRUE"===JSON.parse(a).status.status?t(e):t(null)})})},getTokenUnsafe:function(){return localStorage.getItem("authToken")}},Re=a(983),je=(a(665),function(){return r.a.createElement("div",{className:"d-flex justify-content-center align-items-center p-5"},r.a.createElement("div",{className:"loader"}))}),De={tokenVerificationCompleted:!1,isLoggedIn:!1,permission:null,username:null},_e=function(e){function t(e){var a,n=this;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).componentDidMount=function(){Ue.isLoggedIn().then(function(e){var t={tokenVerificationCompleted:!0};e.tokenIsValid&&(t.isLoggedIn=!0,t.username=e.username,t.permission=e.permission),t.isVerified=e.emailIsVerified,a.setState(t)}),window.scrollTo(0,0)},a.render=function(){var e=a.state,t=e.tokenVerificationCompleted,o=e.permission,c=a.props.requiredPermission;return t?c===q.PUBLIC||o===q.ADMIN||c===o?r.a.createElement(n.props.component,Object.assign({},a.props,a.state)):r.a.createElement("div",{className:"d-flex justify-content-center align-items-center p5"},"You don't have permission to access this page"):r.a.createElement(je,null)},a.state=De,a}return Object(de.a)(t,e),t}(n.Component),Be=function(e){return r.a.createElement(Re.a,{exact:e.exact,path:e.path,render:function(t){return r.a.createElement(_e,Object.assign({requiredPermission:e.permission,component:e.component,routes:e.routes},t))}})},Me={toggleCart:function(e){return{type:d,payload:e}},changePageInfo:function(e){return{type:u,payload:e}},updateCartProduct:function(e){return null===e&&(e=[]),{type:m,payload:e}},updateAuthStatus:function(e){return{type:p,payload:e}},refreshCart:function(e){return{type:g,payload:e}}},Le={fetchIndustries:function(e){return{type:E,payload:e}},switchIndustryHover:function(e){return{type:v,payload:e}},showNotification:function(e){var t=e.message,a=e.type;return{type:b,payload:{message:t,type:a}}}},xe=a(17),Fe=a.n(xe),He=a(42),qe=a(99),Ge=a.n(qe),ze=a(45),Je=a(984),Ve=a(990),We=(a(674),{openDropdownMenu:!1,openMegaMenu:!1,openMenuMobile:!1,openCatalogDetail:!1,activeMenuitemIndex:0,redirectTo:null}),Ke={emailNotification:"Please verify your email for better experience at TIDI",emailNotificationSuccess:"Your email is verified!",emailNotificationFailure:"Verification code is invalid, please try again later"},Ye=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).componentDidMount=Object(He.a)(Fe.a.mark(function e(){var t,n,r,o,c,s;return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=a.props,n=t.changeLoginStatus,r=t.history,o=t.toggleNotification,c=new URLSearchParams(r.location.search),s=c.get("email"),a.fetchIndustries(),Ue.isLoggedIn().then(function(e){e.tokenIsValid&&(n(e.tokenIsValid),e.emailIsVerified!==H.FALSE||s||o(Ke.emailNotification,"alert-warning"))}),s&&Te.verifyEmail(s).then(function(e){JSON.parse(e).status===H.TRUE?o(Ke.emailNotificationSuccess,"alert-success"):o(Ke.emailNotificationFailure,"alert-danger")});case 6:case"end":return e.stop()}},e)})),a.componentWillReceiveProps=function(e,t){e.emailIsVerified!==t.emailIsVerified&&e.emailIsVerified===H.TRUE&&a.props.toggleNotification("","")},a.fetchIndustries=function(){Te.getAllIndustries().then(function(e){var t=JSON.parse(e).industry;a.props.fetchIndustries(t),a.props.changeIndustryHover(t[0])})},a.toggleMenuMobile=function(e){a.setState({openMenuMobile:void 0!==e?e:!a.state.openMenuMobile})},a.handleLogout=function(){Ue.logout(),a.props.changeLoginStatus(!1),a.setState({redirectTo:r.a.createElement(pe.a,{to:tn.LOGIN})})},a.handleHoverMenuItem=function(e){a.props.changeIndustryHover(e)},a.generateCatalog=function(){return function(e){var t=[];return e&&e.forEach(function(e,a){t.push(r.a.createElement("div",{key:a,className:"branch-container"},r.a.createElement("h6",null,r.a.createElement(Je.a,{className:"btn-link",to:"".concat(tn.PRODUCTS,"?").concat(F.branchId,"=").concat(e.id)},e.branch_name)),r.a.createElement("div",null,function(e){var t=[];return e&&e.forEach(function(e,a){t.push(r.a.createElement(Je.a,{className:"category-item",key:a,to:"/products?cat=".concat(e.id)},e.category_name))}),t}(e.categories))))}),t}(a.props.currentIndustry.branches)},a.generateMenuItems=function(){var e=[],t=a.props.industries;return t&&Ge.a.map(t,function(t,n){e.push(r.a.createElement(Je.a,{key:n,to:tn.PRODUCTS+"?".concat(F.industryId,"=").concat(t.id),className:"dropdown-item"+(a.state.activeMenuitemIndex===n?" menuitem-active":""),onMouseEnter:function(){a.setState({activeMenuitemIndex:n}),a.handleHoverMenuItem(t)}},t.industry_name))}),e},a.render=function(){var e=a.props,t=e.history,n=e.nCartItems,o=e.isLoggedIn,c=e.username,s=e.notificationMessage,l=e.notificationType,i=a.state,d=i.redirectTo,u=i.openMenuMobile;return r.a.createElement("header",{className:"header_area"},d,r.a.createElement("div",{className:"classy-nav-container breakpoint-off d-flex align-items-center justify-content-between"},r.a.createElement("nav",{className:"classy-navbar",id:"essenceNav"},r.a.createElement(Je.a,{className:"nav-brand",to:tn.HOME},r.a.createElement("img",{src:"/img/core-img/logo.png",alt:"TIDI"})),r.a.createElement("div",{className:"classy-navbar-toggler",onClick:function(){a.toggleMenuMobile()}},r.a.createElement("span",{className:"navbarToggler"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{className:"classy-menu "+(u?"menu-on":"")},r.a.createElement("div",{className:"classycloseIcon",onClick:function(){a.toggleMenuMobile()}},r.a.createElement("div",{className:"cross-wrap"},r.a.createElement("span",{className:"top"}),r.a.createElement("span",{className:"bottom"}))),r.a.createElement("div",{className:"classynav"},r.a.createElement("ul",null,r.a.createElement("li",{id:"menuitem-catalog"},r.a.createElement(Je.a,{to:tn.PRODUCTS},"Catalog"),r.a.createElement("div",{className:"catalog-container dropdown d-flex"},r.a.createElement("div",{className:"menuitem-container"},a.generateMenuItems()),r.a.createElement("div",{className:"catalog-detail"},a.generateCatalog()))),r.a.createElement("li",null,r.a.createElement(Je.a,{to:{pathname:tn.ADMIN.HOME,search:""}},"Admin")),r.a.createElement("li",null,r.a.createElement(Je.a,{to:{pathname:tn.ORDERS,search:""}},"Orders")))))),r.a.createElement("div",{className:"header-meta d-flex clearfix justify-content-end"},r.a.createElement("div",{className:"search-area"},r.a.createElement(ze.b,{initialValues:{keyword:""},onSubmit:function(e,a){setTimeout(function(){t.push(tn.PRODUCTS+"?".concat(F.keyword,"=").concat(e.keyword)),a.setSubmitting(!1)},600)},render:function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("input",{type:"search",value:e.values.keyword,onChange:e.handleChange,name:"keyword",placeholder:"Type for search"}),r.a.createElement("button",{type:"submit"},r.a.createElement("i",{className:"fa fa-search","aria-hidden":"true"})))}})),r.a.createElement("div",{className:"cart-area"},r.a.createElement("div",{id:"essenceCartBtn",onClick:function(){a.props.toggleCart(!0)}},r.a.createElement("img",{src:"/img/core-img/bag.svg",alt:""})," ",r.a.createElement("span",null,n))),o?r.a.createElement("div",{className:"favourite-area"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"/img/core-img/message.svg",alt:""}))):null,r.a.createElement("div",{className:"user-login-info d-flex justify-content-center align-items-center"},o?r.a.createElement("div",{className:"favourite-area"},r.a.createElement("a",{href:"/",className:"dropdown dropdown-toggle loggedin-btn","data-toggle":"dropdown"},r.a.createElement("img",{src:"/img/core-img/user.svg",alt:""})),r.a.createElement("div",{className:"dropdown-menu"},r.a.createElement("span",{className:"d-flex justify-content-center"},"Hello, ",c),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement(Je.a,{to:tn.ORDERS,className:"dropdown-item text-center"},"My Orders"),r.a.createElement("button",{className:"dropdown-item text-center"},"Settings"),r.a.createElement("button",{className:"dropdown-item text-center"},"Help"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("button",{className:"dropdown-item text-center",onClick:function(){return a.handleLogout()}},"Log out"))):r.a.createElement("div",{className:"user-login-button d-flex"},r.a.createElement(Je.a,{to:tn.LOGIN,className:"btn btn-outline-secondary text-center"},"Login"),r.a.createElement(Je.a,{to:tn.REGISTER,className:"btn btn-outline-secondary"},"Register"))," ",r.a.createElement(Je.a,{to:tn.MAP_DIRECTION,className:"btn btn-outline-secondary"},"To Store")))),s&&r.a.createElement("div",{className:"alert alert-dismissible fade show "+l,role:"alert"},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")),s))},a.state=We,a}return Object(de.a)(t,e),t}(n.Component),Ze=Object(Ve.a)(Ye),Qe=Object(l.b)(function(e){return Object(i.a)({},e.layout.Header,e.common.AuthenticationStatus,{nCartItems:e.common.Cart.products.length>0?e.common.Cart.products.reduce(function(e,t){return e+t.amount},0):0})},function(e){return{toggleCart:function(t){e(Me.toggleCart(t))},toggleDropdownMenu:function(t){e(Le.openDropdownMenu(t))},toggleMegaMenu:function(t){e(Le.openMegaMenu(t))},toggleMenuMobile:function(){e(Le.openMenuMobile())},fetchIndustries:function(t){e(Le.fetchIndustries(t))},changeIndustryHover:function(t){e(Le.switchIndustryHover(t))},changeLoginStatus:function(t){e(Me.updateAuthStatus({isLoggedIn:t}))},toggleNotification:function(t,a){e(Le.showNotification({message:t,type:a}))}}})(Ze),$e=(a(676),function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement("footer",{className:"footer_area clearfix"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"single_widget_area d-flex mb-30"},r.a.createElement("div",{className:"footer-logo mr-50"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"/img/core-img/logo.png",alt:""}))),r.a.createElement("div",{className:"footer_menu"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"shop.html"},"Shop")),r.a.createElement("li",null,r.a.createElement("a",{href:"blog.html"},"Blog")),r.a.createElement("li",null,r.a.createElement("a",{href:"contact.html"},"Contact")))))),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"single_widget_area mb-30"},r.a.createElement("ul",{className:"footer_widget_menu"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Order Status")),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Payment Options")),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Shipping and Delivery")),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Guides")),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Privacy Policy")),r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"Terms of Use")))))),r.a.createElement("div",{className:"row align-items-end"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"single_widget_area"},r.a.createElement("div",{className:"footer_heading mb-30"},r.a.createElement("h6",null,"Subscribe")),r.a.createElement("div",{className:"subscribtion_form"},r.a.createElement("form",{action:"#",method:"post"},r.a.createElement("input",{type:"email",name:"mail",className:"mail",placeholder:"Your email here"}),r.a.createElement("button",{type:"submit",className:"submit"},r.a.createElement("i",{className:"fa fa-long-arrow-right","aria-hidden":"true"})))))),r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"single_widget_area"},r.a.createElement("div",{className:"footer_social_area"},r.a.createElement("a",{href:"https://www.fb.com/DangQuang.IT.HCMUS","data-toggle":"tooltip","data-placement":"top",title:"Facebook"},r.a.createElement("i",{className:"fa fa-facebook","aria-hidden":"true"}),r.a.createElement("span",{style:{display:"none"}},"f")),r.a.createElement("a",{href:"/","data-toggle":"tooltip","data-placement":"top",title:"Instagram"},r.a.createElement("i",{className:"fa fa-instagram","aria-hidden":"true"}),r.a.createElement("span",{style:{display:"none"}},"i")),r.a.createElement("a",{href:"/","data-toggle":"tooltip","data-placement":"top",title:"Twitter"},r.a.createElement("i",{className:"fa fa-twitter","aria-hidden":"true"}),r.a.createElement("span",{style:{display:"none"}},"t")),r.a.createElement("a",{href:"/","data-toggle":"tooltip","data-placement":"top",title:"Pinterest"},r.a.createElement("i",{className:"fa fa-pinterest","aria-hidden":"true"}),r.a.createElement("span",{style:{display:"none"}},"p")),r.a.createElement("a",{href:"/","data-toggle":"tooltip","data-placement":"top",title:"Youtube"},r.a.createElement("i",{className:"fa fa-youtube-play","aria-hidden":"true"}),r.a.createElement("span",{style:{display:"none"}},"y")))))),r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("p",null)))))},a}return Object(de.a)(t,e),t}(n.Component)),Xe=Object(l.b)(function(e){return e.layout.Footer})($e),et=(a(678),a(55)),tt=a(985),at={redirectTo:null,message:"",lat:0,lng:0},nt=et.object().shape({username:et.string().max(20,"T\xean \u0111\u0103ng nh\u1eadp ch\u1ee9a 1-20 k\xfd t\u1ef1").required("Kh\xf4ng b\u1ecf qua tr\u01b0\u1eddng n\xe0y!"),password:et.string().max(20,"M\u1eadt kh\u1ea9u qu\xe1 d\xe0i").required("Kh\xf4ng b\u1ecf qua tr\u01b0\u1eddng n\xe0y!")}),rt=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).getCurrentLocation=function(e){navigator.geolocation.getCurrentPosition(function(){var t=Object(He.a)(Fe.a.mark(function t(a){var n,r,o;return Fe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.coords.latitude,r=a.coords.longitude,o={lat:n,lng:r},t.next=5,Te.updateUserLocation(JSON.stringify(o),e);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),function(){alert("Geocoder failed")})},a.state=at,a}return Object(de.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this,t={color:"red",marginLeft:"20px"};return r.a.createElement("div",{className:"limiter"},this.state.redirectTo,r.a.createElement("div",{className:"container-login100"},r.a.createElement("div",{className:"wrap-login100"},r.a.createElement("div",{className:"login100-pic js-tilt","data-tilt":!0},r.a.createElement("img",{src:"/img/img-01.png",alt:"IMG"})),r.a.createElement(ze.b,{initialValues:{username:"",password:""},validationSchema:nt,onSubmit:function(t,a){var n=t.username,o=t.password;setTimeout(function(){Ue.login(n,o).then(function(t){console.log(t),!0===t?(e.getCurrentLocation(n),e.props.changeLoginStatus(!0),e.setState({redirectTo:r.a.createElement(pe.a,{to:tn.HOME})})):e.setState({message:"Username or password is incorrect"})}),a.setSubmitting(!1)},1e3)},render:function(a){return r.a.createElement("form",{onSubmit:a.handleSubmit,className:"login100-form validate-form"},r.a.createElement("span",{className:"login100-form-title"},"Member Login"),r.a.createElement("div",{className:"wrap-input100 validate-input"},r.a.createElement(tt.a,{className:"input100",type:"text",name:"username",placeholder:"Username",onChange:a.handleChange}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-envelope","aria-hidden":"true"}))," ",r.a.createElement(ze.a,{name:"username"},function(e){return r.a.createElement("div",{style:t,className:"errormess"},e)})),r.a.createElement("div",{className:"wrap-input100 validate-input"},r.a.createElement("input",{className:"input100",type:"password",name:"password",placeholder:"Password",onChange:a.handleChange}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))," ",r.a.createElement(ze.a,{name:"password"},function(e){return r.a.createElement("div",{style:t,className:"errormess"},e)})),r.a.createElement("div",{className:"d-flex justify-content-center",style:{color:"red",height:20,margin:0}}," "+e.state.message),r.a.createElement("div",{className:"container-login100-form-btn"},r.a.createElement("button",{type:"submit",className:"login100-form-btn"},"Login")),r.a.createElement("div",{className:"text-center p-t-12"},r.a.createElement("span",{className:"txt1"},"Forgot "),r.a.createElement(Je.a,{to:tn.RESET_PASSWORD,className:"txt2"},"Username / Password?")),r.a.createElement("div",{className:"text-center p-t-136"},r.a.createElement(Je.a,{to:tn.REGISTER,className:"txt2"},"Create your Account",r.a.createElement("i",{className:"fa fa-long-arrow-right m-l-5","aria-hidden":"true"}))))}}))))}}]),t}(n.Component),ot=a(987),ct=a(986),st=a(189),lt=a.n(st),it=et.object().shape({username:et.string().max(20,"T\xean \u0111\u0103ng nh\u1eadp ch\u1ee9a 1-20 k\xfd t\u1ef1").required("Kh\xf4ng b\u1ecf qua tr\u01b0\u1eddng n\xe0y!"),password:et.string().max(20,"M\u1eadt kh\u1ea9u qu\xe1 d\xe0i").required("Kh\xf4ng b\u1ecf qua tr\u01b0\u1eddng n\xe0y!"),passwordConf:et.string().required("Kh\xf4ng b\u1ecf qua tr\u01b0\u1eddng n\xe0y!"),name:et.string().required("Kh\xf4ng b\u1ecf qua tr\u01b0\u1eddng n\xe0y"),dob:et.string().required("Kh\xf4ng b\u1ecf qua tr\u01b0\u1eddng n\xe0y"),email:et.string().email("\u0110\u1ecba ch\u1ec9 mail kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng. d\u1ea1ng \u0111\xfang l\xe0 id@domain.com").required("Kh\xf4ng b\u1ecf qua tr\u01b0\u1eddng n\xe0y")}),dt=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).state={redirectTo:null,message:""},a}return Object(de.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this,t={color:"red",marginLeft:"20px"};return console.log(this.props.authActions),r.a.createElement("div",{className:"limiter"},this.state.redirectTo,r.a.createElement("div",{className:"container-login100"},r.a.createElement("div",{className:"wrap-login100"},r.a.createElement("div",{className:"login100-pic js-tilt","data-tilt":!0},r.a.createElement("img",{src:"/img/img-01.png",alt:"IMG"}))," ",r.a.createElement(ze.b,{initialValues:{username:"",password:"",passwordConf:"",name:"",email:"",phone:null,dob:"",gender:null,address:"",avatar:""},validationSchema:it,onSubmit:function(t,a){var n=t.username,o=t.password,c=t.email,s=t.name,l=t.dob,i=t.phone,d=t.gender,u=t.address,m=t.avatar;setTimeout(function(){Te.register(n,o,c,s,lt()(l).format(x).toString(),i,d,u,m).then(function(t){var a=JSON.parse(t);console.log(a),"TRUE"===a.status?(Ue.saveToken(a.token),Ue.saveRefreshToken(a.refreshToken),console.log("da luu 2 token"),e.setState({redirectTo:r.a.createElement(pe.a,{to:tn.HOME})})):e.setState({message:a.msg})}),a.setSubmitting(!1)},1e3)},render:function(a){return r.a.createElement("form",{className:"login100-form",onSubmit:a.handleSubmit},""!==e.state.message&&r.a.createElement(ot.a,{color:"danger"},e.state.message),r.a.createElement(ct.a,{className:"login100-form-title"},"Member Registration"),r.a.createElement("div",{className:"wrap-input100 validate-input"},r.a.createElement(tt.a,{className:"input100",type:"text",name:"username",placeholder:"Username",onChange:a.handleChange,onBlur:a.handleBlur}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-user","aria-hidden":"true"}))," ",r.a.createElement(ze.a,{name:"username"},function(e){return r.a.createElement("div",{style:t,className:"errormess"},e)})),r.a.createElement("div",{className:"wrap-input100 validate-input"},r.a.createElement(tt.a,{className:"input100",type:"password",name:"password",placeholder:"Password",onChange:a.handleChange,onBlur:a.handleBlur}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-lock","aria-hidden":"true"})),r.a.createElement(ze.a,{name:"password"},function(e){return r.a.createElement("div",{style:t,className:"errormess"},e)})),r.a.createElement("div",{className:"wrap-input100 validate-input"},r.a.createElement(tt.a,{className:"input100",type:"password",name:"passwordConf",placeholder:"Confirm Password",onChange:a.handleChange,onBlur:a.handleBlur}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-lock","aria-hidden":"true"})),r.a.createElement(ze.a,{name:"passwordConf"},function(e){return r.a.createElement("div",{style:t,className:"errormess"},e)}),a.values.password!==a.values.passwordConf&&r.a.createElement("div",{style:t,className:"errormess"},"M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng \u0111\xfang")),r.a.createElement("div",{className:"wrap-input100 validate-input","data-validate":"Valid email is required: ex@abc.xyz"},r.a.createElement(tt.a,{className:"input100",type:"email",name:"email",placeholder:"Email address",onChange:a.handleChange,onBlur:a.handleBlur}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-envelope","aria-hidden":"true"})),r.a.createElement(ze.a,{name:"email"},function(e){return r.a.createElement("div",{style:t,className:"errormess"},e)})),r.a.createElement("div",{className:"wrap-input100 validate-input","data-validate":"Password is required"},r.a.createElement(tt.a,{className:"input100",type:"text",name:"name",placeholder:"Full Name",onChange:a.handleChange,onBlur:a.handleBlur}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-address-card","aria-hidden":"true"})),r.a.createElement(ze.a,{name:"name"},function(e){return r.a.createElement("div",{style:t,className:"errormess"},e)})),r.a.createElement("div",{className:"wrap-input100 validate-input","data-validate":"Password is required"},r.a.createElement(tt.a,{className:"input100",type:"date",name:"dob",placeholder:"Date of Birth",onChange:a.handleChange,onBlur:a.handleBlur}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-address-card","aria-hidden":"true"})),r.a.createElement(ze.a,{name:"dob"},function(e){return r.a.createElement("div",{style:t,className:"errormess"},e)})),r.a.createElement("div",{className:"container-login100-form-btn"},r.a.createElement("button",{disabled:a.values.password!==a.values.passwordConf,type:"submit",className:"login100-form-btn"},"Register")),r.a.createElement("div",{className:"text-center p-t-12"},r.a.createElement("span",{className:"txt1"},"Forgot "),r.a.createElement(Je.a,{to:tn.RESET_PASSWORD,className:"txt2"},"Username / Password?")),r.a.createElement("div",{className:"text-center p-t-136"},r.a.createElement("span",{className:"txt1"},"Already have an account? "),r.a.createElement(Je.a,{to:tn.LOGIN,className:"txt2"},"Login",r.a.createElement("i",{className:"fa fa-long-arrow-right m-l-5","aria-hidden":"true"}))))}}))))}}]),t}(n.Component),ut={username:"",password1:"",password2:"",verificationCode:"",message:"",messageColor:"red",showNewPasswordForm:!1},mt=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).state=ut,a}return Object(de.a)(t,e),Object(se.a)(t,[{key:"handleEmailChange",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword1Change",value:function(e){this.setState({password1:e.target.value})}},{key:"handlePassword2Change",value:function(e){this.setState({password2:e.target.value})}},{key:"handleVerificationCodeChange",value:function(e){this.setState({verificationCode:e.target.value})}},{key:"handleReset",value:function(e){var t=this;e.preventDefault(),this.state.username.length&&Te.resetPassword(this.state.username).then(function(e){JSON.parse(e).status===H.TRUE?t.setState({message:"Reset code has been sent to your email.",messageColor:"green",showNewPasswordForm:!0}):t.setState({message:"Username is invalid",messageColor:"red"})})}},{key:"handleUpdateNewPassword",value:function(){var e=this;this.state.password1!==this.state.password2?this.setState({message:"Passwords mismatch!",messageColor:"red"}):this.state.verificationCode.length<=0?this.setState({message:"Please enter verification code",messageColor:"red"}):Te.verifyEmailResetPassword(this.state.verificationCode,this.state.password1).then(function(t){JSON.parse(t).status===H.TRUE?e.setState({message:"Password changed! You can now login",messageColor:"green"}):e.setState({message:"Verification code is incorrect!",messageColor:"red"})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"limiter"},r.a.createElement("div",{className:"container-login100"},r.a.createElement("div",{className:"wrap-login100"},r.a.createElement("div",{className:"login100-pic js-tilt","data-tilt":!0},r.a.createElement("img",{src:"/img/img-01.png",alt:"IMG"})),!this.state.showNewPasswordForm&&r.a.createElement("form",{className:"login100-form validate-form"},r.a.createElement("span",{className:"login100-form-title"},"Reset Password"),r.a.createElement("div",{className:"wrap-input100 validate-input"},r.a.createElement("input",{className:"input100",type:"text",placeholder:"Username",autoComplete:"off",onChange:function(t){e.handleEmailChange(t)},value:this.state.username,onKeyDown:function(t){return 13===t.keyCode&&e.handleReset(t)}}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-envelope","aria-hidden":"true"}))),r.a.createElement("div",{className:"d-flex justify-content-center",style:{height:20,margin:0,textAlign:"center",color:this.state.messageColor}}," "+this.state.message),r.a.createElement("div",{className:"container-login100-form-btn"},r.a.createElement("button",{type:"button",className:"login100-form-btn",onClick:function(t){return e.handleReset(t)}},"Reset")),r.a.createElement("div",{className:"text-center p-t-12"},r.a.createElement("span",{className:"txt1"}),r.a.createElement(Je.a,{to:tn.LOGIN,className:"txt2",href:"/"},"Login Again")),r.a.createElement("div",{className:"text-center p-t-136"},r.a.createElement(Je.a,{to:tn.REGISTER,className:"txt2"},"Create your Account",r.a.createElement("i",{className:"fa fa-long-arrow-right m-l-5","aria-hidden":"true"})))),this.state.showNewPasswordForm&&r.a.createElement("form",{className:"login100-form validate-form"},r.a.createElement("span",{className:"login100-form-title"},"Enter New Password"),r.a.createElement("div",{className:"wrap-input100 validate-input"},r.a.createElement("input",{className:"input100",type:"password",placeholder:"Password",autoComplete:"off",onChange:function(t){e.handlePassword1Change(t)},value:this.state.password1,onKeyDown:function(t){return 13===t.keyCode&&e.handlePassword1Change(t)}}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),r.a.createElement("div",{className:"wrap-input100 validate-input"},r.a.createElement("input",{className:"input100",type:"password",placeholder:"Password again",autoComplete:"off",onChange:function(t){e.handlePassword2Change(t)},value:this.state.password2,onKeyDown:function(t){return 13===t.keyCode&&e.handlePassword2Change(t)}}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-lock","aria-hidden":"true"}))),r.a.createElement("div",{className:"wrap-input100 validate-input"},r.a.createElement("input",{className:"input100",type:"text",placeholder:"Verification Code",autoComplete:"off",onChange:function(t){e.handleVerificationCodeChange(t)},value:this.state.verificationCode,onKeyDown:function(t){return 13===t.keyCode&&e.handlePassword2Change(t)}}),r.a.createElement("span",{className:"focus-input100"}),r.a.createElement("span",{className:"symbol-input100"},r.a.createElement("i",{className:"fa fa-barcode","aria-hidden":"true"}))),r.a.createElement("div",{className:"d-flex justify-content-center",style:{height:20,margin:0,textAlign:"center",color:this.state.messageColor}}," "+this.state.message),r.a.createElement("div",{className:"container-login100-form-btn"},r.a.createElement("button",{type:"button",className:"login100-form-btn",onClick:function(t){return e.state.showNewPasswordForm?e.handleUpdateNewPassword():e.handleReset(t)}},this.state.showNewPasswordForm?"Change":"Reset")),r.a.createElement("div",{className:"text-center p-t-12"},r.a.createElement("span",{className:"txt1"}),r.a.createElement(Je.a,{to:tn.LOGIN,className:"txt2",href:"/"},"Login Again")),r.a.createElement("div",{className:"text-center p-t-136"},r.a.createElement(Je.a,{to:tn.REGISTER,className:"txt2"},"Create your Account",r.a.createElement("i",{className:"fa fa-long-arrow-right m-l-5","aria-hidden":"true"})))))))}}]),t}(r.a.Component),pt=function(e){function t(){return Object(ce.a)(this,t),Object(le.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){return this.props.isLoggedIn?r.a.createElement(pe.a,{to:tn.HOME}):this.props.resetForm?r.a.createElement(mt,this.props):this.props.loginForm?r.a.createElement(rt,this.props):r.a.createElement(dt,this.props)}}]),t}(r.a.Component),gt=Object(l.b)(function(e){return e.common.Auth},function(e){return{changeLoginStatus:function(t){e(Me.updateAuthStatus({isLoggedIn:t}))}}})(pt),ft=(a(813),a(71)),ht=a.n(ft),Et=function(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):e},vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top-end";ht()({position:a,type:t,title:e,showConfirmButton:!1,timer:1500,customClass:"add-to-cart-alert",showCloseButton:!0,toast:!0})},bt={generateRandomString:function(){for(var e=5,t="";e-- >0;)t+=String.fromCharCode(Math.floor(10*Math.random())+65);return t},generateTableHeaders:function(e){var t=[];return e.forEach(function(e,a){t.push(r.a.createElement("th",{scope:"col",key:a},e))}),r.a.createElement("tr",null,t)},withCommas:Et},Nt={AMOUNT_UPATE_DELAY_DURATION:300},yt=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).componentDidMount=function(){a.fetchCartProducts()},a.fetchCartProducts=function(){var e=a.props,t=e.isLoggedIn,n=e.changeLoginStatus;t&&(Ue.verifyToken(n),Te.getCart(Ue.getTokenUnsafe()).then(function(e){var t=JSON.parse(e);t.status&&!0===t.status&&(t.products&&t.products.forEach(function(e){e.images=JSON.parse(e.images)}),a.props.updateCartProducts(t.products))}))},a.handleProductRemove=function(e){e.id&&Te.deleteItemFromCart(Ue.getTokenUnsafe(),e.id).then(function(t){console.log(t),200===JSON.parse(t).code&&(vt("Removed ".concat(e.product_name)),a.fetchCartProducts())})},a.handleProductAmountChange=function(e,t){e.id&&e.amount+t>0&&(e.amount+=t,a.amountDelayTimeout&&clearTimeout(a.amountDelayTimeout),a.amountDelayTimeout=setTimeout(function(){Te.updateItemInCart(Ue.getTokenUnsafe(),e.id,e.amount).then(function(e){JSON.parse(e).status===H.TRUE&&console.log("Updated amount")})},Nt.AMOUNT_UPATE_DELAY_DURATION))},a.generateProductBoxes=function(){var e=[],t=a.props,n=t.products,o=t.toggleCart;return n&&n.forEach(function(t,n){var c=t.price-t.price*t.discPercent;e.push(r.a.createElement("div",{key:n,className:"single-cart-item"},r.a.createElement("span",{className:"product-remove",onClick:function(){return a.handleProductRemove(t)}},r.a.createElement("i",{className:"fa fa-close","aria-hidden":"true"})),r.a.createElement(Je.a,{replace:!0,to:{pathname:tn.PRODUCT_DETAIL+"/"+t.id,search:""},className:"product-image"},r.a.createElement("img",{src:t.images[0],className:"cart-thumb",alt:"",onClick:function(){o(!1)}}),r.a.createElement("div",{className:"cart-item-desc"},r.a.createElement("span",{className:"badge"},t.category.category_name),r.a.createElement("h6",null,t.product_name),r.a.createElement("div",{className:"cart-item-quantity d-flex align-items-center justify-content-between"},r.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){return a.handleProductAmountChange(t,-1)}},"-"),r.a.createElement("span",{className:"badge item-quantity"},"".concat(t.amount)),r.a.createElement("button",{className:"btn btn-success btn-sm",onClick:function(){return a.handleProductAmountChange(t,1)}},"+")),r.a.createElement("p",{className:"price"},Et(Math.round(c*t.amount))+" \u20ab")))))}),e},a.generateCartItemNames=function(){var e=[],t=0,n=a.props.products;return n&&n.forEach(function(a,n){var o=(a.price-a.price*a.discPercent)*a.amount;e.push(r.a.createElement("li",{key:n,className:"cart-item-name"},a.product_name," x ",a.amount,r.a.createElement("span",null),r.a.createElement("span",null,Et(Math.round(o))," \u20ab"))),t+=o}),a.total=t,e},a.render=function(){var e=a.props,t=e.isActive,n=e.toggleCart,o=e.products;return r.a.createElement("div",null,r.a.createElement("div",{className:"cart-bg-overlay "+(t?"cart-bg-overlay-on":""),onClick:function(){n(!1)}}),r.a.createElement("div",{className:"right-side-cart-area "+(t?"cart-on":"")},r.a.createElement("div",{className:"cart-button",onClick:function(){n(!1)}},r.a.createElement("div",{id:"rightSideCart"},r.a.createElement("img",{src:"/img/core-img/cancel.svg",alt:"Close",draggable:"false"}))),r.a.createElement("div",{className:"cart-content d-flex"},(!o||0===o.length)&&r.a.createElement("div",{className:"empty-cart"},r.a.createElement("img",{src:"/img/core-img/emptycart.png",alt:"",draggable:"false"}),r.a.createElement("h2",{className:"text-center"},"Your cart is empty!")),o&&o.length>0&&r.a.createElement("div",{className:"cart-list"},a.generateProductBoxes()),a.props.products&&a.props.products.length>0&&r.a.createElement("div",{className:"cart-amount-summary"},r.a.createElement("h2",null,"Summary"),r.a.createElement("ul",{className:"summary-table"},a.generateCartItemNames(),r.a.createElement("li",{className:"summary-header"},r.a.createElement("span",null,"total:")," ",r.a.createElement("span",null,Et(Math.round(a.total))," \u20ab"))),r.a.createElement("div",{className:"checkout-btn mt-100",onClick:function(){a.props.toggleCart(!1)}},r.a.createElement(Je.a,{to:tn.CHECKOUT,className:"btn essence-btn"},"check out"))))))},a.total=0,a.amountDelayTimeout=null,a}return Object(de.a)(t,e),t}(n.Component),It=Object(l.b)(function(e){return e.common.Cart},function(e){return{toggleCart:function(t){e(Me.toggleCart(t))},updateCartProducts:function(t){e(Me.updateCartProduct(t))},changeLoginStatus:function(t){e(Me.updateAuthStatus({isLoggedIn:t}))}}})(yt),St=a(119),wt=a.n(St);wt.a.initialize(K,Y),wt.a.serverURL=Q,wt.a.liveQueryServerURL=$;var Tt=new wt.a.LiveQueryClient({applicationId:K,serverURL:$,javascriptKey:Y,masterKey:Z});Tt.open();a(850);var Ct=function(e){return new Promise(function(t){return setTimeout(function(){return t()},e)})},Ot=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).componentWillMount=function(){console.log("will mount")},a.componentDidMount=Object(He.a)(Fe.a.mark(function e(){var t;return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(2e3);case 2:if(Pe.getUserCount()?a.setState({updateParse:!1}):(Pe.setUserCount(),a.setState({updateParse:!0})),t=new wt.a.Query("Connector"),a.subscription=Tt.subscribe(t),!0!==a.state.updateParse){e.next=8;break}return e.next=8,a.changeUser(1);case 8:a.subscription.on("update",function(e){console.log("update count user"),a.setState({userCount:parseInt(e.get("count"),10)})}),t.first().then(function(e){e.get("count")&&a.setState({userCount:parseInt(e.get("count"),10)})}),window.addEventListener("beforeunload",function(){var e=Object(He.a)(Fe.a.mark(function e(t){return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("reunload"),t.preventDefault(),Pe.removeUserCount(),e.next=5,Te.changeUserConnect(0);case 5:return e.next=7,Ct(1300);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}},e)})),a.changeUser=function(e){new wt.a.Query("Connector").first().then(function(t){0===e?t.set("count",parseInt(t.get("count"),10)-1):t.set("count",parseInt(t.get("count"),10)+1),t.save().then(function(e){console.log("saved")}).catch(function(e){console.log("cannot connect to parse: ",e)})}).catch(function(e){console.log("cannot connect to parse: ",e)})},a.render=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"welcome_area bg-img background-overlay",style:{backgroundImage:"url(/img/bg-img/bg-1.jpg)"}},r.a.createElement("div",{className:"container h-100"},a.state.userCount>0&&r.a.createElement(ot.a,{color:"light"}," ",a.state.userCount," people are visiting this site with you."),r.a.createElement("div",{className:"row h-100 align-items-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"hero-content"},r.a.createElement("h6",null,"asoss"),r.a.createElement("h2",null,"New Collection"),r.a.createElement(Je.a,{to:tn.PRODUCTS,className:"btn essence-btn"},"view collection")))))),r.a.createElement("div",{className:"top_catagory_area section-padding-80 clearfix"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("div",{className:"single_catagory_area d-flex align-items-center justify-content-center bg-img",style:{backgroundImage:"url(/img/bg-img/bg-2.jpg)"}},r.a.createElement("div",{className:"catagory-content"},r.a.createElement(Je.a,{to:"".concat(tn.PRODUCTS,"?ind=7")},"Clothing")))),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("div",{className:"single_catagory_area d-flex align-items-center justify-content-center bg-img",style:{backgroundImage:"url(/img/bg-img/bg-3.jpg)"}},r.a.createElement("div",{className:"catagory-content"},r.a.createElement(Je.a,{to:"".concat(tn.PRODUCTS,"?ind=6")},"Shoes")))),r.a.createElement("div",{className:"col-12 col-sm-6 col-md-4"},r.a.createElement("div",{className:"single_catagory_area d-flex align-items-center justify-content-center bg-img",style:{backgroundImage:"url(/img/bg-img/bg-4.jpg)"}},r.a.createElement("div",{className:"catagory-content"}," ",r.a.createElement(Je.a,{to:"".concat(tn.PRODUCTS,"?ind=4")},"Accessories"))))))),r.a.createElement("div",{className:"cta-area"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"cta-content bg-img background-overlay",style:{backgroundImage:"url(/img/bg-img/bg-5.jpg)"}},r.a.createElement("div",{className:"h-100 d-flex align-items-center justify-content-end"},r.a.createElement("div",{className:"cta--text"},r.a.createElement("h6",null,"-60%"),r.a.createElement("h2",null,"Global Sale"),r.a.createElement(Je.a,{className:"btn essence-btn",to:"".concat(tn.PRODUCTS)},"Buy Now")))))))),r.a.createElement("div",{className:"brands-area d-flex align-items-center justify-content-between"},r.a.createElement("div",{className:"single-brands-logo"},r.a.createElement("img",{src:"img/core-img/brand1.png",alt:""})),r.a.createElement("div",{className:"single-brands-logo"},r.a.createElement("img",{src:"img/core-img/brand2.png",alt:""})),r.a.createElement("div",{className:"single-brands-logo"},r.a.createElement("img",{src:"img/core-img/brand3.png",alt:""})),r.a.createElement("div",{className:"single-brands-logo"},r.a.createElement("img",{src:"img/core-img/brand4.png",alt:""})),r.a.createElement("div",{className:"single-brands-logo"},r.a.createElement("img",{src:"img/core-img/brand5.png",alt:""})),r.a.createElement("div",{className:"single-brands-logo"},r.a.createElement("img",{src:"img/core-img/brand6.png",alt:""}))))},a.state={userCount:0,updateParse:!0},a}return Object(de.a)(t,e),t}(n.Component),Pt=function(e){return{type:I,payload:e}},At=function(e){return{type:S,payload:e}},kt=function(e){return{type:w,payload:e}},Ut=function(e){return{type:T,payload:e}},Rt=a(149),jt=a.n(Rt),Dt=(a(863),a(865),{brands:[],filter:{brand:{},priceFrom:"",priceTo:"",priceIsInvalid:!1,currentIndustryId:0}}),_t=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).componentDidMount=function(){a.fetchAllBrands(),a.props.updateBranches(0)},a.componentWillReceiveProps=function(e){var t=jt.a.parse(e.location.search).ind;t&&a.setState({currentIndustryId:t-1>=0?t-1:0}),console.log("now industry: ",a.state.currentIndustryId)},a.fetchAllBrands=function(){Te.getAllBrands().then(function(e){var t=JSON.parse(e).brand;a.setState({brands:t})}).catch(function(e){console.log(e)})},a.handleFilterItemSelected=function(e){a.setState({filter:Object(i.a)({},a.state.filter,e)})},a.handleChangePrice=function(e,t){var n={},r=Number(t);""===t||r?(n[e]=t,n.priceIsInvalid=!1):n.priceIsInvalid=!0,a.setState({filter:Object(i.a)({},a.state.filter,n)})},a.handleApplyFilter=function(){var e=a.state.filter,t=e.brand,n=e.priceFrom,r=e.priceTo,o="?";console.log("this.state: ",a.state),t.id?(o+="".concat(F.brandId,"=").concat(t.id),n&&r&&(o+="&".concat(F.minPrice,"=").concat(n),o+="&".concat(F.maxPrice,"=").concat(r))):n&&r&&(o+="".concat(F.minPrice,"=").concat(n),o+="&".concat(F.maxPrice,"=").concat(r)),a.props.history.push(o)},a.generateBrands=function(){for(var e=[],t=[],n=a.state.brands,o=n.length,c=0;c<o;c++){var s=e;c>5&&(s=t);var l=n[c];s.push(r.a.createElement("li",{key:c},r.a.createElement(Je.a,{to:{pathname:tn.PRODUCTS,search:"?brd=".concat(l.id)}},l.brand_name)))}return r.a.createElement(r.a.Fragment,null,e,r.a.createElement("div",{id:"collapseBrands",className:"collapse"},t),r.a.createElement("span",{className:"btn-link","data-toggle":"collapse","data-target":"#collapseBrands",role:"button","aria-expanded":"false","aria-controls":"collapseExample"},"Toggle"))},a.generateBranches=function(){var e=a.props.industries,t=a.state.currentIndustryId;return e&&void 0!==t&&e[t]?e[t].branches.map(function(e,t){var a=bt.generateRandomString();return r.a.createElement("li",{key:t,"data-toggle":"collapse","data-target":"#"+a},r.a.createElement("a",{href:"#/"},e.branch_name),r.a.createElement("ul",{className:"sub-menu collapse"+(0===t?" show":""),id:a},e.categories.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(Je.a,{to:{pathname:tn.PRODUCTS,search:"?cat=".concat(e.id)}},e.category_name))})))}):""},a.render=function(){var e=a.state.filter,t=e.priceIsInvalid,n=e.priceFrom,o=e.priceTo;return console.log("price is invalid: ",t),r.a.createElement("div",{className:"shop_sidebar_area"},r.a.createElement("div",{className:"widget catagory mb-50"},r.a.createElement("h6",{className:"widget-title mb-30"},"Catagories"),r.a.createElement("div",{className:"catagories-menu"},r.a.createElement("ul",{id:"menu-content2",className:"menu-content collapse show"},a.generateBranches()))),r.a.createElement("div",{className:"widget price mb-50"},r.a.createElement("h6",{className:"widget-title mb-30"},"Filter by"),r.a.createElement("p",{className:"widget-title2 mb-30"},"Price"),r.a.createElement("div",{className:"widget-desc"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("input",{className:"form-control mr-2 "+(t?" is-invalid":""),placeholder:"From",value:n,onChange:function(e){return a.handleChangePrice("priceFrom",e.target.value)}})),r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex"},r.a.createElement("input",{className:"form-control mr-2 "+(t?" is-invalid":""),placeholder:"To",value:o,onChange:function(e){return a.handleChangePrice("priceTo",e.target.value)}})))),r.a.createElement("div",{className:"widget brands mb-50"},r.a.createElement("p",{className:"widget-title2 mb-30"},"Brands"),r.a.createElement("div",{className:"widget-desc"},r.a.createElement("ul",null,a.generateBrands()))),r.a.createElement("div",{className:"widget mb-50 d-flex justify-content-center"},r.a.createElement("button",{className:"btn essence-btn btn-sm",onClick:a.handleApplyFilter},"Apply Filter")))},a.state=Dt,a}return Object(de.a)(t,e),t}(n.Component),Bt=Object(Ve.a)(Object(l.b)(function(e){return Object(i.a)({},e.products.SearchPanel,{industries:e.layout.Header.industries})},function(e){return{updateCategoryList:function(t){e(At(t))},updateBranches:function(t){e(kt(t))}}})(_t)),Mt=a(413),Lt=a.n(Mt),xt=(a(869),function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props,t=e.currentPage,n=e.pageSize,o=e.totalItems,c=e.handlePageChange;return r.a.createElement(Lt.a,{innerClass:"pagination justify-content-center",itemClass:"page-item",linkClass:"page-link",activePage:t,itemsCountPerPage:n,totalItemsCount:o,pageRangeDisplayed:5,onChange:function(e){c(e)}})},a}return Object(de.a)(t,e),t}(n.Component)),Ft=Object(l.b)(function(e){return e.common.Paginator},function(e){return{updatePaginatorInfo:function(t){e(Me.changePage(t))}}})(xt),Ht=(a(871),a(1)),qt=a.n(Ht),Gt={percent:100,loadingInterval:null},zt=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).state=Gt,a}return Object(de.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){this.startLoadingBar()}},{key:"componentWillUnmount",value:function(){this.stopLoadingBar()}},{key:"startLoadingBar",value:function(){var e=this;this.setState({loadingInterval:setInterval(function(){e.setState({percent:e.state.percent+1}),e.state.percent>80&&clearInterval(e.state.loadingInterval)},50)})}},{key:"stopLoadingBar",value:function(){this.setState({percent:100}),clearInterval(this.state.loadingInterval)}},{key:"render",value:function(){return r.a.createElement("div",{id:"tidi-loading-bar",className:"progress",style:{height:this.props.loadingBarHeight}},r.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated bg-info",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:this.state.percent+"%"}}))}}]),t}(n.Component);zt.propTyeps={loadingBarHeight:qt.a.number},zt.defaultProps={loadingBarHeight:3};var Jt=zt,Vt=Object(l.b)(function(e){return e.common.LoadingBar})(Jt),Wt={showLoadingBar:!1},Kt=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).componentDidMount=function(){var e=jt.a.parse(a.props.history.location.search),t=Number(e.page),n=Number(e.size);if(a.retrieveURLParams(e,!0),t&&n&&-1!==[12,24,36].indexOf(n))a.handleFilterChange({currentPage:t,pageSize:n});else{var r=a.props,o=r.currentPage,c=r.pageSize;a.fetchProducts(o,c),a.updateURLParams({currentPage:o,pageSize:c})}},a.componentWillReceiveProps=function(e){var t=jt.a.parse(e.history.location.search);a.retrieveURLParams(t)},a.resetParamsURL=function(){a.industryIdFromURL=null,a.branchIdFromURL=null,a.categoryIdFromURL=null,a.brandIdFromURL=null,a.keywordFromURL=null,a.priceFromURL=null,a.priceToURL=null,a.previousParams=null},a.retrieveURLParams=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Number(e.ind),r=Number(e.brch),o=Number(e.cat),c=Number(e.brd),s=e.q,l=Number(e.pfrom),i=Number(e.pto),d=!1;n&&n!==a.industryIdFromURL?(d=!0,a.industryIdFromURL=n):a.industryIdFromURL=null,r&&r!==a.branchIdFromURL?(d=!0,a.branchIdFromURL=r):a.branchIdFromURL=null,o&&o!==a.categoryIdFromURL?(d=!0,a.categoryIdFromURL=o):a.categoryIdFromURL=null,c&&c!==a.brandIdFromURL?(d=!0,a.brandIdFromURL=c):a.brandIdFromURL=null,s&&s!==a.keywordFromURL?(d=!0,a.keywordFromURL=s):a.keywordFromURL=null,l&&i&&(l!==a.priceFromURL||i!==a.priceToURL)&&(d=!0,a.priceFromURL=l,a.priceToURL=i),d&&!t&&a.fetchProducts(a.props.currentPage,a.props.pageSize)},a.updateURLParams=function(e){var t=e.currentPage,n=e.pageSize,r="?size=".concat(n||a.props.pageSize,"&page=").concat(t||a.props.currentPage);a.brandIdFromURL&&(r+="&".concat(F.brandId,"=").concat(a.brandIdFromURL)),a.industryIdFromURL&&(r+="&".concat(F.industryId,"=").concat(a.industryIdFromURL)),a.branchIdFromURL&&(r+="&".concat(F.branchId,"=").concat(a.branchIdFromURL)),a.categoryIdFromURL&&(r+="&".concat(F.categoryId,"=").concat(a.categoryIdFromURL)),a.keywordFromURL&&(r+="&".concat(F.keyword,"=").concat(a.keywordFromURL)),a.priceFromURL&&a.priceToURL&&(r+="&".concat(F.minPrice,"=").concat(a.priceFromURL,"&").concat(F.maxPrice,"=").concat(a.priceToURL)),a.props.history.push({search:r})},a.fetchProducts=function(e,t){var n={};a.brandIdFromURL&&(n.brandId=a.brandIdFromURL),a.industryIdFromURL&&(n.industryId=a.industryIdFromURL),a.branchIdFromURL&&(n.branchId=a.branchIdFromURL),a.categoryIdFromURL&&(n.categoryId=a.categoryIdFromURL),a.keywordFromURL&&(n.keyword=a.keywordFromURL),a.priceFromURL&&a.priceToURL&&(n.minPrice=a.priceFromURL,n.maxPrice=a.priceToURL),a.setState({showLoadingBar:!0}),Te.getAllProducts(t,(e-1)*t,n).then(function(e){a.setState({showLoadingBar:!1});var t=JSON.parse(e);t.products?(a.props.updateProductList(t.products.map(function(e){return Object(i.a)({},e,{images:JSON.parse(e.images)})})),a.props.changePageInfo({totalItems:t.totalItems})):console.log(" have no products")}).catch(function(e){console.log(e)})},a.fetchCartProducts=function(){a.props.isLoggedIn&&Te.getCart(Ue.getTokenUnsafe()).then(function(e){var t=JSON.parse(e);!0===t.status&&(t.products&&t.products.forEach(function(e){return e.images=JSON.parse(e.images)}),a.props.updateCartProducts(t.products))})},a.handleAddProductToCart=function(e){var t=a.props,n=t.isLoggedIn,r=t.cart;if(n){var o=r.products;if(e.id){var c=0;o.map(function(t){return t.id===e.id&&(c=t.amount),null}),c+=1,Te.addItemToCart(Ue.getTokenUnsafe(),e.id,c).then(function(t){JSON.parse(t).status&&(vt("Added ".concat(e.product_name," to Cart!")),a.fetchCartProducts())})}}else vt("You have not logged in yet","error")},a.handleFilterChange=function(e){var t=e.currentPage,n=e.pageSize,r=e.totalItems,o={};t&&(o.currentPage=t),n&&(o.pageSize=Number(n)),r&&(o.totalItems=r),a.props.changePageInfo(o),(n||t)&&(a.updateURLParams({currentPage:o.currentPage,pageSize:o.pageSize}),a.fetchProducts(o.currentPage||a.props.currentPage,o.pageSize||a.props.pageSize))},a.generateProducts=function(){var e=a.props.products,t=[];return console.log(e),e.map(function(e,n){return e.active!==H.FALSE?t.push(r.a.createElement(Yt,{key:n,product:e,buttonTitle:"Add to cart",onClickHandler:a.handleAddProductToCart})):null}),t},a.render=function(){var e=a.state.showLoadingBar,t=a.props,n=t.totalItems,o=t.pageSize,c=t.currentPage;return r.a.createElement("div",null,e&&r.a.createElement(Vt,null),r.a.createElement("div",{className:"breadcumb_area bg-img",style:{backgroundImage:"url(/img/bg-img/breadcumb.jpg)"}},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100 align-items-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page-title text-center"},r.a.createElement("h2",null,"Products")))))),r.a.createElement("section",{className:"shop_grid_area section-padding-80"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-4 col-lg-3"},r.a.createElement(Bt,null)),r.a.createElement("div",{className:"col-12 col-md-8 col-lg-9"},r.a.createElement("div",{className:"shop_grid_product_area"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"product-topbar d-flex align-items-center justify-content-between"},r.a.createElement("div",{className:"total-products"},r.a.createElement("p",null,r.a.createElement("span",null,n)," products found")),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"product-sorting d-flex mr-3"},r.a.createElement("p",null,"Display:"),r.a.createElement("form",{action:"#",method:"get"},r.a.createElement("select",{name:"select",value:o,onChange:function(e){a.handleFilterChange({pageSize:e.target.value,currentPage:1})}},r.a.createElement("option",{value:12},"12"),r.a.createElement("option",{value:24},"24"),r.a.createElement("option",{value:36},"36")),r.a.createElement("input",{type:"submit",className:"d-none",value:""}))),r.a.createElement("div",{className:"product-sorting d-flex"},r.a.createElement("p",null,"Sort by:"),r.a.createElement("form",{action:"#",method:"get"},r.a.createElement("select",{name:"select",id:"sortByselect"},r.a.createElement("option",{value:"value"},"Highest Rated"),r.a.createElement("option",{value:"value"},"Newest"),r.a.createElement("option",{value:"value"},"Price: $$ - $"),r.a.createElement("option",{value:"value"},"Price: $ - $$")),r.a.createElement("input",{type:"submit",className:"d-none",value:""}))))))),r.a.createElement("div",{className:"row"},a.generateProducts())),r.a.createElement(Ft,{handlePageChange:function(e){a.handleFilterChange({currentPage:e})},currentPage:c,pageSize:o,totalItems:n}))))))},a.state=Wt,a}return Object(de.a)(t,e),t}(n.Component),Yt=function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props,t=e.product,n=e.onClickHandler,o=e.buttonTitle;if(!t)return"";var c=Math.round(t.price-t.price*t.discPercent);return r.a.createElement("div",{className:"col-12 col-sm-6 col-lg-4"},r.a.createElement("div",{className:"single-product-wrapper"},r.a.createElement("div",{className:"product-img"},r.a.createElement(Je.a,{to:tn.PRODUCT_DETAIL+"/"+t.id},r.a.createElement("img",{src:t.images[0],alt:""}),t.images[1]&&r.a.createElement("img",{className:"hover-img",src:t.images[1],alt:""})),0!==t.discPercent&&r.a.createElement("div",{className:"product-badge offer-badge"},r.a.createElement("span",null,"-"+Math.round(100*t.discPercent)+"%")),r.a.createElement("div",{className:"product-favourite"},r.a.createElement("a",{href:"/",className:"favme fa fa-heart"},r.a.createElement("span",null)))),r.a.createElement("div",{className:"product-description"},r.a.createElement("span",null,t.category.category_name),r.a.createElement(Je.a,{to:tn.PRODUCT_DETAIL+"/"+t.id},r.a.createElement("h6",null,t.product_name)),r.a.createElement("p",{className:"product-price"},0!==t.discPercent&&r.a.createElement("span",{className:"old-price"},Et(t.price)+" \u20ab"),Et(c)+" \u20ab"),r.a.createElement("div",{className:"hover-content"},r.a.createElement("div",{className:"add-to-cart-btn"},r.a.createElement("button",{className:"btn essence-btn",onClick:function(){return n(t)}},o))))))},a}return Object(de.a)(t,e),t}(n.Component),Zt=Object(Ve.a)(Kt),Qt=Object(l.b)(function(e){return Object(i.a)({},e.products.Products,{cart:e.common.Cart})},function(e){return{updateProductList:function(t){e(Pt(t))},changePageInfo:function(t){e(Me.changePageInfo(t))},updateCartProducts:function(t){e(Me.updateCartProduct(t))}}})(Zt),$t=a(257),Xt=(a(949),{product:null,productFound:!1,numberOfViewer:0,refresh:!0}),ea=function(e){return new Promise(function(t){return setTimeout(function(){return t()},e)})},ta=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).componentWillMount=function(){a.fetchProduct()},a.componentWillUpdate=function(e){e.match.params.id!==a.props.match.params.id&&a.fetchProduct()},a.setupBeforeUnloadListener=function(){window.addEventListener("beforeunload",function(){var e=Object(He.a)(Fe.a.mark(function e(t){return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Te.descViewer(a.state.product.id);case 3:return e.next=5,ea(1300);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},a.componentDidMount=Object(He.a)(Fe.a.mark(function e(){var t,n;return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ea(2e3);case 2:if(t=a.props.match.params.id,n=new wt.a.Query("product"),console.log("id product: ",t),!t){e.next=8;break}return e.next=8,n.equalTo("id",parseInt(t,10));case 8:return e.next=10,n.first().then(function(){var e=Object(He.a)(Fe.a.mark(function e(t){var a;return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.get("viewer"),t.set("viewer",a+1),e.next=4,t.save();case 4:console.log("get view done");case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.log("cannot connect parse: ",e)});case 10:console.log("next action"),a.subscription=Tt.subscribe(n),a.subscription.on("update",function(e){console.log("product update: ",e),a.setState({numberOfViewer:e.get("viewer")}),console.log("The number of people watching this product: ",a.state.numberOfViewer)}),n.first().then(function(e){e.get("viewer")&&a.setState({numberOfViewer:parseInt(e.get("viewer"),10)})}),a.setupBeforeUnloadListener();case 15:case"end":return e.stop()}},e)})),a.componentWillUnmount=Object(He.a)(Fe.a.mark(function e(){return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te.descViewer(a.state.product.id);case 2:return e.next=4,ea(1300);case 4:case"end":return e.stop()}},e)})),a.fetchProduct=function(){var e=Number(a.props.match.params.id);!isNaN(e)&&e>0&&Te.getProduct(e).then(function(e){var t=JSON.parse(e);500!==t.status?(t.images=JSON.parse(t.images),a.setState({product:t,productFound:!0})):console.log(t)})},a.fetchCartProducts=function(){a.props.isLoggedIn&&Te.getCart(Ue.getTokenUnsafe()).then(function(e){var t=JSON.parse(e);"TRUE"===t.status.status&&(t.products&&t.products.forEach(function(e){return e.images=JSON.parse(e.images)}),a.props.updateCartProducts(t.products))})},a.handleAddProductToCart=function(e){var t=a.props,n=t.isLoggedIn,r=t.cart;if(n){var o=r.products;if(e.id){var c=0;o&&Ge.a.map(o,function(t){t.id===e.id&&(c=t.amount)}),c+=1,Te.addItemToCart(Ue.getTokenUnsafe(),e.id,c).then(function(t){JSON.parse(t).status&&(vt("Added ".concat(e.productName," to Cart!")),a.fetchCartProducts())})}}else vt("You have not logged in yet","error")},a.generatePictures=function(){var e=[],t=a.state.product.images;return t&&t.forEach(function(t,a){e.push(r.a.createElement("div",{key:a,className:"carousel-item"+(0===a?" active":"")},r.a.createElement("img",{className:"d-block w-100",src:t,alt:""})))}),e},a.render=function(){var e=a.state,t=e.productFound,n=e.product,o=e.numberOfViewer;if(t&&n){if(0===Object.keys(n).length)return r.a.createElement("div",null,r.a.createElement(je,null));for(var c=Math.round(100*n.discPercent),s=Math.round(n.price-n.price*n.discPercent),l=n.description.split("\n"),i=[],d=0;d<l.length;d++)i[d]=r.a.createElement("p",{key:d,className:"product-desc"},l[d]);return r.a.createElement("div",{className:"single_product_details_area d-flex align-items-center"},!a.state.product&&r.a.createElement(je,null),r.a.createElement("div",{id:"images-slider",className:"single_product_thumb carousel slide","data-ride":"carousel"},r.a.createElement("div",{className:"carousel-inner"},a.generatePictures()),r.a.createElement("a",{className:"carousel-control-prev owl-prev",href:"#images-slider",role:"button","data-slide":"prev"},r.a.createElement("span",{className:"fa fa-chevron-circle-left fa-5x","aria-hidden":"false"}),r.a.createElement("span",{className:"sr-only"},"Previous")),r.a.createElement("a",{className:"carousel-control-next owl-next",href:"#images-slider",role:"button","data-slide":"next"},r.a.createElement("span",{className:"fa fa-chevron-circle-right fa-5x","aria-hidden":"false"}),r.a.createElement("span",{className:"sr-only"},"Next"))),r.a.createElement("div",{className:"single_product_desc clearfix"},o>0&&r.a.createElement("div",{className:"d-flex justify-content-center p-5"},"There has ",o," users watching this product with you."),r.a.createElement("span",null,n.brand&&n.brand[0].brand_name),r.a.createElement(Je.a,{to:n.id?"/product/".concat(n.id):"/"},r.a.createElement("h2",null,n.product_name)),r.a.createElement("p",{className:"product-price"},0!==n.discPercent&&r.a.createElement("span",{className:"old-price"},Et(n.price)+" \u20ab"),Et(s)+" \u20ab  ",c?"(-"+c+"%)":null),r.a.createElement("h4",null,i),r.a.createElement("form",{className:"cart-form clearfix",method:"post"},r.a.createElement("div",{className:"cart-fav-box d-flex align-items-center"},r.a.createElement("button",{type:"button",name:"addtocart",className:"btn essence-btn",onClick:function(){return a.handleAddProductToCart(n)}},"Add to cart"),r.a.createElement("div",{className:"product-favourite ml-4"},r.a.createElement("a",{href:"#/",className:"favme fa fa-heart"},r.a.createElement("span",null)))),r.a.createElement("div",{className:"cart-fav-box d-flex align-items-center justify-content-end"},r.a.createElement("a",{href:"/"},n.category&&n.category[0].category_name)))),r.a.createElement("div",{className:"full-description-container"},r.a.createElement("div",{className:"container"},n.description)),r.a.createElement("div",{className:"fb-comment-plugin-container"},r.a.createElement($t.FacebookProvider,{appId:"486326855227569"},r.a.createElement($t.Comments,{href:"https://tidi-binpossible49.c9users.io"+a.props.location.pathname,className:"kdjf"}))))}return r.a.createElement("div",null,r.a.createElement(je,null))},a.state=Xt,a}return Object(de.a)(t,e),t}(n.Component),aa=Object(l.b)(function(e){return Object(i.a)({},e.products.ProductDetail,{cart:e.common.Cart,decreaseViewer:e.products.decreaseViewer})},function(e){return{updateCartProducts:function(t){e(Me.updateCartProduct(t))},decreaseViewerAct:function(t){e(Ut(t))}}})(ta),na=function(e){return{type:te,payload:e}},ra=function(e){return{type:ae,payload:e}},oa=(a(951),function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).componentWillMount=function(){a.fetchOrders()},a.fetchOrders=function(){Te.getAllOrders(Ue.getTokenUnsafe(),1e3,0,{}).then(function(e){var t=JSON.parse(e);t.status&&t.status===H.TRUE&&a.props.fetchOrders(t.orders.reverse())})},a.generateTableRows=function(e){return e.map(function(e,t){return console.log(e),r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.date),r.a.createElement("td",null,Et(e.total)," \u20ab"),r.a.createElement("td",null,e.status),r.a.createElement("td",null,r.a.createElement(Je.a,{to:tn.ORDER_DETAIL+"/"+e.id},"Details")))}).reverse()},a.render=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"breadcumb_area bg-img",style:{backgroundImage:"url(/img/bg-img/breadcumb.jpg)"}},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100 align-items-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page-title text-center"},r.a.createElement("h2",null,"Orders")))))),r.a.createElement("section",{className:"shop_grid_area"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{className:"regular-page-content-wrapper section-padding-80"},r.a.createElement("div",{className:"regular-page-text"},r.a.createElement("h3",null,"Order list"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Date"),r.a.createElement("th",{scope:"col"},"Total"),r.a.createElement("th",{scope:"col"},"Status"),r.a.createElement("th",{scope:"col"}))),r.a.createElement("tbody",null,a.generateTableRows(a.props.orders))))))))))},a}return Object(de.a)(t,e),t}(n.Component)),ca=Object(l.b)(function(e){return Object(i.a)({},e.orders.Orders)},function(e){return{fetchOrders:function(t){e(na(t))}}})(oa),sa="FETCH_ORDERS",la=function(e){return{type:sa,payload:e}},ia=(a(953),function(e){function t(e){var a;Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).MAX_DIS=100,a.themes=["normal.day","normal.day.grey","normal.day.transit","normal.night","normal.night.grey","reduced.night","reduced.day","pedestrian.day","pedestrian.night"],a.image="https://img.icons8.com/color/48/000000/marker.png",a.componentWillMount=function(){var e=a.props,t=e.lat,n=e.lng,r=e.zoom;a.setState({center:{lat:t||0,lng:n||0},zoom:r})},a.componentDidMount=function(){a.drawMap()},a.componentWillReceiveProps=function(e){a.setState({center:{lat:e.lat,lng:e.lng}})},a.prepareLayout=function(){a.platform=new window.H.service.Platform(a.state);var e=window.devicePixelRatio||1;a.layer=a.platform.createDefaultLayers({tileSize:1===e?256:512,ppi:1===e?void 0:320});var t=document.getElementById("here-map");a.map=new window.H.Map(t,a.layer.normal.map,{center:a.state.center,zoom:a.state.zoom,pixelRatio:e});var n=a.platform.getMapTileService({type:"base"}).createTileLayer("maptile",a.themes[0],1===e?256:512,"png8",{lg:"vie",ppi:1===e?void 0:320});a.map.setBaseLayer(n),a.events=new window.H.mapevents.MapEvents(a.map),a.behavior=new window.H.mapevents.Behavior(a.events),a.ui=window.H.ui.UI.createDefault(a.map,a.layer,"zh-CN")},a.drawMap=function(){a.prepareLayout();var e=a.state.center,t=e.lat,n=e.lng;a.parisMarker=new window.H.map.Marker({lat:t,lng:n}),a.map.addObject(a.parisMarker),a.geocode(),a.findNearestMarker()},a.geocode=function(){var e=a.props.address;console.log("get address: ",e),e&&(console.log("start geocode to get store location: ",e),Ge.a.map(e,function(e,t){var n={searchText:e.address,jsonattributes:1};a.platform.getGeocodingService().geocode(n,function(n){var r=n.response.view[0].result;a.addLocationsToMap(r[0],e.id,t)},function(e){console.log("Error when geocode address")})}))},a.addLocationsToMap=function(e,t,n){var r;console.log("start add store into map");var o,c=new window.H.map.Group;o={lat:e.location.displayPosition.latitude,lng:e.location.displayPosition.longitude};var s=new window.H.map.Icon(a.image),l="<div> Chi nh\xe1nh "+e.location.address.label+"</div>";(r=new window.H.map.Marker(o,{icon:s})).setData(l),r.draggable=!0,c.addObject(r),a.map.addObject(c),a.map.setCenter(c.getBounds().getCenter());var i=c.getObjects()[0].getPosition().distance(a.state.center);Te.updateLocation(o,i,t).then(function(e){console.log("update location: ",e)}).catch(function(e){console.log(e)}),c.addEventListener("tap",function(e){var t=new window.H.ui.InfoBubble(e.target.getPosition(),{content:e.target.getData()});a.ui.addBubble(t)},!1)},a.findNearestMarker=function(){console.log("start find store nearest to user location"),Te.getAllLocation().then(function(e){var t=JSON.parse(e).addresses;a.nearestStore=t[0],Ge.a.map(t,function(e){e.distance<a.nearestStore.distance&&(a.nearestStore=e)}),console.log("nearest: ",a.nearestStore),a.calculateRouteFromAtoB()}).catch(function(e){console.log(e)})},a.calculateRouteFromAtoB=function(){var e=JSON.parse(a.nearestStore.location),t=a.state.center.lat+","+a.state.center.lng,n=e.lat+","+e.lng;console.log("data to cal: - point1:  ",t,", point2: ",n,", nearestStore: ",a.nearestStore,", address stores: ",a.props.address);var r={mode:"fastest;car",representation:"display",waypoint0:t,waypoint1:n,routeattributes:"waypoints,summary,shape,legs",maneuverattributes:"direction,action"};a.platform.getRoutingService().calculateRoute(r,function(e){var t=e.response.route[0];a.addRouteShapeToMap(t),a.addManueversToMap(t)},function(e){alert("Ooops!")})},a.addRouteShapeToMap=function(e){var t,n=new window.H.geo.Strip;e.shape.forEach(function(e){var t=e.split(",");n.pushLatLngAlt(t[0],t[1])}),t=new window.H.map.Polyline(n,{style:{lineWidth:4,strokeColor:"rgba(0, 128, 255, 0.7)"}}),a.map.addObject(t),a.map.setViewBounds(t.getBounds(),!0)},a.addManueversToMap=function(e){var t,n,r=new window.H.map.Icon('<svg width="18" height="18" xmlns="http://www.w3.org/2000/svg"><circle cx="8" cy="8" r="8" fill="#1b468d" stroke="white" stroke-width="1"  /></svg>',{anchor:{x:8,y:8}}),o=new window.H.map.Group;for(t=0;t<e.leg.length;t+=1)for(n=0;n<e.leg[t].maneuver.length;n+=1){var c=e.leg[t].maneuver[n],s=new window.H.map.Marker({lat:c.position.latitude,lng:c.position.longitude},{icon:r});s.instruction=c.instruction,o.addObject(s)}o.addEventListener("tap",function(e){a.map.setCenter(e.target.getPosition()),a.openBubble(e.target.getPosition(),e.target.instruction)},!1),a.map.addObject(o)},a.openBubble=function(e,t){a.bubble?(a.bubble.setPosition(e),a.bubble.setContent(t),a.bubble.open()):(a.bubble=new window.H.ui.InfoBubble(e,{content:t}),a.ui.addBubble(a.bubble))},a.render=function(){return r.a.createElement("div",null,r.a.createElement("div",{id:"here-map",style:{width:"100%",height:"400px",background:"grey"}}))},a.platform=null,a.map=null;var n=a.props,o=n.lat,c=n.lng,s=n.zoom;return a.state={addStore:!1,app_id:W.app_id,app_code:W.app_code,center:{lat:o||0,lng:c||0},useCIT:W.useCIT,useHTTPS:W.useHTTPS,zoom:s,theme:a.themes[1],stores:[]},a}return Object(de.a)(t,e),t}(n.Component)),da=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).componentWillMount=Object(He.a)(Fe.a.mark(function e(){return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.getCurrentLocation(),e.next=3,a.getAllAddresses();case 3:case"end":return e.stop()}},e)})),a.componentDidMount=function(){a.state.address||a.getAllAddresses()},a.getCurrentLocation=function(){navigator.geolocation.getCurrentPosition(function(e){var t=e.coords.latitude,n=e.coords.longitude;a.setState({lat:t,lng:n}),console.log("my curent: ",a.state)},function(){alert("Geocoder failed")})},a.componentWillReceiveProps=function(e){},a.getAllAddresses=Object(He.a)(Fe.a.mark(function e(){return Fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te.getAllLocation().then(function(e){var t=JSON.parse(e).addresses;console.log("address stores: ",t),a.setState({address:t})}).catch(function(e){console.log(e)});case 2:case"end":return e.stop()}},e)})),a.render=function(){var e=a.state,t=e.lat,n=e.lng,o=e.address;return 0===t&&0===n?r.a.createElement("div",null,r.a.createElement(je,null)):r.a.createElement("div",null,r.a.createElement("div",{className:"breadcumb_area bg-img",style:{backgroundImage:"url(/img/bg-img/breadcumb.jpg)"}},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100 align-items-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page-title text-center"},r.a.createElement("h2",null,"Directions")))))),r.a.createElement("section",{className:"shop_grid_area"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{className:"regular-page-content-wrapper section-padding-80"},r.a.createElement("div",{className:"regular-page-text App"},r.a.createElement(ia,{app_id:W.app_id,app_code:W.app_code,lat:t,lng:n,zoom:"100",address:o}))))))))},a.state={address:[],lat:0,lng:0},a}return Object(de.a)(t,e),t}(n.Component),ua=Object(l.b)(function(e){return Object(i.a)({},e.orders.Orders)},function(e){return{fetchOrders:function(t){e(la(t))}}})(da),ma=(a(955),function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props,t=e.additionalClass,n=e.label,o=e.type,c=e.smallLabel;return r.a.createElement("div",{className:"form-group "+t},n&&r.a.createElement("label",null,n),function(e){var t=a.props,n=t.value,c=t.onChangeHandler,s=t.disabled,l=t.options,i=t.rows;switch(e.toLowerCase()){case"select":return r.a.createElement("select",{type:"text",className:"form-control",value:n,onChange:c,disabled:s},l.map(function(e,t){return r.a.createElement("option",{key:t,value:e.value||e},e.name||e)}));case"textarea":return r.a.createElement("textarea",{className:"form-control",value:n,onChange:c,rows:i,disabled:s});default:return r.a.createElement("input",{className:"form-control",type:o,value:n,onChange:c,disabled:s})}}(o),c&&r.a.createElement("small",{className:"form-text text-muted"}))},a}return Object(de.a)(t,e),t}(n.Component)),pa={fullName:"",address:"",phoneNumber:"",email:"",shippingNote:"",shippingFee:null,shippingMethod:{},couponCode:"",fullNameIsInvalid:!1,shippingMethodIsInvalid:!1,emailIsInvalid:!1,addressIsInvalid:!1,phoneNumberIsInvalid:!1,errorMessage:"",couponMessage:"",couponStatusCode:null,couponDiscPercent:0,couponMoney:0,redirectTo:null},ga={INTERVAL_DURATION:1e3,SWAL_TIMEOUT:1e4},fa=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).componentWillMount=function(){a.fetchCartProducts(),a.fetchUserInfo()},a.fetchCartProducts=function(){var e=a.props,t=e.isLoggedIn,n=e.updateCartProducts;return t?Te.getCart(Ue.getTokenUnsafe()).then(function(e){var t=JSON.parse(e);!0===t.status&&(t.products&&t.products.forEach(function(e){return e.images=JSON.parse(e.images)}),n(t.products))}):Promise.reject("Refresh cart failed")},a.fetchUserInfo=function(){var e=a.state,t=e.address,n=e.phoneNumber;Te.readAccountInfo(Ue.getTokenUnsafe()).then(function(e){var o=JSON.parse(e);!0===o.status?(a.setState({fullName:o.fullName?o.fullName:"",address:o.address?o.address:"",phoneNumber:o.phone?o.phone:"",email:o.email?o.email:""}),""===t&&a.setState({addressIsInvalid:!0}),""===n&&a.setState({phoneNumberIsInvalid:!0})):a.setState({redirectTo:r.a.createElement(pe.a,{to:tn.PRODUCTS})})})},a.placeOrder=function(){return new Promise(function(e,t){var n=[],r=a.props.cartItems;r&&r.map(function(e){return n.push({proID:e.id,price:e.price,amount:e.amount})});var o=a.state,c=o.couponCode,s=o.fullName,l=o.phoneNumber,i=o.email,d=o.address,u=o.shippingNote,m=o.shippingMethod;Te.toCheckout(Ue.getTokenUnsafe(),c,s,l,i,d,u,a.total,a.discountTotal,n,m.NAME).then(function(t){var a=JSON.parse(t);console.log(a),a.status===H.TRUE?e({status:!0,payload:a}):e({status:!1,message:a.message,payload:a})}).catch(function(t){var a=JSON.parse(t);e({status:!1,message:a.message,payload:a})})})},a.handleApplyCoupon=function(){var e=a.state,t=e.couponCode,n=e.couponStatusCode;t&&1!==n?Te.getCouponStatus(t).then(function(e){var t=JSON.parse(e),n="";switch(t.status){case-1:n="Coupon is invalid";break;case 0:n="Coupon is expired";break;case 1:n="Coupon is applied"}a.setState({couponMessage:n,couponStatusCode:t.status,couponDiscPercent:t.discPercent,couponMoney:t.money})}):1===n&&a.setState({couponCode:pa.couponCode,couponStatusCode:pa.couponStatusCode,couponMessage:pa.couponMessage,couponDiscPercent:pa.couponDiscPercent,couponMoney:pa.couponMoney})},a.handleOrder=function(){var e=a.state,t=e.shippingMethod,n=e.fullName,o=e.email,c=e.address,s=e.phoneNumber;t.NAME?n?o?c?s?ht()({title:"Ordering...",timer:ga.SWAL_TIMEOUT,allowOutsideClick:!1,onOpen:function(){ht.a.showLoading(),a.placeOrder().then(function(e){!0===e.status?(console.log(V[0].NAME,t.NAME),ht()({type:"success",title:"Yayy!!",text:"You ordered successfully.",onClose:function(){a.fetchCartProducts(),a.setState({redirectTo:r.a.createElement(pe.a,{to:tn.PRODUCTS})})}})):(console.log(e),ht()({type:"error",title:"Oops...",text:"".concat(e.message)}))})}}).then(function(e){e.dismiss===ht.a.DismissReason.timer&&ht()({type:"question",title:"Noo...",text:"Server time out! Please try again later."})}):a.setState({phoneNumberIsInvalid:!0,errorMessage:"Please enter your phone number"}):a.setState({addressIsInvalid:!0,errorMessage:"Please enter your address"}):a.setState({emailIsInvalid:!0,errorMessage:"Please enter your email"}):a.setState({fullNameIsInvalid:!0,errorMessage:"Please enter your name"}):a.setState({shippingMethodIsInvalid:!0,errorMessage:"Please choose a shipping method"})},a.handleShippingMethodSelect=function(e){a.setState({shippingMethod:e,shippingFee:e.SHIPPING_FEE,shippingMethodIsInvalid:!1,errorMessage:""})},a.generatePaymentMethods=function(){return V.map(function(e,t){return r.a.createElement(ha,{key:t,methodName:e.NAME,description:e.DESCRIPTION,fee:e.SHIPPING_FEE,handleOnSelect:function(){return a.handleShippingMethodSelect(e)},isSelected:e.NAME===a.state.shippingMethod.NAME})})},a.generateCartItemList=function(){var e=a.props.cartItems,t=a.state,n=t.couponDiscPercent,o=t.couponMoney;parseFloat(n)>1&&a.setState({couponDiscPercent:0});var c=0,s=0,l=e.map(function(e,t){var a,l=e.price-e.price*e.discPercent;return a=l-l*n-o,c+=l*e.amount,s+=a*e.amount,r.a.createElement("li",{key:t,className:"item-product-name"},r.a.createElement("span",null,"[".concat(e.amount,"] ").concat(e.product_name)),r.a.createElement("span",null,"".concat(Et(Math.round(l))," \u20ab")))});return a.total=c,a.discountTotal=s,l},a.render=function(){var e=a.state,t=e.redirectTo,n=e.fullNameIsInvalid,o=e.fullName,c=e.emailIsInvalid,s=e.email,l=e.addressIsInvalid,i=e.phoneNumberIsInvalid,d=e.couponMessage,u=e.phoneNumber,m=e.address,p=e.shippingNote,g=e.shippingFee,f=e.couponStatusCode,h=e.couponCode,E=e.shippingMethodIsInvalid,v=e.errorMessage,b=a.props.cartItems;return r.a.createElement("div",null,t,r.a.createElement("div",{className:"breadcumb_area bg-img",style:{backgroundImage:"url(/img/bg-img/breadcumb.jpg)"}},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100 align-items-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page-title text-center"},r.a.createElement("h2",null,"Checkout")))))),r.a.createElement("div",{className:"checkout_area section-padding-80"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-md-6"},r.a.createElement("div",{className:"checkout_details_area mt-50 clearfix"},r.a.createElement("div",{className:"cart-page-heading mb-30"},r.a.createElement("h5",null,"Billing Address")),r.a.createElement("form",{action:"#",method:"post"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 mb-3"},r.a.createElement("label",{htmlFor:"full_name"},"Fullname ",r.a.createElement("span",null,"*")),r.a.createElement("input",{type:"text",className:"form-control"+(n?" is-invalid":""),id:"full_name",required:!0,value:o,onChange:function(e){""===e.currentTarget.value?a.setState({fullName:e.target.value,fullNameIsInvalid:!0}):a.setState({fullName:e.target.value,fullNameIsInvalid:!1})}})),r.a.createElement("div",{className:"col-12 mb-4"},r.a.createElement("label",{htmlFor:"email_address"},"Email ",r.a.createElement("span",null,"*")),r.a.createElement("input",{type:"email",className:"form-control"+(c?" is-invalid":""),id:"email_address",value:s,onChange:function(e){""===e.currentTarget.value?a.setState({email:e.target.value,emailIsInvalid:!0}):a.setState({email:e.target.value,emailIsInvalid:!1})}})),r.a.createElement("div",{className:"col-12 mb-3"},r.a.createElement("label",{htmlFor:"street_address"},"Billing Address ",r.a.createElement("span",null,"*")),r.a.createElement("input",{type:"text",className:"form-control mb-3"+(l?" is-invalid":""),id:"street_address",value:m,onChange:function(e){e.target.value&&""!==e.target.value?a.setState({address:e.target.value,addressIsInvalid:!1}):a.setState({address:e.target.value,addressIsInvalid:!0})}})),r.a.createElement("div",{className:"col-12 mb-3"},r.a.createElement("label",{htmlFor:"phone_number"},"Phone No ",r.a.createElement("span",null,"*")),r.a.createElement("input",{type:"number",className:"form-control"+(i?" is-invalid":""),id:"phone_number",min:"0",value:u,onChange:function(e){e.target.value&&""!==e.target.value?a.setState({phoneNumber:e.target.value,phoneNumberIsInvalid:!1}):a.setState({phoneNumber:e.target.value,phoneNumberIsInvalid:!0})}})),r.a.createElement("div",{className:"col-12 mb-4"},r.a.createElement("label",{htmlFor:"shipping_note"},"Note "),r.a.createElement("textarea",{className:"form-control",id:"shipping_note",value:p,onChange:function(e){return a.setState({shippingNote:e.target.value})}})),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"custom-control custom-checkbox d-block mb-2"},r.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),r.a.createElement("label",{className:"custom-control-label",htmlFor:"customCheck1"},"Terms and conitions"))))))),r.a.createElement("div",{className:"col-12 col-md-6 col-lg-5 ml-lg-auto"},r.a.createElement("div",{className:"order-details-confirmation"},b&&b.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart-page-heading"},r.a.createElement("h5",null,"Your Order"),r.a.createElement("p",null,"The Details")),r.a.createElement("ul",{className:"order-details-form mb-4"},r.a.createElement("li",{className:"item-header"},r.a.createElement("span",null,"Product")," ",r.a.createElement("span",null,"Price")),a.generateCartItemList(),r.a.createElement("li",{className:"item-header"},r.a.createElement("span",null,"Shipping")," ",r.a.createElement("span",null,"".concat(g?Et(g):"FREE"))),r.a.createElement("li",{className:"item-header"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-5 d-flex align-items-center"},r.a.createElement("span",null,"COUPON")),r.a.createElement(ma,{type:"text",additionalClass:"col-md-5 mb-0",value:h.toUpperCase(),onChangeHandler:function(e){a.setState({couponCode:e.target.value})},disabled:1===f}),r.a.createElement("button",{className:"col-md-2 btn btn-sm"+(1===f?" btn-danger":" btn-info"),onClick:a.handleApplyCoupon,disabled:!h},1===f?"Cancel":"Apply"),r.a.createElement("div",{className:"col-md-12 coupon-status-message text-right",style:{color:1===f?"green":"red"}},d))),r.a.createElement("li",{className:"total-header"},r.a.createElement("span",null,"Total"),r.a.createElement("span",null,r.a.createElement("span",{className:a.discountTotal!==a.total?"old-price":""},"".concat(Et(Math.round(a.total+g))," \u20ab")),r.a.createElement("br",null),a.discountTotal!==a.total?"".concat(Et(Math.round(a.discountTotal+g))," \u20ab"):""))),r.a.createElement("div",{id:"accordion",role:"tablist",className:"mb-4 form-control shipping-method-container"+(E?" is-invalid":"")},a.generatePaymentMethods()),r.a.createElement("div",{className:"error-message d-flex justicy-content-center"},v),r.a.createElement("button",{className:"btn essence-btn",onClick:function(){return a.handleOrder()}},"Place Order")):r.a.createElement("div",{className:"text-center"},"Cart is Empty!")))))))},a.state=pa,a.total=0,a.discountTotal=0,a.zalopayOrderId=null,a.zptranstoken=null,a.checkStatusInterval=null,a}return Object(de.a)(t,e),t}(n.Component),ha=function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=bt.generateRandomString(),t=a.props,n=t.isSelected,o=t.methodName,c=t.description,s=t.fee,l=t.handleOnSelect;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header",role:"tab",id:"headingOne"},r.a.createElement("h6",{className:"mb-0"},r.a.createElement("a",{className:"shipping-method-name "+(n?"shippingmethod-selected":""),"data-toggle":"collapse",href:"#"+e,"aria-expanded":"false","aria-controls":e,onClick:l},r.a.createElement("i",{className:"fa mr-3"+(n?" fa-check-square":" fa-square-o")}),o))),r.a.createElement("div",{id:e,className:"collapse",role:"tabpanel","aria-labelledby":"headingOne","data-parent":"#accordion"},r.a.createElement("div",{className:"card-body"},r.a.createElement("p",null,c),r.a.createElement("p",null,r.a.createElement("b",null,"FEE: "),Et(Math.round(s))," \u20ab"))))},a}return Object(de.a)(t,e),t}(n.Component),Ea=fa,va=Object(l.b)(function(e){return Object(i.a)({},e.checkout.CheckoutDetail,{cartItems:e.common.Cart.products})},function(e){return{updateCartProducts:function(t){e(Me.updateCartProduct(t))}}})(Ea),ba=(a(957),function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).componentWillMount=function(){a.fetchOrderDetail(a.props.match.params.id)},a.fetchOrderDetail=function(e){Te.getOneOrder(Ue.getTokenUnsafe(),e).then(function(e){var t=JSON.parse(e);t.status&&t.status===H.TRUE&&a.props.fetchOrderDetail(t.order)})},a.render=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"breadcumb_area bg-img",style:{backgroundImage:"url(/img/bg-img/breadcumb.jpg)"}},r.a.createElement("div",{className:"container h-100"},r.a.createElement("div",{className:"row h-100 align-items-center"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"page-title text-center"},r.a.createElement("h2",null,"Order Details")))))),r.a.createElement("section",{className:"shop_grid_area section-padding-80"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-11"},r.a.createElement("div",{className:"regular-page-content-wrapper"},r.a.createElement("div",{className:"regular-page-text"},r.a.createElement(Na,{order:a.props.order}))))))))},a}return Object(de.a)(t,e),t}(n.Component)),Na=function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).generateProductList=function(e){var t=0,n=e.map(function(e,a){var n=(e.price-e.price*e.discPercent)*e.amount;return t+=n,r.a.createElement("li",{key:a,className:"item-product-name"},r.a.createElement("span",null,"[".concat(e.amount,"] ").concat(e.product_name)),r.a.createElement("span",null,"".concat(Et(Math.round(n))," \u20ab")))});return a.total=t,n},a.render=function(){var e=a.props.order;return console.log(e),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"order-details-confirmation"},e.products?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart-page-heading d-flex justify-content-between"},r.a.createElement("div",{className:"user-info"},r.a.createElement("h5",null,e.fullName),r.a.createElement("p",null,"".concat(e.email," - ").concat(e.phone)),r.a.createElement("p",null,"".concat(e.address))),r.a.createElement("div",{className:"order-status-container"},e.status)),r.a.createElement("div",null,r.a.createElement(ya,{history:e.history})),r.a.createElement("ul",{className:"order-details-form mb-4"},r.a.createElement("li",{className:"item-header"},r.a.createElement("span",null,"Product")," ",r.a.createElement("span",null,"Price")),a.generateProductList(e.products),r.a.createElement("li",{className:"item-header"},r.a.createElement("span",null,"Coupon used")," ",r.a.createElement("span",null,e.coupon_id?e.coupon_id:"NONE")),r.a.createElement("li",{className:"total-header"},r.a.createElement("span",null,"Total")," ",r.a.createElement("span",null,"".concat(Et(Math.round(e.total))," \u20ab")))),r.a.createElement("div",{id:"accordion",role:"tablist",className:"mb-4 form-control shipping-method-container"}),r.a.createElement("button",{className:"btn essence-btn"},"Export Bill")):r.a.createElement("div",{className:"text-center"},"Order not found")))},a}return Object(de.a)(t,e),t}(n.Component),ya=function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).generateDiplome=function(){return a.props.history.map(function(e,t){var a=lt()(e.date_time).format("D/M/YY").toString();return r.a.createElement("li",{key:t},r.a.createElement("p",{className:"diplome"},e.status),r.a.createElement("span",{className:"point"}),r.a.createElement("div",{className:"diplome-date text-center"},a))})},a.render=function(){return r.a.createElement("div",{className:"timeline-container"},r.a.createElement("ol",{className:"timeline"},a.generateDiplome()))},a}return Object(de.a)(t,e),t}(n.Component),Ia=ba,Sa=Object(l.b)(function(e){return Object(i.a)({},e.orders.OrderDetail)},function(e){return{fetchOrderDetail:function(t){e(ra(t))}}})(Ia),wa=(a(959),a(961),a(982),a(963),{redirectTo:null}),Ta=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).componentWillMount=function(){Ue.verifyTokenAdmin()||a.logout()},a.componentDidMount=function(){console.log("did mount");var e=new wt.a.Query("product");a.subscription=Tt.subscribe(e),a.subscription.on("update",function(e){console.log("update product admin on parse: ",e),vt("product ".concat(e.get("product_name")," has updated by ").concat(e.get("updated_by")))})},a.logout=function(){localStorage.removeItem("authToken"),localStorage.removeItem("refreshTokenToken"),a.setState({redirectTo:r.a.createElement(pe.a,{to:tn.LOGIN})})},a.render=function(){var e=a.props,t=e.username,n=e.location;return console.log("admin username: ",t,"location: ",n),r.a.createElement("div",{className:"nav-side-menu"},a.state.redirectTo,r.a.createElement("h1",{className:"brand"},r.a.createElement(Je.a,{to:tn.ADMIN.HOME},"ADMIN"),r.a.createElement("small",null,r.a.createElement(Je.a,{to:tn.HOME}," TIDI"))),r.a.createElement("p",{className:"text-center"},"Hello, ",r.a.createElement("strong",null,t)),r.a.createElement("p",{className:"text-center"},r.a.createElement("button",{onClick:function(){return a.logout()}},"Logout")),r.a.createElement("i",{className:"fa fa-bars fa-2x toggle-btn","data-toggle":"collapse","data-target":"#menu-content"}),r.a.createElement("div",{className:"menu-list"},r.a.createElement("ul",{id:"menu-content",className:"menu-content collapse out"},r.a.createElement("li",null,r.a.createElement("a",{href:"/"},r.a.createElement("i",{className:"fa fa-dashboard fa-lg"})," Dashboard")),r.a.createElement("li",{"data-toggle":"collapse","data-target":"#products",className:"show active"},r.a.createElement("a",{href:"/"},r.a.createElement("i",{className:"fa fa-briefcase fa-lg"})," Management ",r.a.createElement("span",{className:"arrow"}))),r.a.createElement("ul",{className:"sub-menu collapse show",id:"products"},r.a.createElement("li",{className:n.pathname===tn.ADMIN.USER?"active":""},r.a.createElement(Je.a,{to:tn.ADMIN.USER},"User")),r.a.createElement("li",{className:n.pathname===tn.ADMIN.PRODUCT?"active":""},r.a.createElement(Je.a,{to:tn.ADMIN.PRODUCT},"Product")),r.a.createElement("li",{className:n.pathname===tn.ADMIN.ORDER?"active":""},r.a.createElement(Je.a,{to:tn.ADMIN.ORDER},"Order")),r.a.createElement("li",{className:n.pathname===tn.ADMIN.BRAND?"active":""},r.a.createElement(Je.a,{to:tn.ADMIN.BRAND},"Brand"))))))},a.state=wa,a}return Object(de.a)(t,e),t}(n.Component),Ca=Object(l.b)(function(e){return e.admin.AdminNavBar})(Ta),Oa=Object(l.b)(function(e){return e.admin.Admin})(function(e){return r.a.createElement("div",{className:"wrapper"},r.a.createElement(Ca,e),r.a.createElement("div",{className:"page-wrapper"},e.routes.map(function(e,t){return r.a.createElement(Be,Object.assign({key:t},e,{exact:!0}))})))}),Pa={updateFilter:function(e){return{type:k,payload:e}},updateAddUserForm:function(e){return{type:U,payload:e}},fetchUsers:function(e){return{type:R,payload:e}},fetchProducts:function(e){return{type:D,payload:e}},updateAddProductForm:function(e){return{type:j,payload:e}},updateAddBrandForm:function(e){return{type:_,payload:e}},fetchOrders:function(e){return{type:M,payload:e}},updateOrderForm:function(e){return{type:B,payload:e}}},Aa=(a(965),a(967),function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).hideModal=function(){window.$("#"+a.props.modalId).modal("hide")},a.handleSubmit=function(){a.props.modalHandleSubmit&&a.props.modalHandleSubmit().then(function(e){e&&a.hideModal()}).catch(function(e){a.hideModal()})},a.handleClose=function(){a.props.modalHandleClose&&a.props.modalHandleClose()},a.render=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"modal fade",id:a.props.modalId,tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLongTitle"},a.props.modalTitle),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},a.props.modalBody),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("span",{className:"mr-auto"},a.props.modalMessage),r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return a.handleClose()}},"Close"),r.a.createElement("button",{type:"button",className:"btn "+a.props.modalSubmitClassName,onClick:function(){return a.handleSubmit()}},a.props.modalSubmitTitle))))))},a}return Object(de.a)(t,e),t}(n.Component));Aa.defaultProps={modalSubmitClassName:"btn-success"};var ka=Aa,Ua=Object(l.b)(function(e){return e.common.Modal})(ka),Ra=(a(969),function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props,t=e.formData,n=e.updateForm,o=e.editMode;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(ma,{label:"Username",type:"text",value:t.username,onChangeHandler:function(e){return n({username:e.target.value})}}),r.a.createElement(ma,{label:"Email",type:"email",value:t.email,onChangeHandler:function(e){return n({email:e.target.value})}}),!o&&r.a.createElement(ma,{label:"Password",type:"password",value:t.password,onChangeHandler:function(e){return n({password:e.target.value})}}),r.a.createElement(ma,{label:"Gender",type:"select",value:t.gender,onChangeHandler:function(e){return n({gender:e.target.value})},options:[G.FEMALE,G.MALE]}),r.a.createElement(ma,{label:"Phone",type:"text",value:t.phone,onChangeHandler:function(e){return n({phone:e.target.value})}}),r.a.createElement(ma,{label:"Full name",type:"text",value:t.fullName,onChangeHandler:function(e){return n({fullName:e.target.value})}}),r.a.createElement(ma,{label:"Date of Birth",type:"date",value:t.dateOfBirth,onChangeHandler:function(e){return n({dateOfBirth:e.target.value})}}),r.a.createElement(ma,{label:"Address",type:"text",value:t.address,onChangeHandler:function(e){return n({address:e.target.value})}}),r.a.createElement(ma,{label:"Permission",type:"select",value:t.permission,onChangeHandler:function(e){return n({permission:e.target.value})},options:[q.CUSTOMER,q.ADMIN]})))},a}return Object(de.a)(t,e),t}(n.Component)),ja=Object(l.b)(function(e){return e.admin.AdminAddUser},function(e){return{updateForm:function(t){e(Pa.updateAddUserForm(t))}}})(Ra),Da=function(e){return r.a.createElement("span",{style:{color:e.color}},e.content)},_a={showLoadingBar:!1,message:null},Ba={HEADING_NAME:"User",SEARCH_DELAY_DURATION:300,PAGE_SIZE_ARR:[10,25,50,100],MAIN_HEADERS:["ID","Username","Role","Email","Active","Actions"],DETAIL_HEADERS:["Avatar","Full name","Phone","DOB","Gender","Address"]},Ma=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).userToBlock=null,a.originalAccountInfo={},a.searchInterval=null,a._isMounted=!1,a.componentWillMount=function(){var e=a.props,t=e.history,n=e.currentPage,r=e.query,o=new URLSearchParams(t.location.search),c=Number(o.get("page")),s=Number(o.get("size"));c&&s&&-1!==Ba.PAGE_SIZE_ARR.indexOf(s)?a.handleFilterChange({currentPage:c,pageSize:s}):(a.fetchUsers(n,Ba.PAGE_SIZE_ARR[0],r),a.updateURLParams(n,Ba.PAGE_SIZE_ARR[0]))},a.componentDidMount=function(){a._isMounted=!0},a.componentWillUnmount=function(){a._isMounted=!1},a.fetchUsers=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.setState({showLoadingBar:!0}),Te.adminGetAllAccounts(Ue.getTokenUnsafe(),(e-1)*t,t,n).then(function(e){var t=JSON.parse(e);t.accounts&&t.status===H.TRUE?(a.props.fetchUsers(t.accounts),a.handleFilterChange({totalItems:t.totalItems}),a._isMounted&&a.setState({showLoadingBar:!1})):vt(t.message,"error")})},a.updateURLParams=function(e,t){a.props.history.push({search:"?size=".concat(t||a.props.pageSize,"&page=").concat(e||a.props.currentPage)})},a.prepareFormData=function(e){for(var t in a.setState({message:null}),e)t in J.AdminAddUser?null===e[t]&&(e[t]=""):delete e[t];a.originalAccountInfo=e,a.props.setFormData(e)},a.clearFormData=function(){a.setState({message:null}),a.props.setFormData(J.AdminAddUser)},a.handleFilterChange=function(e){var t=e.currentPage,n=e.pageSize,r=e.totalItems,o={};t&&(o.currentPage=Number(t)),n&&(o.pageSize=Number(n)),r&&(o.totalItems=Number(r)),a.props.changePageInfo(o),(n||t)&&(a.updateURLParams(o.currentPage,o.pageSize),a.fetchUsers(o.currentPage||a.props.currentPage,o.pageSize||a.props.pageSize,a.props.query))},a.handleChangeKeyword=function(e){a.props.updateFilter({keyword:e.target.value}),clearTimeout(a.searchInterval),a.searchInterval=setTimeout(function(){a.handleSearch()},Ba.SEARCH_DELAY_DURATION)},a.handleSearch=function(){var e=a.props,t=e.currentPage,n=e.pageSize,r=e.query;a.fetchUsers(t,n,r)},a.handleUpdateUser=function(){return new Promise(function(e,t){var n={},o=a.props,c=o.formData,s=o.username,l=o.currentPage,i=o.pageSize,d=o.query;for(var u in c)"password"!==u&&c[u]!==a.originalAccountInfo[u]&&(n[u]=c[u]);Object.keys(n).length>0?(a.setState({message:r.a.createElement(Da,{content:"Updating acocunt..."})}),Te.adminUpdateAccount(Ue.getTokenUnsafe(),c.id,n).then(function(t){var o=JSON.parse(t);console.log(o),o.status===H.TRUE?(a.setState({message:r.a.createElement(Da,{color:"green",content:"Update account successfully"})}),e(!0),"permission"in n&&c.username===s?window.location.reload():a.fetchUsers(l,i,d)):(a.setState({message:r.a.createElement(Da,{color:"red",content:o.message})}),console.log("UPDATE FAILED",o),e(!1))})):(e(!1),a.setState({message:r.a.createElement(Da,{color:"red",content:"Nothing to update"})}))})},a.handleAddUser=function(){var e=a.props,t=e.formData,n=e.currentPage,o=e.pageSize,c=e.query;return new Promise(function(e,s){a.setState({message:r.a.createElement(Da,{content:"Creating acocunt..."})}),t.username?t.email?t.password?Te.adminCreateAccount(Ue.getTokenUnsafe(),t).then(function(t){var s=JSON.parse(t);console.log(s),s.status===H.TRUE?(a.setState({message:r.a.createElement(Da,{color:"green",content:"Create account successfully"})}),e(!0),a.fetchUsers(n,o,c)):(a.setState({message:r.a.createElement(Da,{color:"red",content:s.message})}),console.log("ADD FAILED",s),e(!1))}):a.setState({message:r.a.createElement(Da,{color:"red",content:"Password is empty"})}):a.setState({message:r.a.createElement(Da,{color:"red",content:"Email is empty"})}):a.setState({message:r.a.createElement(Da,{color:"red",content:"Username is empty"})})})},a.handleDeleteUser=function(){return new Promise(function(e){a.userToBlock&&a.userToBlock.id&&Te.adminUpdateAccount(Ue.getTokenUnsafe(),a.userToBlock.id,{active:a.userToBlock.active===H.TRUE?H.FALSE:H.TRUE}).then(function(t){var n=JSON.parse(t);console.log(n),n.status===H.TRUE?(a.setState({message:r.a.createElement(Da,{color:"green",content:(a.userToBlock.active===H.TRUE?"Block":"Unblock")+"account successfully"})}),e(!0),a.fetchUsers(a.props.currentPage,a.props.pageSize,a.props.query)):(a.setState({message:r.a.createElement(Da,{color:"red",content:n.message})}),console.log("UPDATE BLOCK STATUS FAILED",n),e(!1))})})},a.generateTableRows=function(e){var t=[];return e.forEach(function(e,o){t.push(r.a.createElement(n.Fragment,{key:o},r.a.createElement("tr",null,r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.permission),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.active===H.TRUE?r.a.createElement("i",{className:"fa fa-check"}):r.a.createElement("i",{className:"fa fa-times-circle"})),r.a.createElement("td",null,r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-info btn-sm",type:"button","data-toggle":"collapse","data-target":"#detailbox"+e.username,"aria-expanded":"false","aria-controls":"collapseExample"},r.a.createElement("i",{className:"fa fa-info-circle"})," Detail"),"\xa0\xa0",r.a.createElement("button",{className:"btn btn-warning btn-sm","data-toggle":"modal","data-target":"#update-user-modal",onClick:function(){return a.prepareFormData(e)}},r.a.createElement("i",{className:"fa fa-pencil-square-o"})," Edit"),"\xa0\xa0",r.a.createElement("button",{className:"btn btn-danger btn-sm","data-toggle":"modal","data-target":"#delete-user-modal",onClick:function(){a.userToBlock=e}},r.a.createElement("i",{className:"fa fa-ban"})," ",e.active===H.TRUE?"Block":"Unblock")))),r.a.createElement("tr",{className:"collapse no-hover",id:"detailbox"+e.username},r.a.createElement("td",{colSpan:Ba.MAIN_HEADERS.length},r.a.createElement("div",{className:"card card-body",style:{border:"none"}},r.a.createElement("table",{className:"table table-sm"},r.a.createElement("thead",null,bt.generateTableHeaders(Ba.DETAIL_HEADERS)),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{src:e.avatar?e.avatar:"http://bestnycacupuncturist.com/wp-content/uploads/2016/11/anonymous-avatar-sm.jpg",alt:"NONE",style:{width:40}})),r.a.createElement("td",null,e.fullName),r.a.createElement("td",null,e.phone),r.a.createElement("td",null,e.dateOfBirth),r.a.createElement("td",null,e.gender),r.a.createElement("td",null,e.address)))))))))}),t},a.render=function(){var e=a.state,t=e.message,n=e.showLoadingBar,o=a.props,c=o.query,s=o.pageSize,l=o.currentPage,i=o.totalItems,d=o.users;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(Ua,{modalId:"add-user-modal",modalTitle:"Create new user",modalBody:r.a.createElement(ja,null),modalHandleSubmit:a.handleAddUser,modalSubmitTitle:"Add",modalSubmitClassName:"btn-success",modalMessage:t}),r.a.createElement(Ua,{modalId:"update-user-modal",modalTitle:"Update user info",modalBody:r.a.createElement(ja,{editMode:!0}),modalHandleSubmit:a.handleUpdateUser,modalSubmitTitle:"Update",modalSubmitClassName:"btn-warning",modalMessage:t}),r.a.createElement(Ua,{modalId:"delete-user-modal",modalTitle:"Update user info",modalBody:r.a.createElement("div",null,"Are you sure to Block/Unblock this user?"),modalHandleSubmit:a.handleDeleteUser,modalSubmitTitle:"Block/Unblock",modalSubmitClassName:"btn-danger"}),r.a.createElement("h2",null,Ba.HEADING_NAME),r.a.createElement("hr",null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header d-flex justify-content-end"},r.a.createElement("input",{className:"search-bar form-control col-md-4 col-sm-6",type:"text",placeholder:"Search for something...",value:c.keyword,onChange:function(e){return a.handleChangeKeyword(e)},onKeyDown:function(e){return 13===e.keyCode&&a.handleSearch()}})),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"controllers d-flex"},r.a.createElement("div",null,r.a.createElement("select",{className:"form-control input-sm",value:s,onChange:function(e){a.handleFilterChange({pageSize:e.target.value})}},r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"25"},"25"),r.a.createElement("option",{value:"50"},"50"),r.a.createElement("option",{value:"100"},"100"))),r.a.createElement("div",{className:"control-buttons btn-group justify-content-space-between"},r.a.createElement("button",{className:"btn btn-success","data-toggle":"modal","data-target":"#add-user-modal",onClick:function(){a.clearFormData()}},r.a.createElement("i",{className:"fa fa-plus-circle mr-2"}),"Add user"))),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("span",null,"Display ",s*l>i?i:s*l," / ",i)),r.a.createElement("div",{className:"table-container",style:{position:"relative"}},r.a.createElement("div",{className:"progress",style:{width:"100%",height:5,position:"absolute"},hidden:n?"":"hidden"},r.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}})),r.a.createElement("div",{className:"table-container table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm table-bordered"},r.a.createElement("thead",{className:""},bt.generateTableHeaders(Ba.MAIN_HEADERS)),r.a.createElement("tbody",null,a.generateTableRows(d))),r.a.createElement(Ft,{handlePageChange:function(e){a.handleFilterChange({currentPage:e})},currentPage:l,pageSize:s,totalItems:i}))))))},a.state=_a,a.props.changePageInfo({currentPage:1,pageSize:Ba.PAGE_SIZE_ARR[0]}),a}return Object(de.a)(t,e),t}(n.Component),La=Object(l.b)(function(e){return Object(i.a)({},e.admin.AdminUser,e.admin.AdminAddUser,e.admin.AdminFilter)},function(e){return{setFormData:function(t){return e(Pa.updateAddUserForm(t))},fetchUsers:function(t){return e(Pa.fetchUsers(t))},changePageInfo:function(t){return e(Me.changePageInfo(t))},updateFilter:function(t){return e(Pa.updateFilter(t))}}})(Ma),xa=(a(971),a(973),function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).render=function(){var e=a.props,t=e.formData,n=e.updateForm,o=e.changeBranchHandler,c=e.changeIndustryHandler,s=e.branches,l=e.categories,i=e.brands,d=e.industries;return s&&l&&i&&d?r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",{className:"row"},r.a.createElement(ma,{label:"Product Name",type:"text",value:t.product_name,onChangeHandler:function(e){return n({product_name:e.target.value})},additionalClass:"col-md-6 col-sm-6"}),r.a.createElement(ma,{label:"Price",type:"text",value:t.price,onChangeHandler:function(e){return n({price:e.target.value})},additionalClass:"col-md-3 col-sm-6"})),r.a.createElement("div",{className:"row"},r.a.createElement(ma,{label:"Total mount",type:"text",disabled:!0,value:t.amount,onChangeHandler:function(e){return n({amount:e.target.value})},additionalClass:"col-md-3 col-sm-6"}),r.a.createElement(ma,{label:"New amount",type:"text",value:t.new_amount,onChangeHandler:function(e){return n({new_amount:e.target.value})},additionalClass:"col-md-3 col-sm-6"}),r.a.createElement(ma,{label:"Stock",disabled:!0,type:"text",value:t.stock,onChangeHandler:function(e){return n({stock:e.target.value})},additionalClass:"col-md-3 col-sm-6"}),r.a.createElement("button",{className:"btn btn-success smallcustom",onClick:function(e){e.preventDefault(),n({stock:parseInt(t.amount,10)}),n({amount:parseInt(t.new_amount,10)+parseInt(t.amount,10)}),n({new_amount:0})}},r.a.createElement("i",{className:"btn btn-success fa fa-check"},"Apply"))),r.a.createElement("div",{className:"row"},r.a.createElement(ma,{label:"Brand",type:"select",value:t.brand_id,onChangeHandler:function(e){return n({brand_id:e.target.value})},options:i&&i.map(function(e){return{value:e.id,name:e.brand_name}}),additionalClass:"col-md-3 col-sm-6"}),r.a.createElement(ma,{label:"Industry",type:"select",value:t.industry_id,onChangeHandler:function(e){n({industry_id:e.target.value}),c(e.target.value)},options:d&&d.map(function(e){return{value:e.id,name:e.industry_name}}),additionalClass:"col-md-3 col-sm-6"}),r.a.createElement(ma,{label:"Branch",type:"select",value:t.branch_id,onChangeHandler:function(e){n({branch_id:e.target.value}),o(e.target.value)},options:s&&s.map(function(e){return{value:e.id,name:e.branch_name}}),additionalClass:"col-md-3 col-sm-6"}),r.a.createElement(ma,{label:"Category",type:"select",value:t.category_id,onChangeHandler:function(e){return n({category_id:e.target.value})},options:l&&l.map(function(e){return{value:e.id,name:e.category_name}}),additionalClass:"col-md-3 col-sm-6"})),r.a.createElement(ma,{label:"Images",type:"textarea",value:t.images,onChangeHandler:function(e){return n({images:e.target.value})},rows:"7"}),r.a.createElement(ma,{label:"Description",type:"textarea",value:t.description,onChangeHandler:function(e){return n({description:e.target.value})},rows:"5"}))):""},a}return Object(de.a)(t,e),t}(n.Component)),Fa=Object(l.b)(function(e){return e.admin.AdminAddProduct},function(e){return{updateForm:function(t){e(Pa.updateAddProductForm(t))}}})(xa),Ha={showLoadingBar:!1,message:null,brands:[],industries:[],selectedIndustryId:0,branches:[],selectedBranchId:0,categories:[]},qa={HEADING_NAME:"Product",SEARCH_DELAY_DURATION:300,PAGE_SIZE_ARR:[10,25,50,100],MAIN_HEADERS:["ID","Product Name","Price","In Stock","Brand","Category","Active","Actions"],DETAIL_HEADERS:["Images","Description"]},Ga=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).productToBlock=null,a.originalProductInfo={},a.searchInterval=null,a._isMounted=!1,a.componentWillMount=function(){var e=new URLSearchParams(a.props.history.location.search),t=Number(e.get("page")),n=Number(e.get("size"));if(t&&n&&-1!==qa.PAGE_SIZE_ARR.indexOf(n))a.handleFilterChange({currentPage:t,pageSize:n});else{var r=a.props,o=r.currentPage,c=r.query;a.fetchProducts(o,qa.PAGE_SIZE_ARR[0],c),a.updateURLParams(o,qa.PAGE_SIZE_ARR[0])}a.fetchAllBrands(),a.fetchAllIndustries(),a.fetchAllBranches(),a.fetchAllCategories()},a.componentDidMount=function(){a._isMounted=!0},a.componentWillUnmount=function(){a._isMounted=!1},a.updateURLParams=function(e,t){a.props.history.push({search:"?size=".concat(t||a.props.pageSize,"&page=").concat(e||a.props.currentPage)})},a.fetchProducts=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.setState({showLoadingBar:!0}),Te.adminGetAllProducts(Ue.getTokenUnsafe(),t,(e-1)*t,n).then(function(e){var t=JSON.parse(e);t.status===H.TRUE&&t.products?(a.props.fetchProducts(t.products),a.handleFilterChange({totalItems:t.totalItems}),a._isMounted&&a.setState({showLoadingBar:!1})):vt(t.message,"error")}).catch(function(e){console.log("Have error when get admin products.",e)})},a.fetchAllBrands=function(){Te.adminGetAllBrands(Ue.getTokenUnsafe(),1e4,0,{}).then(function(e){var t=JSON.parse(e);t.status&&t.status===H.TRUE&&a._isMounted&&a.setState({brands:t.brands})}).catch(function(e){console.log("error when get brands.")})},a.fetchAllIndustries=function(){Te.adminGetAllIndustries(Ue.getTokenUnsafe(),1e4,0,{}).then(function(e){var t=JSON.parse(e);t.status&&t.status===H.TRUE&&a._isMounted&&a.setState({industries:t.industries})})},a.fetchAllBranches=function(){Te.adminGetAllBranches(Ue.getTokenUnsafe(),1e4,0,{}).then(function(e){var t=JSON.parse(e);t.status&&t.status===H.TRUE&&(a.orignalBranches=t.branches,a.handleIndustryChange(a.props.formData.industry_id))})},a.fetchAllCategories=function(){Te.adminGetAllCategories(Ue.getTokenUnsafe(),1e4,0,{}).then(function(e){var t=JSON.parse(e);t.status&&t.status===H.TRUE&&(a.originalCategories=t.categories,a.handleBranchChange(a.props.formData.branch_id))})},a.prepareFormData=function(e){for(var t in a.setState({message:null}),e)t in J.AdminAddProduct||!e[t]?null===e[t]&&(e[t]=""):(e[t+"Id"]=e[t].id,delete e[t]);a.originalProductInfo=e,a.props.setFormData(e)},a.clearFormData=function(){a.setState({message:null}),a.props.setFormData(J.AdminAddProduct)},a.handleIndustryChange=function(e){var t=a.orignalBranches.filter(function(t){return t.industry_id===parseInt(e)});a.setState({branches:t}),a.handleBranchChange(t[0]&&t[0].id)},a.handleBranchChange=function(e){e&&a.originalCategories?a.setState({categories:a.originalCategories.filter(function(t){return t.branch_id===parseInt(e)})}):a.setState({categories:[]})},a.handleFilterChange=function(e){var t=e.currentPage,n=e.pageSize,r=e.totalItems,o={};t&&(o.currentPage=Number(t)),n&&(o.pageSize=Number(n)),r&&(o.totalItems=Number(r)),a.props.changePageInfo(o),(n||t)&&(a.updateURLParams(o.currentPage,o.pageSize),a.fetchProducts(o.currentPage||a.props.currentPage,o.pageSize||a.props.pageSize,a.props.query))},a.handleChangeKeyword=function(e){a.props.updateFilter({keyword:e.target.value}),clearTimeout(a.searchInterval),a.searchInterval=setTimeout(function(){a.handleSearch()},qa.SEARCH_DELAY_DURATION)},a.handleSearch=function(){a.fetchProducts(a.props.currentPage,a.props.pageSize,a.props.query)},a.handleUpdateProduct=function(){var e=a.props,t=e.formData,n=e.productName,o=e.currentPage,c=e.pageSize,s=e.query,l=e.username;return new Promise(function(e,i){var d={};for(var u in t)"password"!==u&&t[u]!==a.originalProductInfo[u]&&(d[u]=t[u]);if(Object.keys(d).length>0){a.setState({message:r.a.createElement(Da,{content:"Updating product..."})});var m=new Date,p=m.getFullYear()+(m.getMonth()<9?"0"+(m.getMonth()+1):""+m.getMonth()+1)+(m.getDate()<9?"0"+m.getDate():m.getDate());d.last_updated=p,d.updated_by=l,Te.adminUpdateProduct(Ue.getTokenUnsafe(),t.id,d).then(function(l){var i=JSON.parse(l);i.status===H.TRUE?(a.setState({message:r.a.createElement(Da,{color:"green",content:"Update product successfully"})}),e(!0),"permission"in d&&t.product_name===n?window.location.reload():a.fetchProducts(o,c,s)):(a.setState({message:r.a.createElement(Da,{color:"red",content:i.message})}),console.log("UPDATE FAILED",i),e(!1))})}else e(!1),a.setState({message:r.a.createElement(Da,{content:"Nothing to update.."})})})},a.handleAddProduct=function(){var e=a.props,t=e.formData,n=e.currentPage,o=e.pageSize,c=e.query;return new Promise(function(e,s){a.setState({message:r.a.createElement(Da,{content:"Creating product..."})}),t.product_name?t.price?t.amount?t.images?Te.adminInsertProduct(Ue.getTokenUnsafe(),t).then(function(t){var s=JSON.parse(t);s.status===H.TRUE?(a.setState({message:r.a.createElement(Da,{color:"green",content:"Create product successfully"})}),e(!0),a.fetchProducts(n,o,c)):(a.setState({message:r.a.createElement(Da,{color:"red",content:s.message})}),console.log("ADD FAILED",s),e(!1))}):a.setState({message:r.a.createElement(Da,{color:"red",content:"Images is empty"})}):a.setState({message:r.a.createElement(Da,{color:"red",content:"Amount is invalid"})}):a.setState({message:r.a.createElement(Da,{color:"red",content:"Price is invalid"})}):a.setState({message:r.a.createElement(Da,{color:"red",content:"Product Name is empty"})})})},a.handleDeleteProduct=function(){return new Promise(function(e){a.productToBlock&&a.productToBlock.id&&Te.adminUpdateProduct(Ue.getTokenUnsafe(),a.productToBlock.id,{active:a.productToBlock.active===H.TRUE?H.FALSE:H.TRUE}).then(function(t){var n=JSON.parse(t);n.status===H.TRUE?(a.setState({message:r.a.createElement(Da,{color:"green",content:(a.productToBlock.active===H.TRUE?"Block":"Unblock")+"product successfully"})}),e(!0),a.fetchProducts(a.props.currentPage,a.props.pageSize,a.props.query)):(a.setState({message:r.a.createElement(Da,{color:"red",content:n.message})}),console.log("UPDATE BLOCK STATUS FAILED",n),e(!1))})})},a.generateTableRows=function(e){var t=[];if(e&&0!==e.length)return e.forEach(function(e,o){var c;try{c=JSON.parse(e.images)}catch(l){c=[]}var s=bt.generateRandomString();t.push(r.a.createElement(n.Fragment,{key:o},r.a.createElement("tr",null,r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.product_name),r.a.createElement("td",null,bt.withCommas(e.price)," \u20ab"),r.a.createElement("td",null,e.amount),r.a.createElement("td",null,e.brand.brand_name),r.a.createElement("td",null,"".concat(e.category.category_name,", ").concat(e.branch.branch_name,", ").concat(e.industry.industry_name)),r.a.createElement("td",null,e.active===H.TRUE?r.a.createElement("i",{className:"fa fa-check"}):r.a.createElement("i",{className:"fa fa-times-circle"})),r.a.createElement("td",null,r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-info btn-sm",type:"button","data-toggle":"collapse","data-target":"#detailbox"+s,"aria-expanded":"false","aria-controls":"collapseExample"},r.a.createElement("i",{className:"fa fa-info-circle"})," Detail"),"\xa0\xa0",r.a.createElement("button",{className:"btn btn-warning btn-sm","data-toggle":"modal","data-target":"#update-product-modal",onClick:function(){return a.prepareFormData(Object(i.a)({},e))}},r.a.createElement("i",{className:"fa fa-pencil-square-o"})," Edit"),"\xa0\xa0",r.a.createElement("button",{className:"btn btn-danger btn-sm","data-toggle":"modal","data-target":"#delete-product-modal",onClick:function(){a.productToBlock=e}},r.a.createElement("i",{className:"fa fa-ban"})," ",e.active===H.TRUE?"Block":"Unblock")))),r.a.createElement("tr",{className:"collapse no-hover",id:"detailbox"+s},r.a.createElement("td",{colSpan:qa.MAIN_HEADERS.length},r.a.createElement("div",{className:"card card-body",style:{border:"none"}},r.a.createElement("table",{className:"table table-sm"},r.a.createElement("thead",null,bt.generateTableHeaders(qa.DETAIL_HEADERS)),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},c.map(function(e,t){return r.a.createElement("img",{key:t,src:e,className:"m-1",alt:"NONE",style:{width:54}})}),r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-plus-circle"}))),r.a.createElement("td",null,e.description)))))))))}),t},a.render=function(){var e=a.props,t=e.products,n=e.currentPage,o=e.pageSize,c=e.query,s=e.totalItems,l=a.state,i=l.branches,d=l.brands,u=l.industries,m=l.categories,p=l.message,g=l.showLoadingBar;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(Ua,{modalId:"add-product-modal",modalTitle:"Create new product",modalBody:r.a.createElement(Fa,{brands:d,industries:u,branches:i,categories:m,changeIndustryHandler:a.handleIndustryChange,changeBranchHandler:a.handleBranchChange}),modalHandleSubmit:a.handleAddProduct,modalSubmitTitle:"Add",modalSubmitClassName:"btn-success",modalMessage:p}),r.a.createElement(Ua,{modalId:"update-product-modal",modalTitle:"Update product info",modalBody:r.a.createElement(Fa,{editMode:!0,brands:d,industries:u,branches:i,categories:m,changeIndustryHandler:a.handleIndustryChange,changeBranchHandler:a.handleBranchChange}),modalHandleSubmit:a.handleUpdateProduct,modalSubmitTitle:"Update",modalSubmitClassName:"btn-warning",modalMessage:p}),r.a.createElement(Ua,{modalId:"delete-product-modal",modalTitle:"Update product info",modalBody:r.a.createElement("div",null,"Are you sure to Block/Unblock this product?"),modalHandleSubmit:a.handleDeleteProduct,modalSubmitTitle:"Block/Unblock",modalSubmitClassName:"btn-danger"}),r.a.createElement("h2",null,qa.HEADING_NAME),r.a.createElement("hr",null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header d-flex justify-content-end"},r.a.createElement("input",{className:"search-bar form-control col-md-4 col-sm-6",type:"text",placeholder:"Search for something...",value:c.keyword,onChange:function(e){return a.handleChangeKeyword(e)},onKeyDown:function(e){return 13===e.keyCode&&a.handleSearch()}})),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"controllers d-flex"},r.a.createElement("div",null,r.a.createElement("select",{className:"form-control input-sm",value:o,onChange:function(e){a.handleFilterChange({pageSize:e.target.value})}},r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"25"},"25"),r.a.createElement("option",{value:"50"},"50"),r.a.createElement("option",{value:"100"},"100"))),r.a.createElement("div",{className:"control-buttons btn-group justify-content-space-between"},r.a.createElement("button",{className:"btn btn-success","data-toggle":"modal","data-target":"#add-product-modal",onClick:function(){a.clearFormData()}},r.a.createElement("i",{className:"fa fa-plus-circle mr-2"}),"Add product"))),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("span",null,"Display ",o*n>s?s:o*n," / ",s),r.a.createElement("span",null,p)),r.a.createElement("div",{className:"table-container",style:{position:"relative"}},r.a.createElement("div",{className:"progress",style:{width:"100%",height:5,position:"absolute"},hidden:g?"":"hidden"},r.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}})),r.a.createElement("div",{className:"table-container table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm table-bordered"},r.a.createElement("thead",null,bt.generateTableHeaders(qa.MAIN_HEADERS)),r.a.createElement("tbody",null,a.generateTableRows(t))),r.a.createElement(Ft,{handlePageChange:function(e){a.handleFilterChange({currentPage:e})},currentPage:n,pageSize:o,totalItems:s}))))))},a.orignalBranches=[],a.originalCategories=[],a.state=Ha,a.props.changePageInfo({currentPage:1,pageSize:qa.PAGE_SIZE_ARR[0]}),a}return Object(de.a)(t,e),t}(n.Component),za=Object(l.b)(function(e){return Object(i.a)({},e.admin.AdminProduct,e.admin.AdminAddProduct,e.admin.AdminFilter)},function(e){return{setFormData:function(t){return e(Pa.updateAddProductForm(t))},fetchProducts:function(t){return e(Pa.fetchProducts(t))},changePageInfo:function(t){return e(Me.changePageInfo(t))},updateFilter:function(t){return e(Pa.updateFilter(t))},updateForm:function(t){e(Pa.updateAddProductForm(t))}}})(Ga),Ja=(a(975),a(977),function(e){function t(){var e,a;Object(ce.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(le.a)(this,(e=Object(ie.a)(t)).call.apply(e,[this].concat(o)))).render=function(){return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(ma,{label:"Brand Name",type:"text",value:a.props.formData.brand_name,onChangeHandler:function(e){a.props.updateForm({brand_name:e.target.value})}})))},a}return Object(de.a)(t,e),t}(n.Component)),Va=Object(l.b)(function(e){return e.admin.AdminAddBrand},function(e){return{updateForm:function(t){e(Pa.updateAddBrandForm(t))}}})(Ja),Wa={showLoadingBar:!1,message:null,brands:[]},Ka={HEADING_NAME:"Brand",SEARCH_DELAY_DURATION:300,PAGE_SIZE_ARR:[10,25,50,100],MAIN_HEADERS:["ID","Brand Name","Active","Actions"]},Ya=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).brandToBlock=null,a.originalBrandInfo={},a.searchInterval=null,a.componentWillMount=function(){var e=a.props,t=e.history,n=e.currentPage,r=new URLSearchParams(t.location.search),o=Number(r.get("page")),c=Number(r.get("size"));o&&c&&-1!==Ka.PAGE_SIZE_ARR.indexOf(c)?a.handleFilterChange({currentPage:o,pageSize:c}):(a.fetchBrands(n,Ka.PAGE_SIZE_ARR[0]),a.updateURLParams(n,Ka.PAGE_SIZE_ARR[0])),a.fetchBrands(n,a.props.pageSize)},a.updateURLParams=function(e,t){a.props.history.push({search:"?size=".concat(t||a.props.pageSize,"&page=").concat(e||a.props.currentPage)})},a.fetchBrands=function(e,t,n){a.setState({showLoadingBar:!0}),Te.adminGetAllBrandsBrand(Ue.getTokenUnsafe(),t,(e-1)*t,n).then(function(e){var t=JSON.parse(e);t.status&&t.status===H.TRUE?(a.setState({brands:t.brands,showLoadingBar:!1}),t.brands?a.props.changePageInfo({totalItems:t.totalItems}):console.log("have no brands.")):vt(t.message,"error")})},a.prepareFormData=function(e){for(var t in a.setState({message:null}),e)t in J.AdminAddBrand||e[t]?null===e[t]&&(e[t]=""):(e[t+"Id"]=e[t].id,delete e[t]);a.originalBrandInfo=e,a.props.setFormData(e)},a.clearFormData=function(){a.setState({message:null}),a.props.setFormData(J.AdminAddBrand)},a.handleFilterChange=function(e){var t=e.currentPage,n=e.pageSize,r=e.totalItems,o={};t&&(o.currentPage=Number(t)),n&&(o.pageSize=Number(n)),r&&(o.totalItems=Number(r)),a.props.changePageInfo(o),(n||t)&&(a.updateURLParams(o.currentPage,o.pageSize),a.fetchBrands(o.currentPage||a.props.currentPage,o.pageSize||a.props.pageSize,a.props.query))},a.handleChangeKeyword=function(e){a.props.updateFilter({keyword:e.target.value}),clearTimeout(a.searchInterval),a.searchInterval=setTimeout(function(){a.handleSearch()},Ka.SEARCH_DELAY_DURATION)},a.handleSearch=function(){a.fetchBrands(a.props.currentPage,a.props.pageSize,a.props.query)},a.handleUpdateBrand=function(){var e=a.props,t=e.formData,n=e.brandName,o=e.currentPage,c=e.pageSize,s=e.query;return new Promise(function(e,l){var i={};for(var d in t)t[d]!==a.originalBrandInfo[d]&&(i[d]=t[d]);Object.keys(i).length>0?(a.setState({message:r.a.createElement(Da,{content:"Updating brand..."})}),Te.adminUpdateBrand(Ue.getTokenUnsafe(),t.id,i).then(function(l){var d=JSON.parse(l);d.status===H.TRUE?(a.setState({message:r.a.createElement(Da,{color:"green",content:"Update brand successfully"})}),e(!0),"permission"in i&&t.brand_name===n?window.location.reload():a.fetchBrands(o,c,s)):(a.setState({message:r.a.createElement(Da,{color:"red",content:d.message})}),console.log("UPDATE FAILED",d),e(!1))})):(e(!1),a.setState({message:r.a.createElement(Da,{color:"red",content:"Nothing to update"})}))})},a.handleAddBrand=function(){var e=a.props,t=e.formData,n=e.currentPage,o=e.pageSize,c=e.query;return new Promise(function(e,s){a.setState({message:r.a.createElement(Da,{content:"Creating brand..."})}),t.brand_name?Te.adminInsertBrand(Ue.getTokenUnsafe(),t).then(function(t){var s=JSON.parse(t);s.status===H.TRUE?(a.setState({message:r.a.createElement(Da,{color:"green",content:"Create brand successfully"})}),e(!0),a.fetchBrands(n,o,c)):(a.setState({message:r.a.createElement(Da,{color:"red",content:s.message})}),console.log("ADD FAILED",s),e(!1))}):a.setState({message:r.a.createElement(Da,{color:"red",content:"Brand Name is empty"})})})},a.handleDeleteBrand=function(){return new Promise(function(e){a.brandToBlock&&a.brandToBlock.id&&Te.adminUpdateBrand(Ue.getTokenUnsafe(),a.brandToBlock.id,{active:a.brandToBlock.active===H.TRUE?H.FALSE:H.TRUE}).then(function(t){var n=JSON.parse(t);n.status===H.TRUE?(a.setState({message:r.a.createElement(Da,{color:"green",content:(a.brandToBlock.active===H.TRUE?"Block":"Unblock")+"brand successfully"})}),e(!0),a.fetchBrands(a.props.currentPage,a.props.pageSize,a.props.query)):(a.setState({message:r.a.createElement(Da,{color:"red",content:n.message})}),console.log("UPDATE BLOCK STATUS FAILED",n),e(!1))})})},a.generateTableRows=function(e){var t=[];return e.forEach(function(e,o){t.push(r.a.createElement(n.Fragment,{key:o},r.a.createElement("tr",null,r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.brand_name),r.a.createElement("td",null,e.active===H.TRUE?r.a.createElement("i",{className:"fa fa-check"}):r.a.createElement("i",{className:"fa fa-times-circle"})),r.a.createElement("td",null,r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-warning btn-sm","data-toggle":"modal","data-target":"#update-brand-modal",onClick:function(){return a.prepareFormData(Object(i.a)({},e))}},r.a.createElement("i",{className:"fa fa-pencil-square-o"})," Edit"),"\xa0\xa0",r.a.createElement("button",{className:"btn btn-danger btn-sm","data-toggle":"modal","data-target":"#delete-brand-modal",onClick:function(){a.brandToBlock=e}},r.a.createElement("i",{className:"fa fa-ban"})," ",e.active===H.TRUE?"Block":"Unblock"))))))}),t},a.render=function(){var e=a.props,t=e.pageSize,n=e.currentPage,o=e.query,c=e.totalItems,s=a.state,l=s.message,i=s.showLoadingBar,d=s.brands;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement(Ua,{modalId:"add-brand-modal",modalTitle:"Create new brand",modalBody:r.a.createElement(Va,null),modalHandleSubmit:a.handleAddBrand,modalSubmitTitle:"Add",modalSubmitClassName:"btn-success",modalMessage:l}),r.a.createElement(Ua,{modalId:"update-brand-modal",modalTitle:"Update brand info",modalBody:r.a.createElement(Va,{editMode:!0}),modalHandleSubmit:a.handleUpdateBrand,modalSubmitTitle:"Update",modalSubmitClassName:"btn-warning",modalMessage:l}),r.a.createElement(Ua,{modalId:"delete-brand-modal",modalTitle:"Update brand info",modalBody:r.a.createElement("div",null,"Are you sure to Block/Unblock this brand?"),modalHandleSubmit:a.handleDeleteBrand,modalSubmitTitle:"Block/Unblock",modalSubmitClassName:"btn-danger"}),r.a.createElement("h2",null,Ka.HEADING_NAME),r.a.createElement("hr",null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header d-flex justify-content-end"},r.a.createElement("input",{className:"search-bar form-control col-md-4 col-sm-6",type:"text",placeholder:"Search for something...",value:o.keyword,onChange:function(e){return a.handleChangeKeyword(e)},onKeyDown:function(e){return 13===e.keyCode&&a.handleSearch()}})),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"controllers d-flex"},r.a.createElement("div",null,r.a.createElement("select",{className:"form-control input-sm",value:t,onChange:function(e){a.handleFilterChange({pageSize:e.target.value})}},r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"25"},"25"),r.a.createElement("option",{value:"50"},"50"),r.a.createElement("option",{value:"100"},"100"))),r.a.createElement("div",{className:"control-buttons btn-group justify-content-space-between"},r.a.createElement("button",{className:"btn btn-success","data-toggle":"modal","data-target":"#add-brand-modal",onClick:function(){a.clearFormData()}},r.a.createElement("i",{className:"fa fa-plus-circle mr-2"}),"Add brand"))),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("span",null,"Display ",t*n>c?c:t*n," / ",c),r.a.createElement("span",null,l)),r.a.createElement("div",{className:"table-container",style:{position:"relative"}},r.a.createElement("div",{className:"progress",style:{width:"100%",height:5,position:"absolute"},hidden:i?"":"hidden"},r.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}})),r.a.createElement("div",{className:"table-container table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm table-bordered"},r.a.createElement("thead",{className:""},bt.generateTableHeaders(Ka.MAIN_HEADERS)),r.a.createElement("tbody",null,a.generateTableRows(d))),r.a.createElement(Ft,{handlePageChange:function(e){a.handleFilterChange({currentPage:e})},currentPage:n,pageSize:t,totalItems:c}))))))},a.orignalBranches=[],a.originalCategories=[],a.state=Wa,a.props.changePageInfo({currentPage:1,pageSize:Ka.PAGE_SIZE_ARR[0]}),a}return Object(de.a)(t,e),t}(r.a.Component),Za=Object(l.b)(function(e){return Object(i.a)({},e.admin.AdminBrand,e.admin.AdminAddBrand,e.admin.AdminFilter)},function(e){return{setFormData:function(t){return e(Pa.updateAddBrandForm(t))},fetchBrands:function(t){return e(Pa.fetchBrands(t))},changePageInfo:function(t){return e(Me.changePageInfo(t))},updateFilter:function(t){return e(Pa.updateFilter(t))},updateForm:function(t){e(Pa.updateAddBrandForm(t))}}})(Ya),Qa=(a(979),{showLoadingBar:!1,message:null,orders:[]}),$a={HEADING_NAME:"Order",SEARCH_DELAY_DURATION:300,PAGE_SIZE_ARR:[10,25,50,100],MAIN_HEADERS:["ID","Username","Date","Total","Status","Actions"],DETAIL_HEADERS:["Full Name","Email","Address","Phone","Note"]},Xa=function(e){function t(e){var a;return Object(ce.a)(this,t),(a=Object(le.a)(this,Object(ie.a)(t).call(this,e))).orderToBlock=null,a.originalAccountInfo={},a.searchInterval=null,a._isMounted=!1,a.componentWillMount=function(){var e=a.props,t=e.history,n=e.currentPage,r=e.query,o=new URLSearchParams(t.location.search),c=Number(o.get("page")),s=Number(o.get("size"));c&&s&&-1!==$a.PAGE_SIZE_ARR.indexOf(s)?a.handleFilterChange({currentPage:c,pageSize:s}):(a.fetchOrders(n,$a.PAGE_SIZE_ARR[0],r),a.updateURLParams(n,$a.PAGE_SIZE_ARR[0]))},a.updateURLParams=function(e,t){a.props.history.push({search:"?size=".concat(t||a.props.pageSize,"&page=").concat(e||a.props.currentPage)})},a.componentDidMount=function(){a._isMounted=!0},a.componentWillUnmount=function(){a._isMounted=!1},a.fetchOrders=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a.setState({showLoadingBar:!0}),Te.adminGetAllOrders(Ue.getTokenUnsafe(),t,(e-1)*t,n).then(function(e){var t=JSON.parse(e);console.log(t),t.orders&&t.status===H.TRUE?(t.orders.forEach(function(e){e.originalStatus=e.status}),a.setState({orders:t.orders}),a.handleFilterChange({totalItems:t.totalItems}),a._isMounted&&a.setState({showLoadingBar:!1})):vt(t.message,"error")})},a.handleFilterChange=function(e){var t=e.currentPage,n=e.pageSize,r=e.totalItems,o={};t&&(o.currentPage=Number(t)),n&&(o.pageSize=Number(n)),r&&(o.totalItems=Number(r)),a.props.changePageInfo(o),(n||t)&&(a.updateURLParams(o.currentPage,o.pageSize),a.fetchOrders(o.currentPage||a.props.currentPage,o.pageSize||a.props.pageSize,a.props.query))},a.handleChangeKeyword=function(e){a.props.updateFilter({keyword:e.target.value}),clearTimeout(a.searchInterval),a.searchInterval=setTimeout(function(){a.handleSearch()},$a.SEARCH_DELAY_DURATION)},a.handleSearch=function(){a.fetchOrders(a.props.currentPage,a.props.pageSize,a.props.query)},a.handleUpdateOrder=function(e){e.status!==e.originalStatus&&Te.admimChangeOrderStatus(Ue.getTokenUnsafe(),e.id,e.status).then(function(e){JSON.parse(e).status===H.TRUE&&a.fetchOrders(a.props.currentPage,$a.PAGE_SIZE_ARR[0],a.props.query)})},a.generateTableRows=function(e){var t=[];return e.forEach(function(e,o){t.push(r.a.createElement(n.Fragment,{key:o},r.a.createElement("tr",null,r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.user.username),r.a.createElement("td",null,e.date),r.a.createElement("td",null,Et(e.total)," \u20ab"),r.a.createElement("td",null,r.a.createElement(ma,{type:"select",value:e.status,options:[z.CHECKED,z.PACKING,z.SHIPPING,z.SUCCESSFUL,z.CANCELED,z.PAID,z.PENDING],onChangeHandler:function(t){e.status=t.target.value,a.forceUpdate()},additionalClass:e.status===e.originalStatus?"":"status-changed"})),r.a.createElement("td",null,r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-info btn-sm",type:"button","data-toggle":"collapse","data-target":"#detailbox"+e.id,"aria-expanded":"false","aria-controls":"collapseExample"},r.a.createElement("i",{className:"fa fa-info-circle"})," Detail"),r.a.createElement("button",{className:"btn btn-warning btn-sm",type:"button",onClick:function(){return a.handleUpdateOrder(e)}},r.a.createElement("i",{className:"fa fa-edit"})," Update")))),r.a.createElement("tr",{className:"collapse no-hover",id:"detailbox"+e.id},r.a.createElement("td",{colSpan:$a.MAIN_HEADERS.length},r.a.createElement("div",{className:"card card-body",style:{border:"none"}},r.a.createElement("table",{className:"table table-sm"},r.a.createElement("thead",null,bt.generateTableHeaders($a.DETAIL_HEADERS)),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{src:e.avatar?e.avatar:"http://bestnycacupuncturist.com/wp-content/uploads/2016/11/anonymous-avatar-sm.jpg",alt:"NONE",style:{width:40}}),e.user.fullName),r.a.createElement("td",null,e.user.email),r.a.createElement("td",null,e.user.address),r.a.createElement("td",null,e.user.phone),r.a.createElement("td",null,e.user.note)),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"},e.products.map(function(e,t){return r.a.createElement("div",{key:t},"[",e.id,"] ",e.product_name," (",Et(e.price),"\u20ab) - X",e.amount)}))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"},e.history.map(function(e,t){return r.a.createElement("div",{key:t},[e.date]," | ",e.status)}))))))))))}),t},a.render=function(){var e=a.props,t=e.pageSize,n=e.currentPage,o=e.totalItems,c=a.state,s=c.showLoadingBar,l=c.orders;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("h2",null,$a.HEADING_NAME),r.a.createElement("hr",null),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header d-flex justify-content-end"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"controllers d-flex"},r.a.createElement("div",null,r.a.createElement("select",{className:"form-control input-sm",value:t,onChange:function(e){a.handleFilterChange({pageSize:e.target.value})}},r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"25"},"25"),r.a.createElement("option",{value:"50"},"50"),r.a.createElement("option",{value:"100"},"100"))),r.a.createElement("div",{className:"control-buttons btn-group justify-content-space-between"})),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("span",null,"Display ",t*n>o?o:t*n," / ",o)),r.a.createElement("div",{className:"table-container",style:{position:"relative"}},r.a.createElement("div",{className:"progress",style:{width:"100%",height:5,position:"absolute"},hidden:s?"":"hidden"},r.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated bg-success",role:"progressbar","aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}})),r.a.createElement("div",{className:"table-container table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm table-bordered"},r.a.createElement("thead",{className:""},bt.generateTableHeaders($a.MAIN_HEADERS)),r.a.createElement("tbody",null,a.generateTableRows(l))),r.a.createElement(Ft,{handlePageChange:function(e){a.handleFilterChange({currentPage:e})},currentPage:n,pageSize:t,totalItems:o}))))))},a.state=Qa,a.props.changePageInfo({currentPage:1,pageSize:$a.PAGE_SIZE_ARR[0]}),a}return Object(de.a)(t,e),t}(n.Component),en=Object(l.b)(function(e){return Object(i.a)({},e.admin.AdminOrder,e.admin.AdminAddOrder,e.admin.AdminFilter)},function(e){return{setFormData:function(t){return e(Pa.updateAddOrderForm(t))},fetchOrders:function(t){return e(Pa.fetchOrders(t))},changePageInfo:function(t){return e(Me.changePageInfo(t))},updateFilter:function(t){return e(Pa.updateFilter(t))}}})(Xa),tn={HOME:"/",LOGIN:"/login",REGISTER:"/register",RESET_PASSWORD:"/reset-password",PRODUCTS:"/products",PRODUCT_DETAIL:"/product",CHECKOUT:"/checkout",CHECKOUT_CALLBACK:"/checkout/callback",ORDERS:"/orders",ORDER_DETAIL:"/order",MAP_DIRECTION:"/direction",ADMIN:{HOME:"/admin",USER:"/admin/user",PRODUCT:"/admin/product",BRAND:"/admin/catalog",ORDER:"/admin/order"}},an=[{path:tn.ADMIN.HOME,component:Oa,permission:q.ADMIN,routes:[{path:tn.ADMIN.USER,component:La,permission:q.ADMIN},{path:tn.ADMIN.PRODUCT,component:za,permission:q.ADMIN},{path:tn.ADMIN.BRAND,component:Za,permission:q.ADMIN},{path:tn.ADMIN.ORDER,component:en,permission:q.ADMIN},{path:tn.ADMIN.HOME,component:function(){return r.a.createElement(pe.a,{to:tn.ADMIN.USER})},permission:q.ADMIN}]},{path:tn.LOGIN,component:function(e){return r.a.createElement(gt,Object.assign({},e,{loginForm:!0}))},permission:q.PUBLIC},{path:tn.REGISTER,component:function(e){return r.a.createElement(gt,Object.assign({},e,{loginForm:!1}))},permission:q.PUBLIC},{path:tn.RESET_PASSWORD,component:function(e){return r.a.createElement(gt,Object.assign({},e,{resetForm:!0}))},permission:q.PUBLIC},{path:tn.HOME,component:function(e){return r.a.createElement("div",{className:"main-wrapper"},r.a.createElement(Qe,e),r.a.createElement(It,e),r.a.createElement("div",{className:"main-content"},r.a.createElement(me.a,null,e.routes.map(function(e,t){return r.a.createElement(Be,Object.assign({key:t},e))}))),r.a.createElement(Xe,null))},permission:q.PUBLIC,routes:[{path:tn.MAP_DIRECTION,component:ua,permission:q.PUBLIC},{path:tn.PRODUCTS,component:Qt,permission:q.PUBLIC},{path:tn.PRODUCT_DETAIL+"/:id",component:aa,permission:q.PUBLIC},{path:tn.ORDERS,component:ca,permission:q.CUSTOMER},{path:tn.ORDER_DETAIL+"/:id",component:Sa,permission:q.CUSTOMER},{path:tn.CHECKOUT,component:va,permission:q.CUSTOMER},{path:tn.HOME,component:Ot,permission:q.PUBLIC}]}],nn=function(e){function t(){return Object(ce.a)(this,t),Object(le.a)(this,Object(ie.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){return r.a.createElement(ue.a,null,r.a.createElement(me.a,null,an.map(function(e,t){return r.a.createElement(Be,Object.assign({key:t},e))})))}}]),t}(n.Component),rn=Object(s.c)(oe);window.store=rn,c.a.render(r.a.createElement(l.a,{store:rn},r.a.createElement(nn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[415,2,1]]]);
//# sourceMappingURL=main.87731190.chunk.js.map