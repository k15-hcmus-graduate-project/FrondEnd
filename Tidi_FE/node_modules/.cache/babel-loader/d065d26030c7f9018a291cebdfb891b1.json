{"ast":null,"code":"import _classCallCheck from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/src/pages/direction/Directions/PlaceSearch.js\";\nimport React, { Component, Fragment } from \"react\";\nimport { FormGroup, FormControl, InputGroup, Glyphicon } from \"react-bootstrap\";\nimport { ListGroup, ListGroupItem } from \"react-bootstrap\";\nimport axios from \"axios\";\n\nvar PlaceSearch =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PlaceSearch, _Component);\n\n  function PlaceSearch(props) {\n    var _this;\n\n    _classCallCheck(this, PlaceSearch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PlaceSearch).call(this, props));\n\n    _this.componentDidMount = function () {\n      console.log(_this.props);\n    };\n\n    _this.state = {\n      q: \"\",\n      results: [],\n      selected: \"\"\n    };\n    _this.onChange = props.onChange || _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSelect = props.onSelect || _this.onSelect.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSearch = props.onSearch || _this.onSearch.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addPlaces = props.addPlaces;\n    return _this;\n  }\n\n  _createClass(PlaceSearch, [{\n    key: \"onSearch\",\n    value: function onSearch(e) {\n      var self = this;\n      axios.get(\"https://places.api.here.com/places/v1/discover/search\", {\n        params: {\n          app_id: self.props.app_id,\n          app_code: self.props.app_code,\n          q: self.state.q,\n          size: 10,\n          at: self.props.lat + \",\" + self.props.lng\n        }\n      }).then(function (response) {\n        // console.log(response);\n        self.setState({\n          results: response.data.results.items\n        });\n        self.addPlaces(self.props.idx, response.data.results.items, self.props.lat, self.props.lng);\n      });\n    }\n  }, {\n    key: \"onSelect\",\n    value: function onSelect(e) {\n      this.setState({\n        selected: e.currentTarget.id\n      });\n      this.props.findNearest(this.props.idx);\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange(e) {\n      e.preventDefault();\n      this.setState({\n        q: e.target.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var self = this; // Get the local address from the vicinity\n\n      var decode = function decode(raw) {\n        var e = document.createElement(\"div\");\n        e.innerHTML = raw;\n        return e.childNodes[0].nodeValue;\n      }; // Build up listing of locations that match query\n\n\n      var destinations = [];\n\n      if (self.state.results.length > 0) {\n        self.state.results.forEach(function (item) {\n          var option = React.createElement(ListGroupItem, {\n            id: item.id,\n            key: item.id,\n            onClick: self.onSelect,\n            header: item.title,\n            className: self.state.selected === item.id ? \"active\" : \"\",\n            bsStyle: self.props.nearest === item.id ? \"success\" : \"info\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }, React.createElement(Fragment, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79\n            },\n            __self: this\n          }, decode(item.vicinity)));\n          destinations.push(option); // ({item.position[0]}, {item.position[1]})\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(InputGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        type: \"text\",\n        bsSize: \"sm\",\n        id: \"destination\" + this.props.idx,\n        key: \"destination\" + this.props.idx,\n        placeholder: \"Store Name\",\n        onChange: this.onChange,\n        onKeyPress: function onKeyPress(e) {\n          if (e.key === \"Enter\") {\n            _this2.onSearch(e);\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }), React.createElement(InputGroup.Addon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Glyphicon, {\n        glyph: \"search\",\n        onClick: this.onSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      })))), React.createElement(ListGroup, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, destinations));\n    }\n  }]);\n\n  return PlaceSearch;\n}(Component);\n\nexport default PlaceSearch;","map":{"version":3,"sources":["/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/src/pages/direction/Directions/PlaceSearch.js"],"names":["React","Component","Fragment","FormGroup","FormControl","InputGroup","Glyphicon","ListGroup","ListGroupItem","axios","PlaceSearch","props","componentDidMount","console","log","state","q","results","selected","onChange","bind","onSelect","onSearch","addPlaces","e","self","get","params","app_id","app_code","size","at","lat","lng","then","response","setState","data","items","idx","currentTarget","id","findNearest","preventDefault","target","value","decode","raw","document","createElement","innerHTML","childNodes","nodeValue","destinations","length","forEach","item","option","title","nearest","vicinity","push","key"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport { FormGroup, FormControl, InputGroup, Glyphicon } from \"react-bootstrap\";\nimport { ListGroup, ListGroupItem } from \"react-bootstrap\";\nimport axios from \"axios\";\n\nclass PlaceSearch extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            q: \"\",\n            results: [],\n            selected: \"\"\n        };\n\n        this.onChange = props.onChange || this.onChange.bind(this);\n        this.onSelect = props.onSelect || this.onSelect.bind(this);\n        this.onSearch = props.onSearch || this.onSearch.bind(this);\n        this.addPlaces = props.addPlaces;\n    }\n\n    componentDidMount = () => {\n        console.log(this.props);\n    };\n    onSearch(e) {\n        const self = this;\n        axios\n            .get(\"https://places.api.here.com/places/v1/discover/search\", {\n                params: {\n                    app_id: self.props.app_id,\n                    app_code: self.props.app_code,\n                    q: self.state.q,\n                    size: 10,\n                    at: self.props.lat + \",\" + self.props.lng\n                }\n            })\n            .then(function(response) {\n                // console.log(response);\n                self.setState({ results: response.data.results.items });\n                self.addPlaces(self.props.idx, response.data.results.items, self.props.lat, self.props.lng);\n            });\n    }\n\n    onSelect(e) {\n        this.setState({ selected: e.currentTarget.id });\n        this.props.findNearest(this.props.idx);\n    }\n\n    onChange(e) {\n        e.preventDefault();\n        this.setState({\n            q: e.target.value\n        });\n    }\n\n    render() {\n        const self = this;\n\n        // Get the local address from the vicinity\n        const decode = function(raw) {\n            var e = document.createElement(\"div\");\n            e.innerHTML = raw;\n            return e.childNodes[0].nodeValue;\n        };\n\n        // Build up listing of locations that match query\n        let destinations = [];\n        if (self.state.results.length > 0) {\n            self.state.results.forEach(function(item) {\n                let option = (\n                    <ListGroupItem\n                        id={item.id}\n                        key={item.id}\n                        onClick={self.onSelect}\n                        header={item.title}\n                        className={self.state.selected === item.id ? \"active\" : \"\"}\n                        bsStyle={self.props.nearest === item.id ? \"success\" : \"info\"}\n                    >\n                        <Fragment>{decode(item.vicinity)}</Fragment>\n                    </ListGroupItem>\n                );\n                destinations.push(option);\n                // ({item.position[0]}, {item.position[1]})\n            });\n        }\n\n        return (\n            <div>\n                <FormGroup>\n                    <InputGroup>\n                        <FormControl\n                            type=\"text\"\n                            bsSize=\"sm\"\n                            id={\"destination\" + this.props.idx}\n                            key={\"destination\" + this.props.idx}\n                            placeholder=\"Store Name\"\n                            onChange={this.onChange}\n                            onKeyPress={e => {\n                                if (e.key === \"Enter\") {\n                                    this.onSearch(e);\n                                }\n                            }}\n                        />\n                        <InputGroup.Addon>\n                            <Glyphicon glyph=\"search\" onClick={this.onSearch} />\n                        </InputGroup.Addon>\n                    </InputGroup>\n                </FormGroup>\n\n                <ListGroup>{destinations}</ListGroup>\n            </div>\n        );\n    }\n}\n\nexport default PlaceSearch;\n"]},"metadata":{},"sourceType":"module"}