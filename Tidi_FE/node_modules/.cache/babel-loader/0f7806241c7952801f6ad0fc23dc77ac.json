{"ast":null,"code":"import _objectSpread from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/src/pages/products/Products/Products.jsx\";\nimport React, { Component } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport qs from \"query-string\";\nimport \"./Products.scss\";\nimport WebService from \"../../../services/WebService\";\nimport AuthService from \"../../../services/AuthService\";\nimport { ROUTE_NAME } from \"../../../routes/main.routing\";\nimport { showAlert } from \"../../../helpers/lib\";\nimport { withCommas } from \"../../../helpers/lib\";\nimport { QUERY_PARAMS, ACTIVE_TYPE } from \"../../../config/constants\";\nimport SearchPanel from \"../SearchPanel\";\nimport Paginator from \"../../common/Paginator\";\nimport LoadingBar from \"../../common/LoadingBar\";\nvar INTIAL_STATE = {\n  showLoadingBar: false\n};\n\nvar Products =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Products, _Component);\n\n  function Products(props) {\n    var _this;\n\n    _classCallCheck(this, Products);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Products).call(this, props));\n\n    _this.componentDidMount = function () {\n      var params = qs.parse(_this.props.history.location.search);\n      var pageIndex = Number(params.page);\n      var pageSize = Number(params.size);\n\n      _this.retrieveURLParams(params, true);\n\n      if (pageIndex && pageSize && [12, 24, 36].indexOf(pageSize) !== -1) {\n        _this.handleFilterChange({\n          currentPage: pageIndex,\n          pageSize: pageSize\n        });\n      } else {\n        var _this$props = _this.props,\n            currentPage = _this$props.currentPage,\n            _pageSize = _this$props.pageSize; // get defautl\n\n        _this.fetchProducts(currentPage, _pageSize);\n\n        _this.updateURLParams({\n          currentPage: currentPage,\n          pageSize: _pageSize\n        });\n      }\n    };\n\n    _this.componentWillReceiveProps = function (newProps) {\n      var params = qs.parse(newProps.history.location.search);\n\n      _this.retrieveURLParams(params);\n    };\n\n    _this.resetParamsURL = function () {\n      _this.industryIdFromURL = null;\n      _this.branchIdFromURL = null;\n      _this.categoryIdFromURL = null;\n      _this.brandIdFromURL = null;\n      _this.keywordFromURL = null;\n      _this.priceFromURL = null;\n      _this.priceToURL = null;\n      _this.previousParams = null;\n    };\n\n    _this.retrieveURLParams = function (params) {\n      var isOnComponentLoad = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var industryIdFromURL = Number(params.ind);\n      var branchIdFromURL = Number(params.brch);\n      var categoryIdFromURL = Number(params.cat);\n      var brandIdFromURL = Number(params.brd);\n      var keywordFromURL = params.q;\n      var priceFromURL = Number(params.pfrom);\n      var priceToURL = Number(params.pto);\n      var isQueryStringUpdated = false;\n\n      if (industryIdFromURL && industryIdFromURL !== _this.industryIdFromURL) {\n        isQueryStringUpdated = true;\n        _this.industryIdFromURL = industryIdFromURL;\n      } else {\n        _this.industryIdFromURL = null;\n      }\n\n      if (branchIdFromURL && branchIdFromURL !== _this.branchIdFromURL) {\n        isQueryStringUpdated = true;\n        _this.branchIdFromURL = branchIdFromURL;\n      } else _this.branchIdFromURL = null;\n\n      if (categoryIdFromURL && categoryIdFromURL !== _this.categoryIdFromURL) {\n        isQueryStringUpdated = true;\n        _this.categoryIdFromURL = categoryIdFromURL;\n      } else _this.categoryIdFromURL = null;\n\n      if (brandIdFromURL && brandIdFromURL !== _this.brandIdFromURL) {\n        isQueryStringUpdated = true;\n        _this.brandIdFromURL = brandIdFromURL;\n      } else _this.brandIdFromURL = null;\n\n      if (keywordFromURL && keywordFromURL !== _this.keywordFromURL) {\n        isQueryStringUpdated = true;\n        _this.keywordFromURL = keywordFromURL;\n      } else _this.keywordFromURL = null;\n\n      if (priceFromURL && priceToURL && (priceFromURL !== _this.priceFromURL || priceToURL !== _this.priceToURL)) {\n        isQueryStringUpdated = true;\n        _this.priceFromURL = priceFromURL;\n        _this.priceToURL = priceToURL;\n      }\n\n      if (isQueryStringUpdated && !isOnComponentLoad) {\n        console.log(\"UPDATE\");\n\n        _this.fetchProducts(_this.props.currentPage, _this.props.pageSize);\n      }\n    };\n\n    _this.updateURLParams = function (_ref) {\n      var currentPage = _ref.currentPage,\n          pageSize = _ref.pageSize;\n      var searchQuery = \"?size=\".concat(pageSize || _this.props.pageSize, \"&page=\").concat(currentPage || _this.props.currentPage);\n\n      if (_this.brandIdFromURL) {\n        searchQuery += \"&\".concat(QUERY_PARAMS.brandId, \"=\").concat(_this.brandIdFromURL);\n      }\n\n      if (_this.industryIdFromURL) {\n        searchQuery += \"&\".concat(QUERY_PARAMS.industryId, \"=\").concat(_this.industryIdFromURL);\n      }\n\n      if (_this.branchIdFromURL) {\n        searchQuery += \"&\".concat(QUERY_PARAMS.branchId, \"=\").concat(_this.branchIdFromURL);\n      }\n\n      if (_this.categoryIdFromURL) {\n        searchQuery += \"&\".concat(QUERY_PARAMS.categoryId, \"=\").concat(_this.categoryIdFromURL);\n      }\n\n      if (_this.keywordFromURL) {\n        searchQuery += \"&\".concat(QUERY_PARAMS.keyword, \"=\").concat(_this.keywordFromURL);\n      }\n\n      if (_this.priceFromURL && _this.priceToURL) {\n        searchQuery += \"&\".concat(QUERY_PARAMS.minPrice, \"=\").concat(_this.priceFromURL, \"&\").concat(QUERY_PARAMS.maxPrice, \"=\").concat(_this.priceToURL);\n      }\n\n      _this.props.history.push({\n        search: searchQuery\n      });\n    };\n\n    _this.fetchProducts = function (currentPage, pageSize) {\n      var queryObj = {};\n\n      if (_this.brandIdFromURL) {\n        queryObj.brandId = _this.brandIdFromURL;\n      }\n\n      if (_this.industryIdFromURL) {\n        queryObj.industryId = _this.industryIdFromURL;\n      }\n\n      if (_this.branchIdFromURL) {\n        queryObj.branchId = _this.branchIdFromURL;\n      }\n\n      if (_this.categoryIdFromURL) {\n        queryObj.categoryId = _this.categoryIdFromURL;\n      }\n\n      if (_this.keywordFromURL) {\n        queryObj.keyword = _this.keywordFromURL;\n      }\n\n      if (_this.priceFromURL && _this.priceToURL) {\n        queryObj.minPrice = _this.priceFromURL;\n        queryObj.maxPrice = _this.priceToURL;\n      }\n\n      _this.setState({\n        showLoadingBar: true\n      });\n\n      WebService.getAllProducts(pageSize, (currentPage - 1) * pageSize, queryObj).then(function (res) {\n        _this.setState({\n          showLoadingBar: false\n        });\n\n        var result = JSON.parse(res);\n\n        if (result.products) {\n          _this.props.updateProductList(result.products.map(function (prd) {\n            return _objectSpread({}, prd, {\n              images: JSON.parse(prd.images)\n            });\n          }));\n\n          _this.props.changePageInfo({\n            totalItems: result.totalItems\n          });\n        } else {\n          console.log(\" have no products\");\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.fetchCartProducts = function () {\n      var isLoggedIn = _this.props.isLoggedIn;\n\n      if (isLoggedIn) {\n        WebService.getCart(AuthService.getTokenUnsafe()).then(function (res) {\n          var result = JSON.parse(res);\n\n          if (result.status === true) {\n            if (result.products) {\n              result.products.forEach(function (prd) {\n                return prd.images = JSON.parse(prd.images);\n              });\n            }\n\n            _this.props.updateCartProducts(result.products);\n          }\n        });\n      }\n    };\n\n    _this.handleAddProductToCart = function (product) {\n      var _this$props2 = _this.props,\n          isLoggedIn = _this$props2.isLoggedIn,\n          cart = _this$props2.cart;\n\n      if (isLoggedIn) {\n        var currentCartItems = cart.products;\n\n        if (product.id) {\n          var cartItemAmount = 0;\n          currentCartItems.map(function (cartItem) {\n            if (cartItem.id === product.id) {\n              cartItemAmount = cartItem.amount;\n            }\n\n            return null;\n          });\n          cartItemAmount += 1;\n          WebService.addItemToCart(AuthService.getTokenUnsafe(), product.id, cartItemAmount).then(function (r) {\n            var res = JSON.parse(r);\n\n            if (res.status) {\n              showAlert(\"Added \".concat(product.product_name, \" to Cart!\"));\n\n              _this.fetchCartProducts();\n            }\n          });\n        }\n      } else {\n        showAlert(\"You have not logged in yet\", \"error\");\n      }\n    };\n\n    _this.handleFilterChange = function (_ref2) {\n      var currentPage = _ref2.currentPage,\n          pageSize = _ref2.pageSize,\n          totalItems = _ref2.totalItems;\n      var payloadObj = {};\n\n      if (currentPage) {\n        payloadObj.currentPage = currentPage;\n      }\n\n      if (pageSize) {\n        payloadObj.pageSize = Number(pageSize);\n      }\n\n      if (totalItems) {\n        payloadObj.totalItems = totalItems;\n      }\n\n      _this.props.changePageInfo(payloadObj);\n\n      if (pageSize || currentPage) {\n        _this.updateURLParams({\n          currentPage: payloadObj.currentPage,\n          pageSize: payloadObj.pageSize\n        });\n\n        _this.fetchProducts(payloadObj.currentPage || _this.props.currentPage, payloadObj.pageSize || _this.props.pageSize);\n      }\n    };\n\n    _this.generateProducts = function () {\n      var products = _this.props.products;\n      var productsElements = [];\n      console.log(products);\n      products.map(function (product, index) {\n        if (product.active !== ACTIVE_TYPE.FALSE) return productsElements.push(React.createElement(Product // key={product.id}\n        , {\n          key: index,\n          product: product,\n          buttonTitle: \"Add to cart\",\n          onClickHandler: _this.handleAddProductToCart,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }));\n        return null;\n      });\n      return productsElements;\n    };\n\n    _this.render = function () {\n      var showLoadingBar = _this.state.showLoadingBar;\n      var _this$props3 = _this.props,\n          totalItems = _this$props3.totalItems,\n          pageSize = _this$props3.pageSize,\n          currentPage = _this$props3.currentPage;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }, showLoadingBar && React.createElement(LoadingBar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"breadcumb_area bg-img\",\n        style: {\n          backgroundImage: \"url(/img/bg-img/breadcumb.jpg)\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container h-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row h-100 align-items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"page-title text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, \"Products\")))))), React.createElement(\"section\", {\n        className: \"shop_grid_area section-padding-80\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-md-4 col-lg-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, React.createElement(SearchPanel, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"col-12 col-md-8 col-lg-9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"shop_grid_product_area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"product-topbar d-flex align-items-center justify-content-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"total-products\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, totalItems), \" products found\")), React.createElement(\"div\", {\n        className: \"d-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"product-sorting d-flex mr-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, \"Display:\"), React.createElement(\"form\", {\n        action: \"#\",\n        method: \"get\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        name: \"select\",\n        value: pageSize,\n        onChange: function onChange(e) {\n          _this.handleFilterChange({\n            pageSize: e.target.value,\n            currentPage: 1\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, \"12\"), React.createElement(\"option\", {\n        value: 24,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, \"24\"), React.createElement(\"option\", {\n        value: 36,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, \"36\")), React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"d-none\",\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"product-sorting d-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338\n        },\n        __self: this\n      }, \"Sort by:\"), React.createElement(\"form\", {\n        action: \"#\",\n        method: \"get\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        name: \"select\",\n        id: \"sortByselect\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341\n        },\n        __self: this\n      }, \"Highest Rated\"), React.createElement(\"option\", {\n        value: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342\n        },\n        __self: this\n      }, \"Newest\"), React.createElement(\"option\", {\n        value: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343\n        },\n        __self: this\n      }, \"Price: $$ - $\"), React.createElement(\"option\", {\n        value: \"value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, \"Price: $ - $$\")), React.createElement(\"input\", {\n        type: \"submit\",\n        className: \"d-none\",\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      }))))))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355\n        },\n        __self: this\n      }, _this.generateProducts())), React.createElement(Paginator, {\n        handlePageChange: function handlePageChange(currentPage) {\n          _this.handleFilterChange({\n            currentPage: currentPage\n          });\n        },\n        currentPage: currentPage,\n        pageSize: pageSize,\n        totalItems: totalItems,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }))))));\n    };\n\n    _this.state = INTIAL_STATE;\n    return _this;\n  }\n\n  return Products;\n}(Component);\n\nProducts.propTypes = {\n  currentPage: PropTypes.number,\n  pageSize: PropTypes.number,\n  totalItems: PropTypes.number,\n  isLoggedIn: PropTypes.bool,\n  updateCartProducts: PropTypes.func,\n  cart: PropTypes.shape({\n    cart: PropTypes.array\n  }),\n  products: PropTypes.array\n};\n\nvar Product =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(Product, _Component2);\n\n  function Product() {\n    var _getPrototypeOf2;\n\n    var _this2;\n\n    _classCallCheck(this, Product);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Product)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this2.render = function () {\n      var _this2$props = _this2.props,\n          product = _this2$props.product,\n          onClickHandler = _this2$props.onClickHandler,\n          buttonTitle = _this2$props.buttonTitle;\n      if (!product) return \"\";\n      var discountedPrice = Math.round(product.price - product.price * product.discPercent);\n      return React.createElement(\"div\", {\n        className: \"col-12 col-sm-6 col-lg-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"single-product-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"product-img\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: ROUTE_NAME.PRODUCT_DETAIL + \"/\" + product.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: product.images[0],\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393\n        },\n        __self: this\n      }), product.images[1] && React.createElement(\"img\", {\n        className: \"hover-img\",\n        src: product.images[1],\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395\n        },\n        __self: this\n      })), product.discPercent !== 0 && React.createElement(\"div\", {\n        className: \"product-badge offer-badge\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401\n        },\n        __self: this\n      }, \"-\" + Math.round(product.discPercent * 100) + \"%\")), React.createElement(\"div\", {\n        className: \"product-favourite\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 406\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: \"/\",\n        className: \"favme fa fa-heart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"product-description\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415\n        },\n        __self: this\n      }, product.category.category_name), React.createElement(Link, {\n        to: ROUTE_NAME.PRODUCT_DETAIL + \"/\" + product.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 416\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 417\n        },\n        __self: this\n      }, product.product_name)), React.createElement(\"p\", {\n        className: \"product-price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419\n        },\n        __self: this\n      }, product.discPercent !== 0 && React.createElement(\"span\", {\n        className: \"old-price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420\n        },\n        __self: this\n      }, withCommas(product.price) + \" ₫\"), withCommas(discountedPrice) + \" ₫\"), React.createElement(\"div\", {\n        className: \"hover-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"add-to-cart-btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn essence-btn\",\n        onClick: function onClick() {\n          return onClickHandler(product);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428\n        },\n        __self: this\n      }, buttonTitle))))));\n    };\n\n    return _this2;\n  }\n\n  return Product;\n}(Component);\n\nProduct.propTypes = {\n  product: PropTypes.shape({\n    images: PropTypes.array\n  }),\n  buttonTitle: PropTypes.string\n};\nexport default withRouter(Products);","map":{"version":3,"sources":["/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/src/pages/products/Products/Products.jsx"],"names":["React","Component","withRouter","Link","PropTypes","qs","WebService","AuthService","ROUTE_NAME","showAlert","withCommas","QUERY_PARAMS","ACTIVE_TYPE","SearchPanel","Paginator","LoadingBar","INTIAL_STATE","showLoadingBar","Products","props","componentDidMount","params","parse","history","location","search","pageIndex","Number","page","pageSize","size","retrieveURLParams","indexOf","handleFilterChange","currentPage","fetchProducts","updateURLParams","componentWillReceiveProps","newProps","resetParamsURL","industryIdFromURL","branchIdFromURL","categoryIdFromURL","brandIdFromURL","keywordFromURL","priceFromURL","priceToURL","previousParams","isOnComponentLoad","ind","brch","cat","brd","q","pfrom","pto","isQueryStringUpdated","console","log","searchQuery","brandId","industryId","branchId","categoryId","keyword","minPrice","maxPrice","push","queryObj","setState","getAllProducts","then","res","result","JSON","products","updateProductList","map","prd","images","changePageInfo","totalItems","catch","err","fetchCartProducts","isLoggedIn","getCart","getTokenUnsafe","status","forEach","updateCartProducts","handleAddProductToCart","product","cart","currentCartItems","id","cartItemAmount","cartItem","amount","addItemToCart","r","product_name","payloadObj","generateProducts","productsElements","index","active","FALSE","render","state","backgroundImage","e","target","value","propTypes","number","bool","func","shape","array","Product","onClickHandler","buttonTitle","discountedPrice","Math","round","price","discPercent","PRODUCT_DETAIL","category","category_name","string"],"mappings":";;;;;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,kBAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,EAAP,MAAe,cAAf;AACA,OAAO,iBAAP;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,SAASC,UAAT,QAA2B,8BAA3B;AACA,SAASC,SAAT,QAA0B,sBAA1B;AACA,SAASC,UAAT,QAA2B,sBAA3B;AACA,SAASC,YAAT,EAAuBC,WAAvB,QAA0C,2BAA1C;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;AAEA,IAAMC,YAAY,GAAG;AACjBC,EAAAA,cAAc,EAAE;AADC,CAArB;;IAIMC,Q;;;;;AAaF,oBAAYC,KAAZ,EAAwB;AAAA;;AAAA;;AACpB,kFAAMA,KAAN;;AADoB,UAKxBC,iBALwB,GAKJ,YAAM;AACtB,UAAMC,MAAM,GAAGhB,EAAE,CAACiB,KAAH,CAAS,MAAKH,KAAL,CAAWI,OAAX,CAAmBC,QAAnB,CAA4BC,MAArC,CAAf;AACA,UAAMC,SAAS,GAAGC,MAAM,CAACN,MAAM,CAACO,IAAR,CAAxB;AACA,UAAMC,QAAQ,GAAGF,MAAM,CAACN,MAAM,CAACS,IAAR,CAAvB;;AACA,YAAKC,iBAAL,CAAuBV,MAAvB,EAA+B,IAA/B;;AACA,UAAIK,SAAS,IAAIG,QAAb,IAAyB,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAaG,OAAb,CAAqBH,QAArB,MAAmC,CAAC,CAAjE,EAAoE;AAChE,cAAKI,kBAAL,CAAwB;AACpBC,UAAAA,WAAW,EAAER,SADO;AAEpBG,UAAAA,QAAQ,EAAEA;AAFU,SAAxB;AAIH,OALD,MAKO;AAAA,0BAC+B,MAAKV,KADpC;AAAA,YACKe,WADL,eACKA,WADL;AAAA,YACkBL,SADlB,eACkBA,QADlB,EAC2C;;AAC9C,cAAKM,aAAL,CAAmBD,WAAnB,EAAgCL,SAAhC;;AACA,cAAKO,eAAL,CAAqB;AACjBF,UAAAA,WAAW,EAAEA,WADI;AAEjBL,UAAAA,QAAQ,EAAEA;AAFO,SAArB;AAIH;AACJ,KAvBuB;;AAAA,UAyBxBQ,yBAzBwB,GAyBI,UAAAC,QAAQ,EAAI;AACpC,UAAMjB,MAAM,GAAGhB,EAAE,CAACiB,KAAH,CAASgB,QAAQ,CAACf,OAAT,CAAiBC,QAAjB,CAA0BC,MAAnC,CAAf;;AACA,YAAKM,iBAAL,CAAuBV,MAAvB;AACH,KA5BuB;;AAAA,UA8BxBkB,cA9BwB,GA8BP,YAAM;AACnB,YAAKC,iBAAL,GAAyB,IAAzB;AACA,YAAKC,eAAL,GAAuB,IAAvB;AACA,YAAKC,iBAAL,GAAyB,IAAzB;AACA,YAAKC,cAAL,GAAsB,IAAtB;AACA,YAAKC,cAAL,GAAsB,IAAtB;AACA,YAAKC,YAAL,GAAoB,IAApB;AACA,YAAKC,UAAL,GAAkB,IAAlB;AACA,YAAKC,cAAL,GAAsB,IAAtB;AACH,KAvCuB;;AAAA,UAwCxBhB,iBAxCwB,GAwCJ,UAACV,MAAD,EAAuC;AAAA,UAA9B2B,iBAA8B,uEAAV,KAAU;AACvD,UAAMR,iBAAiB,GAAGb,MAAM,CAACN,MAAM,CAAC4B,GAAR,CAAhC;AACA,UAAMR,eAAe,GAAGd,MAAM,CAACN,MAAM,CAAC6B,IAAR,CAA9B;AACA,UAAMR,iBAAiB,GAAGf,MAAM,CAACN,MAAM,CAAC8B,GAAR,CAAhC;AACA,UAAMR,cAAc,GAAGhB,MAAM,CAACN,MAAM,CAAC+B,GAAR,CAA7B;AACA,UAAMR,cAAc,GAAGvB,MAAM,CAACgC,CAA9B;AACA,UAAMR,YAAY,GAAGlB,MAAM,CAACN,MAAM,CAACiC,KAAR,CAA3B;AACA,UAAMR,UAAU,GAAGnB,MAAM,CAACN,MAAM,CAACkC,GAAR,CAAzB;AAEA,UAAIC,oBAAoB,GAAG,KAA3B;;AAEA,UAAIhB,iBAAiB,IAAIA,iBAAiB,KAAK,MAAKA,iBAApD,EAAuE;AACnEgB,QAAAA,oBAAoB,GAAG,IAAvB;AACA,cAAKhB,iBAAL,GAAyBA,iBAAzB;AACH,OAHD,MAGO;AACH,cAAKA,iBAAL,GAAyB,IAAzB;AACH;;AACD,UAAIC,eAAe,IAAIA,eAAe,KAAK,MAAKA,eAAhD,EAAiE;AAC7De,QAAAA,oBAAoB,GAAG,IAAvB;AACA,cAAKf,eAAL,GAAuBA,eAAvB;AACH,OAHD,MAGO,MAAKA,eAAL,GAAuB,IAAvB;;AACP,UAAIC,iBAAiB,IAAIA,iBAAiB,KAAK,MAAKA,iBAApD,EAAuE;AACnEc,QAAAA,oBAAoB,GAAG,IAAvB;AACA,cAAKd,iBAAL,GAAyBA,iBAAzB;AACH,OAHD,MAGO,MAAKA,iBAAL,GAAyB,IAAzB;;AACP,UAAIC,cAAc,IAAIA,cAAc,KAAK,MAAKA,cAA9C,EAA8D;AAC1Da,QAAAA,oBAAoB,GAAG,IAAvB;AACA,cAAKb,cAAL,GAAsBA,cAAtB;AACH,OAHD,MAGO,MAAKA,cAAL,GAAsB,IAAtB;;AACP,UAAIC,cAAc,IAAIA,cAAc,KAAK,MAAKA,cAA9C,EAA8D;AAC1DY,QAAAA,oBAAoB,GAAG,IAAvB;AACA,cAAKZ,cAAL,GAAsBA,cAAtB;AACH,OAHD,MAGO,MAAKA,cAAL,GAAsB,IAAtB;;AAEP,UAAIC,YAAY,IAAIC,UAAhB,KAA+BD,YAAY,KAAK,MAAKA,YAAtB,IAAsCC,UAAU,KAAK,MAAKA,UAAzF,CAAJ,EAA0G;AACtGU,QAAAA,oBAAoB,GAAG,IAAvB;AACA,cAAKX,YAAL,GAAoBA,YAApB;AACA,cAAKC,UAAL,GAAkBA,UAAlB;AACH;;AAED,UAAIU,oBAAoB,IAAI,CAACR,iBAA7B,EAAgD;AAC5CS,QAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;;AACA,cAAKvB,aAAL,CAAmB,MAAKhB,KAAL,CAAWe,WAA9B,EAA2C,MAAKf,KAAL,CAAWU,QAAtD;AACH;AACJ,KApFuB;;AAAA,UAsFxBO,eAtFwB,GAsFN,gBAA+B;AAAA,UAA5BF,WAA4B,QAA5BA,WAA4B;AAAA,UAAfL,QAAe,QAAfA,QAAe;AAC7C,UAAI8B,WAAW,mBAAY9B,QAAQ,IAAI,MAAKV,KAAL,CAAWU,QAAnC,mBAAoDK,WAAW,IAAI,MAAKf,KAAL,CAAWe,WAA9E,CAAf;;AAEA,UAAI,MAAKS,cAAT,EAAyB;AACrBgB,QAAAA,WAAW,eAAQhD,YAAY,CAACiD,OAArB,cAAgC,MAAKjB,cAArC,CAAX;AACH;;AACD,UAAI,MAAKH,iBAAT,EAA4B;AACxBmB,QAAAA,WAAW,eAAQhD,YAAY,CAACkD,UAArB,cAAmC,MAAKrB,iBAAxC,CAAX;AACH;;AACD,UAAI,MAAKC,eAAT,EAA0B;AACtBkB,QAAAA,WAAW,eAAQhD,YAAY,CAACmD,QAArB,cAAiC,MAAKrB,eAAtC,CAAX;AACH;;AACD,UAAI,MAAKC,iBAAT,EAA4B;AACxBiB,QAAAA,WAAW,eAAQhD,YAAY,CAACoD,UAArB,cAAmC,MAAKrB,iBAAxC,CAAX;AACH;;AACD,UAAI,MAAKE,cAAT,EAAyB;AACrBe,QAAAA,WAAW,eAAQhD,YAAY,CAACqD,OAArB,cAAgC,MAAKpB,cAArC,CAAX;AACH;;AACD,UAAI,MAAKC,YAAL,IAAqB,MAAKC,UAA9B,EAA0C;AACtCa,QAAAA,WAAW,eAAQhD,YAAY,CAACsD,QAArB,cAAiC,MAAKpB,YAAtC,cAAsDlC,YAAY,CAACuD,QAAnE,cAA+E,MAAKpB,UAApF,CAAX;AACH;;AAED,YAAK3B,KAAL,CAAWI,OAAX,CAAmB4C,IAAnB,CAAwB;AACpB1C,QAAAA,MAAM,EAAEkC;AADY,OAAxB;AAGH,KA/GuB;;AAAA,UAiHxBxB,aAjHwB,GAiHR,UAACD,WAAD,EAAcL,QAAd,EAA2B;AACvC,UAAMuC,QAAQ,GAAG,EAAjB;;AAEA,UAAI,MAAKzB,cAAT,EAAyB;AACrByB,QAAAA,QAAQ,CAACR,OAAT,GAAmB,MAAKjB,cAAxB;AACH;;AACD,UAAI,MAAKH,iBAAT,EAA4B;AACxB4B,QAAAA,QAAQ,CAACP,UAAT,GAAsB,MAAKrB,iBAA3B;AACH;;AACD,UAAI,MAAKC,eAAT,EAA0B;AACtB2B,QAAAA,QAAQ,CAACN,QAAT,GAAoB,MAAKrB,eAAzB;AACH;;AACD,UAAI,MAAKC,iBAAT,EAA4B;AACxB0B,QAAAA,QAAQ,CAACL,UAAT,GAAsB,MAAKrB,iBAA3B;AACH;;AACD,UAAI,MAAKE,cAAT,EAAyB;AACrBwB,QAAAA,QAAQ,CAACJ,OAAT,GAAmB,MAAKpB,cAAxB;AACH;;AACD,UAAI,MAAKC,YAAL,IAAqB,MAAKC,UAA9B,EAA0C;AACtCsB,QAAAA,QAAQ,CAACH,QAAT,GAAoB,MAAKpB,YAAzB;AACAuB,QAAAA,QAAQ,CAACF,QAAT,GAAoB,MAAKpB,UAAzB;AACH;;AACD,YAAKuB,QAAL,CAAc;AACVpD,QAAAA,cAAc,EAAE;AADN,OAAd;;AAGAX,MAAAA,UAAU,CAACgE,cAAX,CAA0BzC,QAA1B,EAAoC,CAACK,WAAW,GAAG,CAAf,IAAoBL,QAAxD,EAAkEuC,QAAlE,EACKG,IADL,CACU,UAAAC,GAAG,EAAI;AACT,cAAKH,QAAL,CAAc;AACVpD,UAAAA,cAAc,EAAE;AADN,SAAd;;AAGA,YAAMwD,MAAM,GAAGC,IAAI,CAACpD,KAAL,CAAWkD,GAAX,CAAf;;AACA,YAAIC,MAAM,CAACE,QAAX,EAAqB;AACjB,gBAAKxD,KAAL,CAAWyD,iBAAX,CAA6BH,MAAM,CAACE,QAAP,CAAgBE,GAAhB,CAAoB,UAAAC,GAAG;AAAA,qCAAUA,GAAV;AAAeC,cAAAA,MAAM,EAAEL,IAAI,CAACpD,KAAL,CAAWwD,GAAG,CAACC,MAAf;AAAvB;AAAA,WAAvB,CAA7B;;AACA,gBAAK5D,KAAL,CAAW6D,cAAX,CAA0B;AAAEC,YAAAA,UAAU,EAAER,MAAM,CAACQ;AAArB,WAA1B;AACH,SAHD,MAGO;AACHxB,UAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACH;AACJ,OAZL,EAaKwB,KAbL,CAaW,UAAAC,GAAG,EAAI;AACV1B,QAAAA,OAAO,CAACC,GAAR,CAAYyB,GAAZ;AACH,OAfL;AAgBH,KA1JuB;;AAAA,UA4JxBC,iBA5JwB,GA4JJ,YAAM;AAAA,UACdC,UADc,GACC,MAAKlE,KADN,CACdkE,UADc;;AAEtB,UAAIA,UAAJ,EAAgB;AACZ/E,QAAAA,UAAU,CAACgF,OAAX,CAAmB/E,WAAW,CAACgF,cAAZ,EAAnB,EAAiDhB,IAAjD,CAAsD,UAAAC,GAAG,EAAI;AACzD,cAAMC,MAAM,GAAGC,IAAI,CAACpD,KAAL,CAAWkD,GAAX,CAAf;;AACA,cAAIC,MAAM,CAACe,MAAP,KAAkB,IAAtB,EAA4B;AACxB,gBAAIf,MAAM,CAACE,QAAX,EAAqB;AACjBF,cAAAA,MAAM,CAACE,QAAP,CAAgBc,OAAhB,CAAwB,UAAAX,GAAG;AAAA,uBAAKA,GAAG,CAACC,MAAJ,GAAaL,IAAI,CAACpD,KAAL,CAAWwD,GAAG,CAACC,MAAf,CAAlB;AAAA,eAA3B;AACH;;AACD,kBAAK5D,KAAL,CAAWuE,kBAAX,CAA8BjB,MAAM,CAACE,QAArC;AACH;AACJ,SARD;AASH;AACJ,KAzKuB;;AAAA,UA2KxBgB,sBA3KwB,GA2KC,UAAAC,OAAO,EAAI;AAAA,yBACH,MAAKzE,KADF;AAAA,UACxBkE,UADwB,gBACxBA,UADwB;AAAA,UACZQ,IADY,gBACZA,IADY;;AAEhC,UAAIR,UAAJ,EAAgB;AACZ,YAAMS,gBAAgB,GAAGD,IAAI,CAAClB,QAA9B;;AACA,YAAIiB,OAAO,CAACG,EAAZ,EAAgB;AACZ,cAAIC,cAAc,GAAG,CAArB;AACAF,UAAAA,gBAAgB,CAACjB,GAAjB,CAAqB,UAAAoB,QAAQ,EAAI;AAC7B,gBAAIA,QAAQ,CAACF,EAAT,KAAgBH,OAAO,CAACG,EAA5B,EAAgC;AAC5BC,cAAAA,cAAc,GAAGC,QAAQ,CAACC,MAA1B;AACH;;AACD,mBAAO,IAAP;AACH,WALD;AAMAF,UAAAA,cAAc,IAAI,CAAlB;AACA1F,UAAAA,UAAU,CAAC6F,aAAX,CAAyB5F,WAAW,CAACgF,cAAZ,EAAzB,EAAuDK,OAAO,CAACG,EAA/D,EAAmEC,cAAnE,EAAmFzB,IAAnF,CAAwF,UAAA6B,CAAC,EAAI;AACzF,gBAAM5B,GAAG,GAAGE,IAAI,CAACpD,KAAL,CAAW8E,CAAX,CAAZ;;AACA,gBAAI5B,GAAG,CAACgB,MAAR,EAAgB;AACZ/E,cAAAA,SAAS,iBAAUmF,OAAO,CAACS,YAAlB,eAAT;;AACA,oBAAKjB,iBAAL;AACH;AACJ,WAND;AAOH;AACJ,OAnBD,MAmBO;AACH3E,QAAAA,SAAS,CAAC,4BAAD,EAA+B,OAA/B,CAAT;AACH;AACJ,KAnMuB;;AAAA,UAqMxBwB,kBArMwB,GAqMH,iBAA2C;AAAA,UAAxCC,WAAwC,SAAxCA,WAAwC;AAAA,UAA3BL,QAA2B,SAA3BA,QAA2B;AAAA,UAAjBoD,UAAiB,SAAjBA,UAAiB;AAC5D,UAAIqB,UAAU,GAAG,EAAjB;;AAEA,UAAIpE,WAAJ,EAAiB;AACboE,QAAAA,UAAU,CAACpE,WAAX,GAAyBA,WAAzB;AACH;;AAED,UAAIL,QAAJ,EAAc;AACVyE,QAAAA,UAAU,CAACzE,QAAX,GAAsBF,MAAM,CAACE,QAAD,CAA5B;AACH;;AAED,UAAIoD,UAAJ,EAAgB;AACZqB,QAAAA,UAAU,CAACrB,UAAX,GAAwBA,UAAxB;AACH;;AAED,YAAK9D,KAAL,CAAW6D,cAAX,CAA0BsB,UAA1B;;AACA,UAAIzE,QAAQ,IAAIK,WAAhB,EAA6B;AACzB,cAAKE,eAAL,CAAqB;AACjBF,UAAAA,WAAW,EAAEoE,UAAU,CAACpE,WADP;AAEjBL,UAAAA,QAAQ,EAAEyE,UAAU,CAACzE;AAFJ,SAArB;;AAKA,cAAKM,aAAL,CAAmBmE,UAAU,CAACpE,WAAX,IAA0B,MAAKf,KAAL,CAAWe,WAAxD,EAAqEoE,UAAU,CAACzE,QAAX,IAAuB,MAAKV,KAAL,CAAWU,QAAvG;AACH;AACJ,KA7NuB;;AAAA,UA+NxB0E,gBA/NwB,GA+NL,YAAM;AAAA,UACb5B,QADa,GACA,MAAKxD,KADL,CACbwD,QADa;AAErB,UAAM6B,gBAAgB,GAAG,EAAzB;AACA/C,MAAAA,OAAO,CAACC,GAAR,CAAYiB,QAAZ;AACAA,MAAAA,QAAQ,CAACE,GAAT,CAAa,UAACe,OAAD,EAAUa,KAAV,EAAoB;AAC7B,YAAIb,OAAO,CAACc,MAAR,KAAmB9F,WAAW,CAAC+F,KAAnC,EACI,OAAOH,gBAAgB,CAACrC,IAAjB,CACH,oBAAC,OAAD,CACI;AADJ;AAEI,UAAA,GAAG,EAAEsC,KAFT;AAGI,UAAA,OAAO,EAAEb,OAHb;AAII,UAAA,WAAW,EAAC,aAJhB;AAKI,UAAA,cAAc,EAAE,MAAKD,sBALzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADG,CAAP;AASJ,eAAO,IAAP;AACH,OAZD;AAcA,aAAOa,gBAAP;AACH,KAlPuB;;AAAA,UAoPxBI,MApPwB,GAoPf,YAAM;AAAA,UACH3F,cADG,GACgB,MAAK4F,KADrB,CACH5F,cADG;AAAA,yBAEmC,MAAKE,KAFxC;AAAA,UAEH8D,UAFG,gBAEHA,UAFG;AAAA,UAESpD,QAFT,gBAESA,QAFT;AAAA,UAEmBK,WAFnB,gBAEmBA,WAFnB;AAGX,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKjB,cAAc,IAAI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADvB,EAGI;AAAK,QAAA,SAAS,EAAC,uBAAf;AAAuC,QAAA,KAAK,EAAE;AAAE6F,UAAAA,eAAe,EAAE;AAAnB,SAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,8BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,CADJ,CADJ,CADJ,CADJ,CAHJ,EAiBI;AAAS,QAAA,SAAS,EAAC,mCAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,EAKI;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,kEAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO7B,UAAP,CADJ,oBADJ,CAFJ,EAOI;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAK,QAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI;AAAM,QAAA,MAAM,EAAC,GAAb;AAAiB,QAAA,MAAM,EAAC,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AACI,QAAA,IAAI,EAAC,QADT;AAEI,QAAA,KAAK,EAAEpD,QAFX;AAGI,QAAA,QAAQ,EAAE,kBAAAkF,CAAC,EAAI;AACX,gBAAK9E,kBAAL,CAAwB;AAAEJ,YAAAA,QAAQ,EAAEkF,CAAC,CAACC,MAAF,CAASC,KAArB;AAA4B/E,YAAAA,WAAW,EAAE;AAAzC,WAAxB;AACH,SALL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAOI;AAAQ,QAAA,KAAK,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPJ,EAQI;AAAQ,QAAA,KAAK,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cARJ,EASI;AAAQ,QAAA,KAAK,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cATJ,CADJ,EAYI;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,QAA/B;AAAwC,QAAA,KAAK,EAAC,EAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAZJ,CAFJ,CAFJ,EAoBI;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,EAEI;AAAM,QAAA,MAAM,EAAC,GAAb;AAAiB,QAAA,MAAM,EAAC,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,EAAE,EAAC,cAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,EAEI;AAAQ,QAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,EAGI;AAAQ,QAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAHJ,EAII;AAAQ,QAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAJJ,CADJ,EAOI;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,SAAS,EAAC,QAA/B;AAAwC,QAAA,KAAK,EAAC,EAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPJ,CAFJ,CApBJ,CAPJ,CADJ,CADJ,CADJ,EAgDI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAsB,MAAKqE,gBAAL,EAAtB,CAhDJ,CADJ,EAmDI,oBAAC,SAAD;AACI,QAAA,gBAAgB,EAAE,0BAAArE,WAAW,EAAI;AAC7B,gBAAKD,kBAAL,CAAwB;AAAEC,YAAAA,WAAW,EAAXA;AAAF,WAAxB;AACH,SAHL;AAII,QAAA,WAAW,EAAEA,WAJjB;AAKI,QAAA,QAAQ,EAAEL,QALd;AAMI,QAAA,UAAU,EAAEoD,UANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAnDJ,CALJ,CADJ,CADJ,CAjBJ,CADJ;AA2FH,KAlVuB;;AAEpB,UAAK4B,KAAL,GAAa7F,YAAb;AAFoB;AAGvB;;;EAhBkBf,S;;AAAjBiB,Q,CACKgG,S,GAAY;AACfhF,EAAAA,WAAW,EAAE9B,SAAS,CAAC+G,MADR;AAEftF,EAAAA,QAAQ,EAAEzB,SAAS,CAAC+G,MAFL;AAGflC,EAAAA,UAAU,EAAE7E,SAAS,CAAC+G,MAHP;AAIf9B,EAAAA,UAAU,EAAEjF,SAAS,CAACgH,IAJP;AAKf1B,EAAAA,kBAAkB,EAAEtF,SAAS,CAACiH,IALf;AAMfxB,EAAAA,IAAI,EAAEzF,SAAS,CAACkH,KAAV,CAAgB;AAClBzB,IAAAA,IAAI,EAAEzF,SAAS,CAACmH;AADE,GAAhB,CANS;AASf5C,EAAAA,QAAQ,EAAEvE,SAAS,CAACmH;AATL,C;;IAiWjBC,O;;;;;;;;;;;;;;;;;;WAQFZ,M,GAAS,YAAM;AAAA,yBACsC,OAAKzF,KAD3C;AAAA,UACHyE,OADG,gBACHA,OADG;AAAA,UACM6B,cADN,gBACMA,cADN;AAAA,UACsBC,WADtB,gBACsBA,WADtB;AAEX,UAAI,CAAC9B,OAAL,EAAc,OAAO,EAAP;AACd,UAAM+B,eAAe,GAAGC,IAAI,CAACC,KAAL,CAAWjC,OAAO,CAACkC,KAAR,GAAgBlC,OAAO,CAACkC,KAAR,GAAgBlC,OAAO,CAACmC,WAAnD,CAAxB;AACA,aACI;AAAK,QAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAEvH,UAAU,CAACwH,cAAX,GAA4B,GAA5B,GAAkCpC,OAAO,CAACG,EAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,GAAG,EAAEH,OAAO,CAACb,MAAR,CAAe,CAAf,CAAV;AAA6B,QAAA,GAAG,EAAC,EAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAGKa,OAAO,CAACb,MAAR,CAAe,CAAf,KAAqB;AAAK,QAAA,SAAS,EAAC,WAAf;AAA2B,QAAA,GAAG,EAAEa,OAAO,CAACb,MAAR,CAAe,CAAf,CAAhC;AAAmD,QAAA,GAAG,EAAC,EAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAH1B,CADJ,EAQKa,OAAO,CAACmC,WAAR,KAAwB,CAAxB,IACG;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO,MAAMH,IAAI,CAACC,KAAL,CAAWjC,OAAO,CAACmC,WAAR,GAAsB,GAAjC,CAAN,GAA8C,GAArD,CADJ,CATR,EAeI;AAAK,QAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAG,QAAA,IAAI,EAAC,GAAR;AAAY,QAAA,SAAS,EAAC,mBAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CADJ,CAfJ,CAFJ,EAyBI;AAAK,QAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAOnC,OAAO,CAACqC,QAAR,CAAiBC,aAAxB,CADJ,EAEI,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAE1H,UAAU,CAACwH,cAAX,GAA4B,GAA5B,GAAkCpC,OAAO,CAACG,EAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKH,OAAO,CAACS,YAAb,CADJ,CAFJ,EAKI;AAAG,QAAA,SAAS,EAAC,eAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKT,OAAO,CAACmC,WAAR,KAAwB,CAAxB,IAA6B;AAAM,QAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA6BrH,UAAU,CAACkF,OAAO,CAACkC,KAAT,CAAV,GAA4B,IAAzD,CADlC,EAEKpH,UAAU,CAACiH,eAAD,CAAV,GAA8B,IAFnC,CALJ,EAWI;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,SAAS,EAAC,iBAAlB;AAAoC,QAAA,OAAO,EAAE;AAAA,iBAAMF,cAAc,CAAC7B,OAAD,CAApB;AAAA,SAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK8B,WADL,CADJ,CAFJ,CAXJ,CAzBJ,CADJ,CADJ;AAkDH,K;;;;;;EA9DiBzH,S;;AAAhBuH,O,CACKN,S,GAAY;AACftB,EAAAA,OAAO,EAAExF,SAAS,CAACkH,KAAV,CAAgB;AACrBvC,IAAAA,MAAM,EAAE3E,SAAS,CAACmH;AADG,GAAhB,CADM;AAIfG,EAAAA,WAAW,EAAEtH,SAAS,CAAC+H;AAJR,C;AAgEvB,eAAejI,UAAU,CAACgB,QAAD,CAAzB","sourcesContent":["// @flow\nimport React, { Component } from \"react\";\nimport { withRouter, Link } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport qs from \"query-string\";\nimport \"./Products.scss\";\nimport WebService from \"../../../services/WebService\";\nimport AuthService from \"../../../services/AuthService\";\nimport { ROUTE_NAME } from \"../../../routes/main.routing\";\nimport { showAlert } from \"../../../helpers/lib\";\nimport { withCommas } from \"../../../helpers/lib\";\nimport { QUERY_PARAMS, ACTIVE_TYPE } from \"../../../config/constants\";\nimport SearchPanel from \"../SearchPanel\";\nimport Paginator from \"../../common/Paginator\";\nimport LoadingBar from \"../../common/LoadingBar\";\n\nconst INTIAL_STATE = {\n    showLoadingBar: false\n};\n\nclass Products extends Component {\n    static propTypes = {\n        currentPage: PropTypes.number,\n        pageSize: PropTypes.number,\n        totalItems: PropTypes.number,\n        isLoggedIn: PropTypes.bool,\n        updateCartProducts: PropTypes.func,\n        cart: PropTypes.shape({\n            cart: PropTypes.array\n        }),\n        products: PropTypes.array\n    };\n\n    constructor(props: any) {\n        super(props);\n        this.state = INTIAL_STATE;\n    }\n\n    componentDidMount = () => {\n        const params = qs.parse(this.props.history.location.search);\n        const pageIndex = Number(params.page);\n        const pageSize = Number(params.size);\n        this.retrieveURLParams(params, true);\n        if (pageIndex && pageSize && [12, 24, 36].indexOf(pageSize) !== -1) {\n            this.handleFilterChange({\n                currentPage: pageIndex,\n                pageSize: pageSize\n            });\n        } else {\n            const { currentPage, pageSize } = this.props; // get defautl\n            this.fetchProducts(currentPage, pageSize);\n            this.updateURLParams({\n                currentPage: currentPage,\n                pageSize: pageSize\n            });\n        }\n    };\n\n    componentWillReceiveProps = newProps => {\n        const params = qs.parse(newProps.history.location.search);\n        this.retrieveURLParams(params);\n    };\n\n    resetParamsURL = () => {\n        this.industryIdFromURL = null;\n        this.branchIdFromURL = null;\n        this.categoryIdFromURL = null;\n        this.brandIdFromURL = null;\n        this.keywordFromURL = null;\n        this.priceFromURL = null;\n        this.priceToURL = null;\n        this.previousParams = null;\n    };\n    retrieveURLParams = (params, isOnComponentLoad = false) => {\n        const industryIdFromURL = Number(params.ind);\n        const branchIdFromURL = Number(params.brch);\n        const categoryIdFromURL = Number(params.cat);\n        const brandIdFromURL = Number(params.brd);\n        const keywordFromURL = params.q;\n        const priceFromURL = Number(params.pfrom);\n        const priceToURL = Number(params.pto);\n\n        let isQueryStringUpdated = false;\n\n        if (industryIdFromURL && industryIdFromURL !== this.industryIdFromURL) {\n            isQueryStringUpdated = true;\n            this.industryIdFromURL = industryIdFromURL;\n        } else {\n            this.industryIdFromURL = null;\n        }\n        if (branchIdFromURL && branchIdFromURL !== this.branchIdFromURL) {\n            isQueryStringUpdated = true;\n            this.branchIdFromURL = branchIdFromURL;\n        } else this.branchIdFromURL = null;\n        if (categoryIdFromURL && categoryIdFromURL !== this.categoryIdFromURL) {\n            isQueryStringUpdated = true;\n            this.categoryIdFromURL = categoryIdFromURL;\n        } else this.categoryIdFromURL = null;\n        if (brandIdFromURL && brandIdFromURL !== this.brandIdFromURL) {\n            isQueryStringUpdated = true;\n            this.brandIdFromURL = brandIdFromURL;\n        } else this.brandIdFromURL = null;\n        if (keywordFromURL && keywordFromURL !== this.keywordFromURL) {\n            isQueryStringUpdated = true;\n            this.keywordFromURL = keywordFromURL;\n        } else this.keywordFromURL = null;\n\n        if (priceFromURL && priceToURL && (priceFromURL !== this.priceFromURL || priceToURL !== this.priceToURL)) {\n            isQueryStringUpdated = true;\n            this.priceFromURL = priceFromURL;\n            this.priceToURL = priceToURL;\n        }\n\n        if (isQueryStringUpdated && !isOnComponentLoad) {\n            console.log(\"UPDATE\");\n            this.fetchProducts(this.props.currentPage, this.props.pageSize);\n        }\n    };\n\n    updateURLParams = ({ currentPage, pageSize }) => {\n        let searchQuery = `?size=${pageSize || this.props.pageSize}&page=${currentPage || this.props.currentPage}`;\n\n        if (this.brandIdFromURL) {\n            searchQuery += `&${QUERY_PARAMS.brandId}=${this.brandIdFromURL}`;\n        }\n        if (this.industryIdFromURL) {\n            searchQuery += `&${QUERY_PARAMS.industryId}=${this.industryIdFromURL}`;\n        }\n        if (this.branchIdFromURL) {\n            searchQuery += `&${QUERY_PARAMS.branchId}=${this.branchIdFromURL}`;\n        }\n        if (this.categoryIdFromURL) {\n            searchQuery += `&${QUERY_PARAMS.categoryId}=${this.categoryIdFromURL}`;\n        }\n        if (this.keywordFromURL) {\n            searchQuery += `&${QUERY_PARAMS.keyword}=${this.keywordFromURL}`;\n        }\n        if (this.priceFromURL && this.priceToURL) {\n            searchQuery += `&${QUERY_PARAMS.minPrice}=${this.priceFromURL}&${QUERY_PARAMS.maxPrice}=${this.priceToURL}`;\n        }\n\n        this.props.history.push({\n            search: searchQuery\n        });\n    };\n\n    fetchProducts = (currentPage, pageSize) => {\n        const queryObj = {};\n\n        if (this.brandIdFromURL) {\n            queryObj.brandId = this.brandIdFromURL;\n        }\n        if (this.industryIdFromURL) {\n            queryObj.industryId = this.industryIdFromURL;\n        }\n        if (this.branchIdFromURL) {\n            queryObj.branchId = this.branchIdFromURL;\n        }\n        if (this.categoryIdFromURL) {\n            queryObj.categoryId = this.categoryIdFromURL;\n        }\n        if (this.keywordFromURL) {\n            queryObj.keyword = this.keywordFromURL;\n        }\n        if (this.priceFromURL && this.priceToURL) {\n            queryObj.minPrice = this.priceFromURL;\n            queryObj.maxPrice = this.priceToURL;\n        }\n        this.setState({\n            showLoadingBar: true\n        });\n        WebService.getAllProducts(pageSize, (currentPage - 1) * pageSize, queryObj)\n            .then(res => {\n                this.setState({\n                    showLoadingBar: false\n                });\n                const result = JSON.parse(res);\n                if (result.products) {\n                    this.props.updateProductList(result.products.map(prd => ({ ...prd, images: JSON.parse(prd.images) })));\n                    this.props.changePageInfo({ totalItems: result.totalItems });\n                } else {\n                    console.log(\" have no products\");\n                }\n            })\n            .catch(err => {\n                console.log(err);\n            });\n    };\n\n    fetchCartProducts = () => {\n        const { isLoggedIn } = this.props;\n        if (isLoggedIn) {\n            WebService.getCart(AuthService.getTokenUnsafe()).then(res => {\n                const result = JSON.parse(res);\n                if (result.status === true) {\n                    if (result.products) {\n                        result.products.forEach(prd => (prd.images = JSON.parse(prd.images)));\n                    }\n                    this.props.updateCartProducts(result.products);\n                }\n            });\n        }\n    };\n\n    handleAddProductToCart = product => {\n        const { isLoggedIn, cart } = this.props;\n        if (isLoggedIn) {\n            const currentCartItems = cart.products;\n            if (product.id) {\n                let cartItemAmount = 0;\n                currentCartItems.map(cartItem => {\n                    if (cartItem.id === product.id) {\n                        cartItemAmount = cartItem.amount;\n                    }\n                    return null;\n                });\n                cartItemAmount += 1;\n                WebService.addItemToCart(AuthService.getTokenUnsafe(), product.id, cartItemAmount).then(r => {\n                    const res = JSON.parse(r);\n                    if (res.status) {\n                        showAlert(`Added ${product.product_name} to Cart!`);\n                        this.fetchCartProducts();\n                    }\n                });\n            }\n        } else {\n            showAlert(\"You have not logged in yet\", \"error\");\n        }\n    };\n\n    handleFilterChange = ({ currentPage, pageSize, totalItems }) => {\n        let payloadObj = {};\n\n        if (currentPage) {\n            payloadObj.currentPage = currentPage;\n        }\n\n        if (pageSize) {\n            payloadObj.pageSize = Number(pageSize);\n        }\n\n        if (totalItems) {\n            payloadObj.totalItems = totalItems;\n        }\n\n        this.props.changePageInfo(payloadObj);\n        if (pageSize || currentPage) {\n            this.updateURLParams({\n                currentPage: payloadObj.currentPage,\n                pageSize: payloadObj.pageSize\n            });\n\n            this.fetchProducts(payloadObj.currentPage || this.props.currentPage, payloadObj.pageSize || this.props.pageSize);\n        }\n    };\n\n    generateProducts = () => {\n        const { products } = this.props;\n        const productsElements = [];\n        console.log(products);\n        products.map((product, index) => {\n            if (product.active !== ACTIVE_TYPE.FALSE)\n                return productsElements.push(\n                    <Product\n                        // key={product.id}\n                        key={index}\n                        product={product}\n                        buttonTitle=\"Add to cart\"\n                        onClickHandler={this.handleAddProductToCart}\n                    />\n                );\n            return null;\n        });\n\n        return productsElements;\n    };\n\n    render = () => {\n        const { showLoadingBar } = this.state;\n        const { totalItems, pageSize, currentPage } = this.props;\n        return (\n            <div>\n                {showLoadingBar && <LoadingBar />}\n                {/* <!-- ##### Breadcumb Area Start ##### --> */}\n                <div className=\"breadcumb_area bg-img\" style={{ backgroundImage: \"url(/img/bg-img/breadcumb.jpg)\" }}>\n                    <div className=\"container h-100\">\n                        <div className=\"row h-100 align-items-center\">\n                            <div className=\"col-12\">\n                                <div className=\"page-title text-center\">\n                                    <h2>Products</h2>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                {/* <!-- ##### Breadcumb Area End ##### --> */}\n\n                {/* <!-- ##### Shop Grid Area Start ##### --> */}\n                <section className=\"shop_grid_area section-padding-80\">\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div className=\"col-12 col-md-4 col-lg-3\">\n                                <SearchPanel />\n                            </div>\n\n                            <div className=\"col-12 col-md-8 col-lg-9\">\n                                <div className=\"shop_grid_product_area\">\n                                    <div className=\"row\">\n                                        <div className=\"col-12\">\n                                            <div className=\"product-topbar d-flex align-items-center justify-content-between\">\n                                                {/* <!-- Total Products --> */}\n                                                <div className=\"total-products\">\n                                                    <p>\n                                                        <span>{totalItems}</span> products found\n                                                    </p>\n                                                </div>\n                                                <div className=\"d-flex\">\n                                                    {/* <!-- Number of Items --> */}\n                                                    <div className=\"product-sorting d-flex mr-3\">\n                                                        <p>Display:</p>\n                                                        <form action=\"#\" method=\"get\">\n                                                            <select\n                                                                name=\"select\"\n                                                                value={pageSize}\n                                                                onChange={e => {\n                                                                    this.handleFilterChange({ pageSize: e.target.value, currentPage: 1 });\n                                                                }}\n                                                            >\n                                                                <option value={12}>12</option>\n                                                                <option value={24}>24</option>\n                                                                <option value={36}>36</option>\n                                                            </select>\n                                                            <input type=\"submit\" className=\"d-none\" value=\"\" />\n                                                        </form>\n                                                    </div>\n                                                    {/* <!-- Sorting --> */}\n                                                    <div className=\"product-sorting d-flex\">\n                                                        <p>Sort by:</p>\n                                                        <form action=\"#\" method=\"get\">\n                                                            <select name=\"select\" id=\"sortByselect\">\n                                                                <option value=\"value\">Highest Rated</option>\n                                                                <option value=\"value\">Newest</option>\n                                                                <option value=\"value\">Price: $$ - $</option>\n                                                                <option value=\"value\">Price: $ - $$</option>\n                                                            </select>\n                                                            <input type=\"submit\" className=\"d-none\" value=\"\" />\n                                                        </form>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    {/* PRODUCTS */}\n                                    <div className=\"row\">{this.generateProducts()}</div>\n                                </div>\n                                <Paginator\n                                    handlePageChange={currentPage => {\n                                        this.handleFilterChange({ currentPage });\n                                    }}\n                                    currentPage={currentPage}\n                                    pageSize={pageSize}\n                                    totalItems={totalItems}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </section>\n                {/* <!-- ##### Shop Grid Area End ##### --> */}\n            </div>\n        );\n    };\n}\n\nclass Product extends Component {\n    static propTypes = {\n        product: PropTypes.shape({\n            images: PropTypes.array\n        }),\n        buttonTitle: PropTypes.string\n    };\n\n    render = () => {\n        const { product, onClickHandler, buttonTitle } = this.props;\n        if (!product) return \"\";\n        const discountedPrice = Math.round(product.price - product.price * product.discPercent);\n        return (\n            <div className=\"col-12 col-sm-6 col-lg-4\">\n                <div className=\"single-product-wrapper\">\n                    {/* <!-- Product Image --> */}\n                    <div className=\"product-img\">\n                        <Link to={ROUTE_NAME.PRODUCT_DETAIL + \"/\" + product.id}>\n                            <img src={product.images[0]} alt=\"\" />\n                            {/* <!-- Hover Thumb --> */}\n                            {product.images[1] && <img className=\"hover-img\" src={product.images[1]} alt=\"\" />}\n                        </Link>\n\n                        {/* <!-- Product Badge --> */}\n                        {product.discPercent !== 0 && (\n                            <div className=\"product-badge offer-badge\">\n                                <span>{\"-\" + Math.round(product.discPercent * 100) + \"%\"}</span>\n                            </div>\n                        )}\n\n                        {/* <!-- Favourite --> */}\n                        <div className=\"product-favourite\">\n                            <a href=\"/\" className=\"favme fa fa-heart\">\n                                <span />\n                            </a>\n                        </div>\n                    </div>\n\n                    {/* <!-- Product Description --> */}\n                    <div className=\"product-description\">\n                        <span>{product.category.category_name}</span>\n                        <Link to={ROUTE_NAME.PRODUCT_DETAIL + \"/\" + product.id}>\n                            <h6>{product.product_name}</h6>\n                        </Link>\n                        <p className=\"product-price\">\n                            {product.discPercent !== 0 && <span className=\"old-price\">{withCommas(product.price) + \" ₫\"}</span>}\n                            {withCommas(discountedPrice) + \" ₫\"}\n                        </p>\n\n                        {/* <!-- Hover Content --> */}\n                        <div className=\"hover-content\">\n                            {/* <!-- Add to Cart --> */}\n                            <div className=\"add-to-cart-btn\">\n                                <button className=\"btn essence-btn\" onClick={() => onClickHandler(product)}>\n                                    {buttonTitle}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    };\n}\n\nexport default withRouter(Products);\n"]},"metadata":{},"sourceType":"module"}