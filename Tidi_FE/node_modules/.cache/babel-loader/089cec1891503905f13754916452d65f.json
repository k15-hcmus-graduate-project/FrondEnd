{"ast":null,"code":"import _objectSpread from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/src/pages/products/SearchPanel/SearchPanel.jsx\";\n// StyleSheets\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport \"./SearchPanel.scss\";\nimport { ROUTE_NAME } from \"../../../routes/main.routing\";\nimport LIB from \"../../../helpers/lib\";\nimport WebService from \"../../../services/WebService\";\nimport { QUERY_PARAMS } from \"../../../config/constants\";\nvar INITIAL_STATE = {\n  brands: [],\n  filter: {\n    brand: {},\n    priceFrom: \"\",\n    priceTo: \"\",\n    priceIsInvalid: false\n  }\n};\n\nvar SearchPanel =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SearchPanel, _Component);\n\n  function SearchPanel(props) {\n    var _this;\n\n    _classCallCheck(this, SearchPanel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SearchPanel).call(this, props));\n\n    _this.componentDidMount = function () {\n      _this.fetchAllBrands();\n\n      _this.props.updateBranches(0);\n    };\n\n    _this.fetchAllBrands = function () {\n      WebService.getAllBrands().then(function (brds) {\n        var brands = JSON.parse(brds).brand;\n\n        _this.setState({\n          brands: brands\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.handleFilterItemSelected = function (filter) {\n      console.log(filter);\n\n      _this.setState({\n        filter: _objectSpread({}, _this.state.filter, filter)\n      });\n    };\n\n    _this.handleChangePrice = function (propName, value) {\n      var newState = {};\n      var x = Number(value);\n\n      if (value === \"\" || x) {\n        newState[propName] = value;\n        newState[\"priceIsInvalid\"] = false;\n      } else {\n        newState[\"priceIsInvalid\"] = true;\n      }\n\n      _this.setState({\n        filter: _objectSpread({}, _this.state.filter, newState)\n      });\n    };\n\n    _this.handleApplyFilter = function () {\n      var _this$state$filter = _this.state.filter,\n          brand = _this$state$filter.brand,\n          priceFrom = _this$state$filter.priceFrom,\n          priceTo = _this$state$filter.priceTo;\n      var queryString = \"?\";\n\n      if (brand.id) {\n        queryString += \"\".concat(QUERY_PARAMS.brandId, \"=\").concat(brand.id);\n      }\n\n      if (priceFrom && priceTo) {\n        queryString += \"&\".concat(QUERY_PARAMS.minPrice, \"=\").concat(priceFrom);\n        queryString += \"&\".concat(QUERY_PARAMS.maxPrice, \"=\").concat(priceTo);\n      }\n\n      _this.props.history.push(queryString);\n    };\n\n    _this.generateBrands = function () {\n      var visibleElements = [];\n      var collapsedElements = [];\n      var _this$state = _this.state,\n          brands = _this$state.brands,\n          filter = _this$state.filter;\n      var L = brands.length;\n\n      for (var i = 0; i < L; i++) {\n        var elementContainer = visibleElements;\n\n        if (i > 5) {\n          elementContainer = collapsedElements;\n        }\n\n        var brand = brands[i];\n        elementContainer.push(React.createElement(\"li\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: {\n            pathname: ROUTE_NAME.PRODUCTS,\n            search: \"?brd=\".concat(brand.id)\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, brand.brand_name)));\n      }\n\n      return React.createElement(React.Fragment, null, visibleElements, React.createElement(\"div\", {\n        id: \"collapseBrands\",\n        className: \"collapse\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, collapsedElements), React.createElement(\"span\", {\n        className: \"btn-link\",\n        \"data-toggle\": \"collapse\",\n        \"data-target\": \"#collapseBrands\",\n        role: \"button\",\n        \"aria-expanded\": \"false\",\n        \"aria-controls\": \"collapseExample\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Toggle\"));\n    };\n\n    _this.generateBranches = function () {\n      var _this$props = _this.props,\n          industries = _this$props.industries,\n          currentIndustryId = _this$props.currentIndustryId;\n      if (!industries) return \"\";\n\n      if (currentIndustryId !== undefined && industries[currentIndustryId]) {\n        return industries[currentIndustryId].branches.map(function (branch, index) {\n          var idName = LIB.generateRandomString();\n          return React.createElement(\"li\", {\n            key: index,\n            \"data-toggle\": \"collapse\",\n            \"data-target\": \"#\" + idName,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, React.createElement(\"a\", {\n            href: \"#/\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157\n            },\n            __self: this\n          }, branch.branch_name), React.createElement(\"ul\", {\n            className: \"sub-menu collapse\" + (index === 0 ? \" show\" : \"\"),\n            id: idName,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }, branch.categories.map(function (category, index) {\n            return React.createElement(\"li\", {\n              key: index,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 160\n              },\n              __self: this\n            }, React.createElement(Link, {\n              to: {\n                pathname: ROUTE_NAME.PRODUCTS,\n                search: \"?cat=\".concat(category.id)\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 161\n              },\n              __self: this\n            }, category.category_name));\n          })));\n        });\n      }\n\n      return \"\";\n    };\n\n    _this.render = function () {\n      var _this$state$filter2 = _this.state.filter,\n          priceIsInvalid = _this$state$filter2.priceIsInvalid,\n          priceFrom = _this$state$filter2.priceFrom,\n          priceTo = _this$state$filter2.priceTo;\n      return React.createElement(\"div\", {\n        className: \"shop_sidebar_area\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"widget catagory mb-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        className: \"widget-title mb-30\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"Catagories\"), React.createElement(\"div\", {\n        className: \"catagories-menu\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        id: \"menu-content2\",\n        className: \"menu-content collapse show\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, _this.generateBranches()))), React.createElement(\"div\", {\n        className: \"widget price mb-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        className: \"widget-title mb-30\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Filter by\"), React.createElement(\"p\", {\n        className: \"widget-title2 mb-30\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Price\"), React.createElement(\"div\", {\n        className: \"widget-desc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"d-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control mr-2\" + (priceIsInvalid ? \" is-invalid\" : \"\"),\n        placeholder: \"From\",\n        value: priceFrom,\n        onChange: function onChange(e) {\n          return _this.handleChangePrice(\"priceFrom\", e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"form-control\" + (priceIsInvalid ? \" is-invalid\" : \"\"),\n        placeholder: \"To\",\n        value: priceTo,\n        onChange: function onChange(e) {\n          return _this.handleChangePrice(\"priceTo\", e.target.value);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        className: \"widget brands mb-50\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"widget-title2 mb-30\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Brands\"), React.createElement(\"div\", {\n        className: \"widget-desc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, _this.generateBrands()))), React.createElement(\"div\", {\n        className: \"widget mb-50 d-flex justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn essence-btn btn-sm\",\n        onClick: _this.handleApplyFilter,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, \"Apply Filter\")));\n    };\n\n    _this.state = INITIAL_STATE;\n    return _this;\n  }\n\n  return SearchPanel;\n}(Component);\n\nSearchPanel.propTypes = {\n  updateBranches: PropTypes.func,\n  currentIndustryId: PropTypes.number,\n  industries: PropTypes.array\n};\nexport default SearchPanel;","map":{"version":3,"sources":["/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/src/pages/products/SearchPanel/SearchPanel.jsx"],"names":["React","Component","Link","PropTypes","ROUTE_NAME","LIB","WebService","QUERY_PARAMS","INITIAL_STATE","brands","filter","brand","priceFrom","priceTo","priceIsInvalid","SearchPanel","props","componentDidMount","fetchAllBrands","updateBranches","getAllBrands","then","brds","JSON","parse","setState","catch","err","console","log","handleFilterItemSelected","state","handleChangePrice","propName","value","newState","x","Number","handleApplyFilter","queryString","id","brandId","minPrice","maxPrice","history","push","generateBrands","visibleElements","collapsedElements","L","length","i","elementContainer","pathname","PRODUCTS","search","brand_name","generateBranches","industries","currentIndustryId","undefined","branches","map","branch","index","idName","generateRandomString","branch_name","categories","category","category_name","render","e","target","propTypes","func","number","array"],"mappings":"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","sourcesContent":["// @flow\n// StyleSheets\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport \"./SearchPanel.scss\";\nimport { ROUTE_NAME } from \"../../../routes/main.routing\";\nimport LIB from \"../../../helpers/lib\";\nimport WebService from \"../../../services/WebService\";\nimport { QUERY_PARAMS } from \"../../../config/constants\";\n\nconst INITIAL_STATE = {\n    brands: [],\n    filter: {\n        brand: {},\n        priceFrom: \"\",\n        priceTo: \"\",\n        priceIsInvalid: false\n    }\n};\n\nclass SearchPanel extends Component {\n    static propTypes = {\n        updateBranches: PropTypes.func,\n        currentIndustryId: PropTypes.number,\n        industries: PropTypes.array\n    };\n\n    constructor(props: any) {\n        super(props);\n        this.state = INITIAL_STATE;\n    }\n\n    componentDidMount = () => {\n        this.fetchAllBrands();\n        this.props.updateBranches(0);\n    };\n\n    fetchAllBrands = () => {\n        WebService.getAllBrands()\n            .then(brds => {\n                const brands = JSON.parse(brds).brand;\n                this.setState({\n                    brands\n                });\n            })\n            .catch(err => {\n                console.log(err);\n            });\n    };\n\n    handleFilterItemSelected = filter => {\n        console.log(filter);\n        this.setState({\n            filter: {\n                ...this.state.filter,\n                ...filter\n            }\n        });\n    };\n\n    handleChangePrice = (propName, value) => {\n        const newState = {};\n\n        let x = Number(value);\n        if (value === \"\" || x) {\n            newState[propName] = value;\n            newState[\"priceIsInvalid\"] = false;\n        } else {\n            newState[\"priceIsInvalid\"] = true;\n        }\n\n        this.setState({\n            filter: {\n                ...this.state.filter,\n                ...newState\n            }\n        });\n    };\n\n    handleApplyFilter = () => {\n        const { brand, priceFrom, priceTo } = this.state.filter;\n        let queryString = \"?\";\n\n        if (brand.id) {\n            queryString += `${QUERY_PARAMS.brandId}=${brand.id}`;\n        }\n\n        if (priceFrom && priceTo) {\n            queryString += `&${QUERY_PARAMS.minPrice}=${priceFrom}`;\n            queryString += `&${QUERY_PARAMS.maxPrice}=${priceTo}`;\n        }\n\n        this.props.history.push(queryString);\n    };\n\n    generateBrands = () => {\n        let visibleElements = [];\n        let collapsedElements = [];\n        const { brands, filter } = this.state;\n        const L = brands.length;\n        for (let i = 0; i < L; i++) {\n            let elementContainer = visibleElements;\n            if (i > 5) {\n                elementContainer = collapsedElements;\n            }\n            const brand = brands[i];\n            elementContainer.push(\n                <li key={i}>\n                    {/* <a\n                        // href=\"#/\"\n                        onClick={() => this.handleFilterItemSelected({ brand })}\n                        className={brand.brand_name === filter.brand.brand_name ? \"filter-item-selected\" : undefined}\n                    > */}\n                    <Link\n                        to={{\n                            pathname: ROUTE_NAME.PRODUCTS,\n                            search: `?brd=${brand.id}`\n                        }}\n                    >\n                        {brand.brand_name}\n                    </Link>\n                    {/* {brand.brand_name} */}\n                    {/* </a> */}\n                </li>\n            );\n        }\n\n        return (\n            <>\n                {visibleElements}\n                <div id=\"collapseBrands\" className=\"collapse\">\n                    {collapsedElements}\n                </div>\n                <span\n                    className=\"btn-link\"\n                    data-toggle=\"collapse\"\n                    data-target=\"#collapseBrands\"\n                    role=\"button\"\n                    aria-expanded=\"false\"\n                    aria-controls=\"collapseExample\"\n                >\n                    Toggle\n                </span>\n            </>\n        );\n    };\n\n    generateBranches = () => {\n        const { industries, currentIndustryId } = this.props;\n        if (!industries) return \"\";\n        if (currentIndustryId !== undefined && industries[currentIndustryId]) {\n            return industries[currentIndustryId].branches.map((branch, index) => {\n                let idName = LIB.generateRandomString();\n                return (\n                    <li key={index} data-toggle=\"collapse\" data-target={\"#\" + idName}>\n                        <a href=\"#/\">{branch.branch_name}</a>\n                        <ul className={\"sub-menu collapse\" + (index === 0 ? \" show\" : \"\")} id={idName}>\n                            {branch.categories.map((category, index) => (\n                                <li key={index}>\n                                    <Link\n                                        to={{\n                                            pathname: ROUTE_NAME.PRODUCTS,\n                                            search: `?cat=${category.id}`\n                                        }}\n                                    >\n                                        {category.category_name}\n                                    </Link>\n                                </li>\n                            ))}\n                        </ul>\n                    </li>\n                );\n            });\n        }\n\n        return \"\";\n    };\n\n    render = () => {\n        const { priceIsInvalid, priceFrom, priceTo } = this.state.filter;\n        return (\n            <div className=\"shop_sidebar_area\">\n                {/* <!-- ##### Single Widget ##### --> */}\n                <div className=\"widget catagory mb-50\">\n                    {/* <!-- Widget Title --> */}\n                    <h6 className=\"widget-title mb-30\">Catagories</h6>\n\n                    {/* <!--  Catagories  --> */}\n                    <div className=\"catagories-menu\">\n                        <ul id=\"menu-content2\" className=\"menu-content collapse show\">\n                            {/* <!-- Single Item --> */}\n                            {this.generateBranches()}\n                        </ul>\n                    </div>\n                </div>\n\n                {/* <!-- ##### Single Widget ##### --> */}\n                <div className=\"widget price mb-50\">\n                    {/* <!-- Widget Title --> */}\n                    <h6 className=\"widget-title mb-30\">Filter by</h6>\n                    {/* <!-- Widget Title 2 --> */}\n                    <p className=\"widget-title2 mb-30\">Price</p>\n\n                    <div className=\"widget-desc\">\n                        <div className=\"d-flex\">\n                            <input\n                                className={\"form-control mr-2\" + (priceIsInvalid ? \" is-invalid\" : \"\")}\n                                placeholder=\"From\"\n                                value={priceFrom}\n                                onChange={e => this.handleChangePrice(\"priceFrom\", e.target.value)}\n                            />\n                            <input\n                                className={\"form-control\" + (priceIsInvalid ? \" is-invalid\" : \"\")}\n                                placeholder=\"To\"\n                                value={priceTo}\n                                onChange={e => this.handleChangePrice(\"priceTo\", e.target.value)}\n                            />\n                        </div>\n                    </div>\n                </div>\n\n                {/* <!-- ##### Single Widget ##### --> */}\n                <div className=\"widget brands mb-50\">\n                    {/* <!-- Widget Title 2 --> */}\n                    <p className=\"widget-title2 mb-30\">Brands</p>\n                    <div className=\"widget-desc\">\n                        <ul>{this.generateBrands()}</ul>\n                    </div>\n                </div>\n\n                <div className=\"widget mb-50 d-flex justify-content-center\">\n                    <button className=\"btn essence-btn btn-sm\" onClick={this.handleApplyFilter}>\n                        Apply Filter\n                    </button>\n                </div>\n            </div>\n        );\n    };\n}\n\nexport default SearchPanel;\n"]},"metadata":{},"sourceType":"module"}