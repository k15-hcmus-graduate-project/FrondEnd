{"ast":null,"code":"import _regeneratorRuntime from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/src/pages/common/Auth/Login.jsx\";\n// External Dependencies\nimport React, { Component } from \"react\";\nimport * as Yup from \"yup\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { Formik, ErrorMessage } from \"formik\";\nimport { Input } from \"reactstrap\";\nimport PropTypes from \"prop-types\";\nimport { ROUTE_NAME } from \"../../../routes/main.routing\";\nimport AuthService from \"../../../services/AuthService\";\nimport WebService from \"../../../services/WebService\";\nvar INITIAL_STATE = {\n  redirectTo: null,\n  message: \"\",\n  lat: 0,\n  lng: 0,\n  user: null\n};\nvar SignupSchema = Yup.object().shape({\n  username: Yup.string().max(20, \"Tên đăng nhập chứa 1-20 ký tự\").required(\"Không bỏ qua trường này!\"),\n  password: Yup.string().max(20, \"Mật khẩu quá dài\").required(\"Không bỏ qua trường này!\")\n});\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this, props));\n\n    _this.getCurrentLocation = function (username) {\n      navigator.geolocation.getCurrentPosition(\n      /*#__PURE__*/\n      function () {\n        var _ref = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(position) {\n          var m_lat, m_lng, data;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  m_lat = position.coords.latitude;\n                  m_lng = position.coords.longitude;\n                  data = {\n                    lat: m_lat,\n                    lng: m_lng\n                  };\n                  _context.next = 5;\n                  return WebService.updateUserLocation(JSON.stringify(data), username);\n\n                case 5:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(), function () {\n        alert(\"Geocoder failed\");\n      });\n    };\n\n    _this.state = INITIAL_STATE;\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var initValues = {\n        username: \"\",\n        password: \"\"\n      };\n      var styleErr = {\n        color: \"red\",\n        marginLeft: \"20px\"\n      };\n      return React.createElement(\"div\", {\n        className: \"limiter\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, this.state.redirectTo, React.createElement(\"div\", {\n        className: \"container-login100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"wrap-login100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login100-pic js-tilt\",\n        \"data-tilt\": true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"/img/img-01.png\",\n        alt: \"IMG\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })), React.createElement(Formik, {\n        initialValues: initValues,\n        validationSchema: SignupSchema,\n        onSubmit: function onSubmit(values, actions) {\n          var username = values.username,\n              password = values.password;\n          setTimeout(function () {\n            AuthService.login(username, password).then(function (loggedInSuccess) {\n              console.log(loggedInSuccess);\n\n              if (loggedInSuccess === true) {\n                _this2.getCurrentLocation(username);\n\n                _this2.props.changeLoginStatus(true);\n\n                _this2.setState({\n                  redirectTo: React.createElement(Redirect, {\n                    to: ROUTE_NAME.HOME,\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 81\n                    },\n                    __self: this\n                  })\n                });\n              } else {\n                _this2.setState({\n                  message: \"Username or password is incorrect\"\n                });\n              }\n            });\n            actions.setSubmitting(false);\n          }, 1000);\n        },\n        render: function render(props) {\n          return React.createElement(\"form\", {\n            onSubmit: props.handleSubmit,\n            className: \"login100-form validate-form\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"login100-form-title\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            },\n            __self: this\n          }, \"Member Login\"), React.createElement(\"div\", {\n            className: \"wrap-input100 validate-input\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96\n            },\n            __self: this\n          }, React.createElement(Input, {\n            className: \"input100\",\n            type: \"text\",\n            name: \"username\",\n            placeholder: \"Username\",\n            onChange: props.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          }), React.createElement(\"span\", {\n            className: \"focus-input100\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 104\n            },\n            __self: this\n          }), React.createElement(\"span\", {\n            className: \"symbol-input100\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 105\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            className: \"fa fa-envelope\",\n            \"aria-hidden\": \"true\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 106\n            },\n            __self: this\n          })), \" \", React.createElement(ErrorMessage, {\n            name: \"username\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108\n            },\n            __self: this\n          }, function (msg) {\n            return React.createElement(\"div\", {\n              style: styleErr,\n              className: \"errormess\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 110\n              },\n              __self: this\n            }, msg);\n          })), React.createElement(\"div\", {\n            className: \"wrap-input100 validate-input\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            className: \"input100\",\n            type: \"password\",\n            name: \"password\",\n            placeholder: \"Password\",\n            onChange: props.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 118\n            },\n            __self: this\n          }), React.createElement(\"span\", {\n            className: \"focus-input100\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }), React.createElement(\"span\", {\n            className: \"symbol-input100\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            className: \"fa fa-lock\",\n            \"aria-hidden\": \"true\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127\n            },\n            __self: this\n          })), \" \", React.createElement(ErrorMessage, {\n            name: \"password\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 129\n            },\n            __self: this\n          }, function (msg) {\n            return React.createElement(\"div\", {\n              style: styleErr,\n              className: \"errormess\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 131\n              },\n              __self: this\n            }, msg);\n          })), React.createElement(\"div\", {\n            className: \"d-flex justify-content-center\",\n            style: {\n              color: \"red\",\n              height: 20,\n              margin: 0\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138\n            },\n            __self: this\n          }, \" \" + _this2.state.message), React.createElement(\"div\", {\n            className: \"container-login100-form-btn\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 142\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            type: \"submit\",\n            className: \"login100-form-btn\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 143\n            },\n            __self: this\n          }, \"Login\")), React.createElement(\"div\", {\n            className: \"text-center p-t-12\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            className: \"txt1\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 149\n            },\n            __self: this\n          }, \"Forgot \"), React.createElement(Link, {\n            to: ROUTE_NAME.RESET_PASSWORD,\n            className: \"txt2\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150\n            },\n            __self: this\n          }, \"Username / Password?\")), React.createElement(\"div\", {\n            className: \"text-center p-t-136\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 155\n            },\n            __self: this\n          }, React.createElement(Link, {\n            to: ROUTE_NAME.REGISTER,\n            className: \"txt2\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, \"Create your Account\", React.createElement(\"i\", {\n            className: \"fa fa-long-arrow-right m-l-5\",\n            \"aria-hidden\": \"true\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }))));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nLogin.propTypes = {\n  changeLoginStatus: PropTypes.func\n};\nexport default Login;","map":{"version":3,"sources":["/Users/lap12548/Documents/hcmus/TOTNGHIEP/GITHUB/FrondEnd/Tidi_FE/src/pages/common/Auth/Login.jsx"],"names":["React","Component","Yup","Link","Redirect","Formik","ErrorMessage","Input","PropTypes","ROUTE_NAME","AuthService","WebService","INITIAL_STATE","redirectTo","message","lat","lng","user","SignupSchema","object","shape","username","string","max","required","password","Login","props","getCurrentLocation","navigator","geolocation","getCurrentPosition","position","m_lat","coords","latitude","m_lng","longitude","data","updateUserLocation","JSON","stringify","alert","state","initValues","styleErr","color","marginLeft","values","actions","setTimeout","login","then","loggedInSuccess","console","log","changeLoginStatus","setState","HOME","setSubmitting","handleSubmit","handleChange","msg","height","margin","RESET_PASSWORD","REGISTER","propTypes","func"],"mappings":"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","sourcesContent":["// External Dependencies\nimport React, { Component } from \"react\";\nimport * as Yup from \"yup\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport { Formik, ErrorMessage } from \"formik\";\nimport { Input } from \"reactstrap\";\nimport PropTypes from \"prop-types\";\nimport { ROUTE_NAME } from \"../../../routes/main.routing\";\nimport AuthService from \"../../../services/AuthService\";\nimport WebService from \"../../../services/WebService\";\n\nconst INITIAL_STATE = {\n    redirectTo: null,\n    message: \"\",\n    lat: 0,\n    lng: 0,\n    user: null\n};\n\nconst SignupSchema = Yup.object().shape({\n    username: Yup.string()\n        .max(20, \"Tên đăng nhập chứa 1-20 ký tự\")\n        .required(\"Không bỏ qua trường này!\"),\n    password: Yup.string()\n        .max(20, \"Mật khẩu quá dài\")\n        .required(\"Không bỏ qua trường này!\")\n});\nclass Login extends Component {\n    static propTypes = {\n        changeLoginStatus: PropTypes.func\n    };\n\n    constructor(props: any) {\n        super(props);\n        this.state = INITIAL_STATE;\n    }\n\n    getCurrentLocation = username => {\n        navigator.geolocation.getCurrentPosition(\n            async position => {\n                var m_lat = position.coords.latitude;\n                var m_lng = position.coords.longitude;\n                const data = { lat: m_lat, lng: m_lng };\n                await WebService.updateUserLocation(JSON.stringify(data), username);\n            },\n            () => {\n                alert(\"Geocoder failed\");\n            }\n        );\n    };\n\n    render() {\n        const initValues = {\n            username: \"\",\n            password: \"\"\n        };\n        const styleErr = {\n            color: \"red\",\n            marginLeft: \"20px\"\n        };\n        return (\n            <div className=\"limiter\">\n                {this.state.redirectTo}\n                <div className=\"container-login100\">\n                    <div className=\"wrap-login100\">\n                        <div className=\"login100-pic js-tilt\" data-tilt>\n                            <img src=\"/img/img-01.png\" alt=\"IMG\" />\n                        </div>\n                        <Formik\n                            initialValues={initValues}\n                            validationSchema={SignupSchema}\n                            onSubmit={(values, actions) => {\n                                const { username, password } = values;\n                                setTimeout(() => {\n                                    AuthService.login(username, password).then(loggedInSuccess => {\n                                        console.log(loggedInSuccess);\n                                        if (loggedInSuccess === true) {\n                                            this.getCurrentLocation(username);\n                                            this.props.changeLoginStatus(true);\n                                            this.setState({\n                                                redirectTo: <Redirect to={ROUTE_NAME.HOME} />\n                                            });\n                                        } else {\n                                            this.setState({\n                                                message: \"Username or password is incorrect\"\n                                            });\n                                        }\n                                    });\n                                    actions.setSubmitting(false);\n                                }, 1000);\n                            }}\n                            render={props => (\n                                <form onSubmit={props.handleSubmit} className=\"login100-form validate-form\">\n                                    <span className=\"login100-form-title\">Member Login</span>\n\n                                    <div className=\"wrap-input100 validate-input\">\n                                        <Input\n                                            className=\"input100\"\n                                            type=\"text\"\n                                            name=\"username\"\n                                            placeholder=\"Username\"\n                                            onChange={props.handleChange}\n                                        />\n                                        <span className=\"focus-input100\" />\n                                        <span className=\"symbol-input100\">\n                                            <i className=\"fa fa-envelope\" aria-hidden=\"true\" />\n                                        </span>{\" \"}\n                                        <ErrorMessage name=\"username\">\n                                            {msg => (\n                                                <div style={styleErr} className=\"errormess\">\n                                                    {msg}\n                                                </div>\n                                            )}\n                                        </ErrorMessage>\n                                    </div>\n\n                                    <div className=\"wrap-input100 validate-input\">\n                                        <input\n                                            className=\"input100\"\n                                            type=\"password\"\n                                            name=\"password\"\n                                            placeholder=\"Password\"\n                                            onChange={props.handleChange}\n                                        />\n                                        <span className=\"focus-input100\" />\n                                        <span className=\"symbol-input100\">\n                                            <i className=\"fa fa-lock\" aria-hidden=\"true\" />\n                                        </span>{\" \"}\n                                        <ErrorMessage name=\"password\">\n                                            {msg => (\n                                                <div style={styleErr} className=\"errormess\">\n                                                    {msg}\n                                                </div>\n                                            )}\n                                        </ErrorMessage>\n                                    </div>\n\n                                    <div className=\"d-flex justify-content-center\" style={{ color: \"red\", height: 20, margin: 0 }}>\n                                        {\" \" + this.state.message}\n                                    </div>\n\n                                    <div className=\"container-login100-form-btn\">\n                                        <button type=\"submit\" className=\"login100-form-btn\">\n                                            Login\n                                        </button>\n                                    </div>\n\n                                    <div className=\"text-center p-t-12\">\n                                        <span className=\"txt1\">Forgot </span>\n                                        <Link to={ROUTE_NAME.RESET_PASSWORD} className=\"txt2\">\n                                            Username / Password?\n                                        </Link>\n                                    </div>\n\n                                    <div className=\"text-center p-t-136\">\n                                        <Link to={ROUTE_NAME.REGISTER} className=\"txt2\">\n                                            Create your Account\n                                            <i className=\"fa fa-long-arrow-right m-l-5\" aria-hidden=\"true\" />\n                                        </Link>\n                                    </div>\n                                </form>\n                            )}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}